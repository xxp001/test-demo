(function(t){function e(e){for(var s,i,l=e[0],r=e[1],c=e[2],u=0,p=[];u<l.length;u++)i=l[u],o[i]&&p.push(o[i][0]),o[i]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s]);d&&d(e);while(p.length)p.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,l=1;l<a.length;l++){var r=a[l];0!==o[r]&&(s=!1)}s&&(n.splice(e--,1),t=i(i.s=a[0]))}return t}var s={},o={app:0},n=[];function i(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=s,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(a,s,function(e){return t[e]}.bind(null,s));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var d=r;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0196":function(t,e,a){},"032d":function(t,e,a){},"03e1":function(t,e,a){},"0bbf":function(t,e,a){"use strict";var s=a("131d"),o=a.n(s);o.a},"0bef":function(t,e,a){},"0d6d":function(t,e,a){t.exports=a.p+"img/zhankai1.9342b623.png"},"0db0":function(t,e,a){"use strict";var s=a("3cd4"),o=a.n(s);o.a},"131d":function(t,e,a){},1484:function(t,e,a){},1715:function(t,e,a){},1809:function(t,e,a){t.exports=a.p+"img/zhankai2.998923f8.png"},"1a7b":function(t,e,a){"use strict";var s=a("03e1"),o=a.n(s);o.a},"21e7":function(t,e,a){"use strict";var s=a("a1a8"),o=a.n(s);o.a},"226c":function(t,e,a){},"22fd":function(t,e,a){},"27ed":function(t,e,a){t.exports=a.p+"img/shouqi1.7169520e.png"},"28a4":function(t,e,a){},"307a":function(t,e,a){"use strict";var s=a("3085"),o=a.n(s);o.a},3085:function(t,e,a){},3486:function(t,e,a){},"36be":function(t,e,a){},"377d":function(t,e,a){"use strict";var s=a("8a2c"),o=a.n(s);o.a},"394e":function(t,e,a){"use strict";var s=a("f933"),o=a.n(s);o.a},"3b27":function(t,e,a){"use strict";var s=a("86ca"),o=a.n(s);o.a},"3c9a":function(t,e,a){},"3cd4":function(t,e,a){},"3d3e":function(t,e,a){t.exports=a.p+"img/jxz.f9f99dc6.png"},"3d61":function(t,e,a){},"3dbb":function(t,e,a){"use strict";var s=a("8e38"),o=a.n(s);o.a},"3ee1":function(t,e,a){"use strict";var s=a("b3e6"),o=a.n(s);o.a},"40ab":function(t,e,a){},4437:function(t,e,a){},4556:function(t,e,a){"use strict";var s=a("5756"),o=a.n(s);o.a},4605:function(t,e,a){"use strict";var s=a("c025"),o=a.n(s);o.a},4664:function(t,e,a){},"4b0b":function(t,e,a){},"4dcb":function(t,e,a){},"4f39":function(t,e,a){},"4f84":function(t,e,a){},5169:function(t,e,a){"use strict";var s=a("0bef"),o=a.n(s);o.a},"525f":function(t,e,a){t.exports=a.p+"img/project-img.920973fb.png"},"531b":function(t,e,a){t.exports=a.p+"img/ywc.2d94d5a9.png"},5606:function(t,e,a){"use strict";var s=a("226c"),o=a.n(s);o.a},"561e":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("0fae");var s=a("9e2f"),o=a.n(s),n=(a("cadf"),a("551c"),a("097d"),a("2b0e")),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"svApp"}},[a("keep-alive",{attrs:{include:"MyProject,AddDept",exclude:"svHeader"}},[a("router-view")],1)],1)},l=[],r="http://59.175.221.211:8089/",c="",d={name:"svApp",svUrl:r,workCode:c,components:{},setWorkCode:function(t){this.workCode=t},checkError:function(t,e){if(200==e.state)return!0;t.$message.error(e.msg)},mounted:function(){document.body.style.margin=0,document.body.style.padding=0}},u=d,p=(a("394e"),a("2877")),m=Object(p["a"])(u,i,l,!1,null,null,null),f=m.exports,h=a("8c4f"),v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"index"},[s("svHeader",{on:{"got-new-role-id":function(e){t.getProjBrief()}}}),s("el-container",[s("el-aside",{staticStyle:{width:"3%"}}),s("el-main",[s("div",{staticClass:"addPackage clearfix"},[s("span",{staticClass:"title",attrs:{"data-v-d13474f6":""}},[t._v("项目概览")]),s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingProjBrief,expression:"loadingProjBrief"}],staticClass:"manager clearfix"},[s("p",{staticClass:"addOverview",on:{click:function(e){t.toMyProj("list")}}},[s("img",{attrs:{src:a("e09b")}}),s("span",[t._v(t._s(t.projBrief.total))])]),s("p",{staticClass:"addOverview ",on:{click:function(e){t.toMyProj("list_finished")}}},[s("img",{attrs:{src:a("531b")}}),s("span",[t._v(t._s(t.projBrief.finished))])]),s("p",{staticClass:"addOverview ",on:{click:function(e){t.toMyProj("list_running")}}},[s("img",{attrs:{src:a("3d3e")}}),s("span",[t._v(t._s(t.projBrief.running))])]),s("p",{staticClass:"addOverview ",on:{click:function(e){t.toMyProj("list_ready")}}},[s("img",{attrs:{src:a("cad4")}}),s("span",[t._v(t._s(t.projBrief.preStart))])])])]),s("div",{staticClass:"addPackage padb40 clearfix"},[s("span",{staticClass:"title addtitle",attrs:{"data-v-d13474f6":""}},[t._v("我的项目列表")]),s("span",{staticClass:"link-more",attrs:{"data-v-d13474f6":""},on:{click:function(e){t.toMyProj("list")}}},[t._v("更多>>")]),s("sv-project-list",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingProjList,expression:"loadingProjList"}],attrs:{projList:t.projList}})],1),s("div",{staticClass:"addPackage padb40 clearfix"},[s("el-row",{},[s("el-col",{attrs:{span:14}},[s("span",{staticClass:"title",attrs:{"data-v-d13474f6":""}},[t._v("个人工作日报")])])],1),s("el-row",{staticClass:"mt-2"},[s("el-col",{attrs:{span:1,offset:1}},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.toAdd()}}},[t._v("添加")])],1),s("el-col",{staticClass:"text-center",attrs:{span:4,offset:1}},[[s("div",{staticClass:"block"},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.searchTime,callback:function(e){t.searchTime=e},expression:"searchTime"}})],1)]],2),s("el-col",{staticClass:"text-center ml-2 ",attrs:{span:1}},[s("el-button",{staticClass:"mt-1",attrs:{type:"primary",size:"small"}},[s("i",{staticClass:"el-icon-search"})])],1)],1),s("el-row",{staticClass:"mt-2"},[s("el-col",{attrs:{offset:1,span:22}},[s("el-table",{staticClass:"w100 ",attrs:{data:t.perDailyData[t.curentPage-1],border:"",stripe:""}},[s("el-table-column",{attrs:{label:"编号"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.$index+1))])]}}])}),s("el-table-column",{attrs:{label:"标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.summary))])]}}])}),s("el-table-column",{attrs:{label:"提交时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.uploadTime))])]}}])}),s("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.showDailyDetail(e.row)}}},[s("i",{staticClass:"el-icon-search"}),t._v(" 查看")])]}}])})],1)],1)],1),s("el-row",{staticClass:"mt-4"},[s("el-col",{staticClass:"text-right"},[s("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.totalPage,"pager-count":11,"page-size":t.pageSize,"current-page":t.curentPage},on:{"update:currentPage":function(e){t.curentPage=e}}})],1)],1)],1)]),s("el-aside",{staticStyle:{width:"3%"}})],1),t.dailyDetailShow?s("SvDailyDetail",{attrs:{item:t.dailyDetailData},on:{closeDailyDetail:function(e){t.closeDailyDetail()}}}):t._e()],1)},g=[],b=a("5d73"),C=a.n(b),y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"svHeader"},[s("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,mode:"horizontal","background-color":"#409EFF","text-color":"white","active-text-color":"#ffd04b"},on:{select:t.handleSelect}},[s("el-row",[s("el-col",{staticClass:"text-center",attrs:{span:5}},[s("p",{staticClass:"topFontCss"},[s("img",{attrs:{src:a("9453")}})])]),s("el-col",{attrs:{span:15}},[s("el-row",{staticClass:"index_top"},[s("el-col",{staticClass:"text-center mt-2",attrs:{span:3}},[s("el-menu-item",{attrs:{index:"1"},on:{click:function(e){t.goto("1")}}},[t._v("首页")])],1),s("el-col",{staticClass:"text-center mt-2",attrs:{span:3}},[s("el-submenu",{attrs:{index:"2"}},[s("template",{slot:"title"},[t._v("监理项目")]),s("el-menu-item",{attrs:{index:"2.1"},on:{click:function(e){t.goto("2.1")}}},[t._v("我的项目")]),s("el-menu-item",{attrs:{index:"2.2"},on:{click:function(e){t.goto("2.2")}}},[t._v("添加项目")])],2)],1),s("el-col",{staticClass:"text-center mt-2",attrs:{span:3}},[s("el-menu-item",{attrs:{index:"4"},on:{click:function(e){t.goto("4")}}},[t._v("咨询服务")])],1),s("el-col",{staticClass:"text-center mt-2",attrs:{span:3}},[s("el-menu-item",{attrs:{index:"5"},on:{click:function(e){t.goto("5")}}},[t._v("网络安全")])],1),s("el-col",{staticClass:"text-center mt-2",attrs:{span:3}},[s("el-menu-item",{attrs:{index:"6"},on:{click:function(e){t.goto("6")}}},[t._v("知识库")])],1),s("el-col",{staticClass:"text-center mt-2",attrs:{span:3}},[s("el-submenu",{attrs:{index:"3"}},[s("template",{slot:"title"},[t._v("系统管理")]),s("el-submenu",{attrs:{index:"3.1"}},[s("template",{slot:"title"},[t._v("用户管理")]),s("el-menu-item",{attrs:{index:"3.1.1"},on:{click:function(e){t.goto("3.1.1")}}},[t._v("个人中心")])],2),s("el-menu-item",{attrs:{index:"3.7"},on:{click:function(e){t.goto("3.7")}}},[t._v("组织架构")]),s("el-menu-item",{attrs:{index:"3.2.4"},on:{click:function(e){t.goto("3.2.4")}}},[t._v("账号管理")]),s("el-submenu",{directives:[{name:"show",rawName:"v-show",value:t.isManager,expression:"isManager"}],attrs:{index:"3.6"}},[s("template",{slot:"title"},[t._v("系统设置")]),s("el-menu-item",{attrs:{index:"3.6.1"},on:{click:function(e){t.goto("3.6.1")}}},[t._v("角色权限分配")]),s("el-menu-item",{attrs:{index:"3.6.2"},on:{click:function(e){t.goto("3.6.2")}}},[t._v("角色成本设置")]),s("el-menu-item",{attrs:{index:"3.6.3"},on:{click:function(e){t.goto("3.6.3")}}},[t._v("模板文档设置")])],2),s("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.isManager,expression:"isManager"}],attrs:{index:"3.3"},on:{click:function(e){t.goto("3.3")}}},[t._v("备份管理")]),s("el-submenu",{directives:[{name:"show",rawName:"v-show",value:t.isManager,expression:"isManager"}],attrs:{index:"3.5"}},[s("template",{slot:"title"},[t._v("研判统计")]),s("el-menu-item",{attrs:{index:"3.5.1"},on:{click:function(e){t.goto("3.5.1")}}},[t._v("项目总览")]),s("el-menu-item",{attrs:{index:"3.5.2"},on:{click:function(e){t.goto("3.5.2")}}},[t._v("进度统计")]),s("el-menu-item",{attrs:{index:"3.5.3"},on:{click:function(e){t.goto("3.5.3")}}},[t._v("成本统计")])],2)],2)],1)],1)],1),""!=t.workCode&&null!=t.workCode?s("el-col",{attrs:{span:4}},[s("p",{staticClass:"fontCss mat30"},[t._v("\n\t\t\t\t\t\t"+t._s(t.userName)+" 欢迎您  \n\t\t\t\t\t\t"),s("a",[t._v("| ")]),s("a",{staticClass:"zhuxiao_css",on:{click:function(e){t.loginOut()}}},[t._v(" 注销")])])]):t._e(),""==t.workCode||null==t.workCode?s("el-col",{staticClass:"text-center",attrs:{span:4}},[s("p",{staticClass:"fontCss cursor",on:{click:function(e){t.goto("0")}}},[t._v("未登录")])]):t._e()],1)],1)],1)},_=[],w=a("5118"),k={components:{},props:{menuIndex:String},name:"svHeader",data:function(){return{activeIndex:"1",workCode:"",userName:"",setIntervalObj:"",isManager:!1}},methods:{handleSelect:function(t,e){console.log(t+e)},goto:function(t){switch(t){case"1":this.$router.push({path:"/index"});break;case"2.2":this.$router.push({path:"/add-project"});break;case"2.1":sessionStorage.indexParam="list",this.$router.push({path:"/my-project"});break;case"3.2.3":this.$router.push({path:"/account-assign"});break;case"3.2.4":this.$router.push({path:"/account"});break;case"0":this.$router.push({path:"/"});break;case"3.2.1":this.$router.push({path:"/add-dept"});break;case"3.2.2":this.$router.push({path:"/transfer"});break;case"3.1.1":this.$router.push({path:"/person-info"});break;case"3.3":this.$router.push({path:"/backup"});break;case"3.5.1":this.$router.push({path:"/proj-sum"});break;case"3.5.2":this.$router.push({path:"/prog-stat"});break;case"3.5.3":this.$router.push({path:"/pro-cost-count"});break;case"6":this.$router.push({path:"/knowledge"});break;case"3.6.3":this.$router.push({path:"/document-template-list"});break;case"3.6.1":this.$router.push({path:"/role-list"});break;case"3.6.2":this.$router.push({path:"/role-cost-list"});break;case"3.7":this.$router.push({path:"/org"});break}},loginOut:function(){var t=this;this.$axios.post("user/loginOut").then(function(e){200==e.data.state&&(sessionStorage.workcode="",sessionStorage.username="",sessionStorage.roleId="",Object(w["clearInterval"])(t.setIntervalObj),t.$router.push("/"))})},checkUserLogin:function(){var t=this;this.$axios.get("user/getLoginUserInfo").then(function(e){200==e.data.state?(sessionStorage.workcode=e.data.data.workCode,sessionStorage.username=e.data.data.userRealname,sessionStorage.roleId=e.data.data.roleId,sessionStorage.id=e.data.data.id):(sessionStorage.workcode="",sessionStorage.username="",t.$alert("用户未登录","提示",{confirmButtonText:"确定",callback:function(t){}}),Object(w["clearInterval"])(t.setIntervalObj),t.$router.push("/"))})},getUserInfo:function(){var t=this;void 0!=sessionStorage.roleId&&""!=sessionStorage.roleId?(this.checkRole(),this.$emit("got-new-role-id")):this.$axios.get("user/getLoginUserInfo").then(function(e){200==e.data.state&&(console.log("got-new-role-id"),sessionStorage.roleId=e.data.data.roleId,t.checkRole(),t.$emit("got-new-role-id"))})},checkRole:function(){sessionStorage.roleId>=5&&(this.isManager=!0)}},mounted:function(){var t=this;this.activeIndex=this.menuIndex,this.workCode=sessionStorage.getItem("workcode"),this.userName=sessionStorage.getItem("username"),this.checkUserLogin(),this.setIntervalObj=Object(w["setInterval"])(function(e){t.checkUserLogin()},9e5),this.getUserInfo(),console.log("header")}},D=k,x=(a("d95c"),Object(p["a"])(D,y,_,!1,null,null,null)),S=x.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{staticClass:"proj-list addProjectstable",attrs:{data:t.projList}},[a("el-table-column",{attrs:{label:"项目名称",prop:"projectName",width:"",align:"center"}}),a("el-table-column",{attrs:{label:"项目总监",prop:"projectDirector.userRealname",width:"",align:"center"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime",width:"",align:"center"}}),a("el-table-column",{attrs:{label:"状态",prop:"projectState",width:"",align:"center"}}),a("el-table-column",{attrs:{label:"进度",width:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-progress",{attrs:{percentage:t.row.process}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("button",{staticClass:"btn-detail",on:{click:function(a){t.toStateDetail(e.row.id)}}},[t._v("查看详情")])]}}])})],1)},$=[],T={props:["projList"],data:function(){return{}},methods:{toStateDetail:function(t){this.projList.length<=5?sessionStorage.detailBackRouter="/index":sessionStorage.detailBackRouter="/my-project",this.$router.push("/state-detail"),sessionStorage.projectId=t}}},A=T,I=(a("6520"),Object(p["a"])(A,j,$,!1,null,"c5dd77c8",null)),P=I.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dailyDetail"},[a("div",{staticClass:"bg-model"},[a("div",{staticClass:"bg-content"},[a("el-container",[a("el-main",[a("el-row",{staticClass:"mt-4"},[a("el-col",{attrs:{span:22,offset:1}},[a("a",{staticClass:"head-css"},[t._v("日志详细信息")])])],1),a("el-row",{staticClass:"mt-4"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:4,offset:1}},[a("a",[t._v("标题：")])]),a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{readonly:""},model:{value:t.item.summary,callback:function(e){t.$set(t.item,"summary",e)},expression:"item.summary"}})],1)],1),a("el-row",{staticClass:"mt-4"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:4,offset:1}},[a("a",[t._v("项目名称：")])]),a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{readonly:""},model:{value:t.projectName,callback:function(e){t.projectName=e},expression:"projectName"}})],1)],1),a("el-row",{staticClass:"mt-4"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:4,offset:1}},[a("a",[t._v("提交人：")])]),a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{readonly:""},model:{value:t.item.uploadFrom,callback:function(e){t.$set(t.item,"uploadFrom",e)},expression:"item.uploadFrom"}})],1)],1),a("el-row",{staticClass:"mt-4"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:4,offset:1}},[a("a",[t._v("提交时间：")])]),a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{readonly:""},model:{value:t.item.uploadTime,callback:function(e){t.$set(t.item,"uploadTime",e)},expression:"item.uploadTime"}})],1)],1),a("el-row",{staticClass:"mt-4"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:4,offset:1}},[a("a",[t._v("日志详情： ")])]),a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{type:"textarea",rows:5,readonly:""},model:{value:t.item.dailyDetail,callback:function(e){t.$set(t.item,"dailyDetail",e)},expression:"item.dailyDetail"}})],1)],1),a("el-row",{staticClass:"mt-4"},[a("el-col",{attrs:{span:20,offset:2}},[a("el-button",{staticClass:"w100",attrs:{type:"warning"},on:{click:function(e){t.close()}}},[t._v("返回")])],1)],1)],1)],1)],1)])])},N=[],L={name:"dailyDetail",props:{item:Object},data:function(){return{projectName:""}},methods:{close:function(){this.$emit("closeDailyDetail","")},getProDettail:function(){var t=this,e=new URLSearchParams;e.append("projectId",this.item.projectId),this.$axios.post("/project/detail",e).then(function(e){t.projectName=e.data.data.projectName})}},mounted:function(){this.getProDettail()}},R=L,O=(a("7566"),Object(p["a"])(R,B,N,!1,null,"b1d1d37c",null)),U=O.exports;a("3b2b"),a("a481");function E(t,e){/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var s in a)if(new RegExp("(".concat(s,")")).test(e)){var o=a[s]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?o:F(o))}return e}function F(t){return("00"+t).substr(t.length)}var M,z={name:"index",components:{SvHeader:S,SvProjectList:P,SvDailyDetail:U},data:function(){return{member:!1,manager:!1,loadingProjList:!1,loadingProjBrief:!1,projBrief:{},projList:[],perDailyData:[],searchTime:[],pageSize:10,totalPage:100,curentPage:1,dailyDetailData:{},dailyDetailShow:!1}},methods:{transformProjState:function(t){switch(t){case 0:return"未开始";case 1:return"进行中";case 2:return"已终验";case 3:return"已完成"}},getProjBrief:function(){var t=this;console.log("getProjBrief"),sessionStorage.roleId>66?(this.loadingProjBrief=!0,this.$axios.get("project/summary").then(function(e){console.log(e.data);var a=e.data.data;t.projBrief=a,t.loadingProjBrief=!1}).catch(function(t){console.log(t)})):(this.loadingProjBrief=!0,this.$axios.get("project/summary_normal").then(function(e){console.log(e.data);var a=e.data.data;t.projBrief=a,t.loadingProjBrief=!1}).catch(function(t){console.log(t)}))},getProjList:function(){var t=this;this.loadingProjList=!0,this.$axios.get("project/list?page=1&pageSize=5").then(function(e){var a=e.data.data,s=a.list;a.total;s.map(function(t){t.createTime=E(new Date(t.createTime),"yyyy.MM.dd")}),s.map(function(e){e.projectState=t.transformProjState(e.projectState)}),console.log(s),t.projList=s,t.loadingProjList=!1}).catch(function(t){console.log(t)})},toMyProj:function(t){sessionStorage.indexParam=t,this.$router.push("/my-project")},toAdd:function(){this.$router.push("/add-daily-cost")},getDailyList:function(){var t=this;this.$axios.get("project/my_work_daily").then(function(e){if(200==e.data.state){var a=!0,s=!1,o=void 0;try{for(var n,i=C()(e.data.data.dailyListObject);!(a=(n=i.next()).done);a=!0){var l=n.value;l["uploadTime"]=E(new Date(l["uploadTime"]),"yyyy-MM-dd hh:mm")}}catch(u){s=!0,o=u}finally{try{a||null==i.return||i.return()}finally{if(s)throw o}}t.perDailyData=[];var r=0;while(-1!=r){for(var c=[],d=0;d<10;d++){if(!e.data.data.dailyListObject[r]){r=-1;break}c.push(e.data.data.dailyListObject[r]),r++}t.perDailyData.push(c)}t.totalPage=10*t.perDailyData.length}else t.$alert("错误！！："+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})})},showDailyDetail:function(t){this.dailyDetailData=t,this.dailyDetailShow=!0},closeDailyDetail:function(){this.dailyDetailShow=!1},test:function(){console.log("success!!")}},mounted:function(){this.getProjList(),this.getDailyList()}},H=z,W=(a("4605"),Object(p["a"])(H,v,g,!1,null,"1c8383c0",null)),V=W.exports,Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-project"},[a("sv-header",{key:t.headerKey,attrs:{menuIndex:"2.1"}}),a("div",{staticClass:"top-bar clearfix"},[a("span",{staticClass:"btn-refresh el-icon-refresh",on:{click:function(e){t.getProjList("refresh")}}}),a("ul",[a("li",[a("el-select",{attrs:{placeholder:"项目状态"},on:{change:function(e){t.getProjList("sel")}},model:{value:t.selState,callback:function(e){t.selState=e},expression:"selState"}},t._l(t.projStates,function(t){return a("el-option",{key:t.val,attrs:{label:t.label,value:t.val}})}),1)],1),a("li",[a("el-date-picker",{staticClass:"date-picker",attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"daterange","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOpts},on:{change:t.getProjByDate},model:{value:t.selDate,callback:function(e){t.selDate=e},expression:"selDate"}})],1)]),a("el-input",{staticClass:"search-box",attrs:{placeholder:"请输入委托方 / 项目名称"},model:{value:t.searchTxt,callback:function(e){t.searchTxt=e},expression:"searchTxt"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.searchProj},slot:"append"})],1),a("span",{on:{click:t.toAddProj}},[t._v("创建新项目")])],1),a("sv-project-list",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingProjList,expression:"loadingProjList"}],staticClass:"proj-list",attrs:{projList:t.projList}}),a("div",{staticClass:"pagination-wrapper clearfix"},[a("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"prev, pager, next","current-page":t.curPage,total:t.itemTotal},on:{"update:currentPage":function(e){t.curPage=e},"current-change":function(e){t.getProjList("changePage")}}})],1),a("sv-footer")],1)},Y=[],J=a("bd86"),K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"placeholder"})},G=[],q={},Q=q,X=(a("8159"),Object(p["a"])(Q,K,G,!1,null,"2887d071",null)),tt=X.exports,et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"footer"})},at=[],st={},ot=st,nt=(a("8f43"),Object(p["a"])(ot,et,at,!1,null,"ba642416",null)),it=nt.exports,lt={name:"MyProject",components:{SvHeader:S,SvProjectList:P,SvPlaceholder:tt,SvFooter:it},data:function(){var t;return t={projStates:[{label:"未开始",val:"list_ready"},{label:"进行中",val:"list_running"},{label:"已完成",val:"list_finished"},{label:"所有",val:"list"}],selDate:"",pickerOpts:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},selState:"list",searchTxt:""},Object(J["a"])(t,"selDate",""),Object(J["a"])(t,"loadingProjList",!1),Object(J["a"])(t,"hasData",!1),Object(J["a"])(t,"showPh",!0),Object(J["a"])(t,"loading",!1),Object(J["a"])(t,"projList",[]),Object(J["a"])(t,"curPage",1),Object(J["a"])(t,"itemTotal",0),Object(J["a"])(t,"isUpdate",!1),Object(J["a"])(t,"headerKey",0),t},methods:{transformProjState:function(t){switch(t){case 0:return"未开始";case 1:return"进行中";case 2:return"已终验";case 3:return"已完成"}},getProjList:function(t){var e=this;"default"==t?(this.loadingProjList=!0,this.$axios.get("project/list?page=1&pageSize=10").then(function(t){console.log(t.data);var a=t.data.data,s=a.list,o=a.total;s.map(function(t){t.createTime=E(new Date(t.createTime),"yyyy.MM.dd")}),s.map(function(t){t.projectState=e.transformProjState(t.projectState)}),console.log(s),e.projList=s,e.itemTotal=o,e.loadingProjList=!1})):"sel"==t?(this.loadingProjList=!0,this.$axios.get("project/"+this.selState+"?page=1&pageSize=10").then(function(t){var a=t.data.data,s=a.list,o=a.total;s.map(function(t){t.createTime=E(new Date(t.createTime),"yyyy.MM.dd")}),s.map(function(t){t.projectState=e.transformProjState(t.projectState)}),e.projList=s,e.itemTotal=o,e.loadingProjList=!1})):"refresh"==t?(this.loadingProjList=!0,this.$axios.get("project/"+this.selState+"?page="+this.curPage+"&pageSize=10").then(function(t){var a=t.data.data,s=a.list,o=a.total;s.map(function(t){t.createTime=E(new Date(t.createTime),"yyyy.MM.dd")}),s.map(function(t){t.projectState=e.transformProjState(t.projectState)}),e.projList=s,e.itemTotal=o,e.loadingProjList=!1})):"changePage"==t&&(this.loadingProjList=!0,this.$axios.get("project/"+this.selState+"?page="+this.curPage+"&pageSize=10").then(function(t){var a=t.data.data,s=a.list,o=a.total;s.map(function(t){t.createTime=E(new Date(t.createTime),"yyyy.MM.dd")}),s.map(function(t){t.projectState=e.transformProjState(t.projectState)}),e.projList=s,e.itemTotal=o,e.loadingProjList=!1}))},getProjByDate:function(){var t=this;this.loadingProjList=!0;var e=new URLSearchParams;e.append("page",1),e.append("pageSize",10),e.append("start",this.selDate[0]),e.append("end",this.selDate[1]),this.$axios({method:"post",url:"project/query_date",data:e}).then(function(e){console.log(e.data);var a=e.data.data.list;a.map(function(t){t.createTime=E(new Date(t.createTime),"yyyy.MM.dd")}),a.map(function(e){e.projectState=t.transformProjState(e.projectState)}),console.log(a),t.projList=a,t.loadingProjList=!1})},searchProj:function(){var t=this;this.loadingProjList=!0,this.$axios.get("project/query?page=1&pageSize=10&query="+this.searchTxt).then(function(e){console.log(e.data);var a=e.data.data.list;a.map(function(t){t.createTime=E(new Date(t.createTime),"yyyy.MM.dd")}),a.map(function(e){e.projectState=t.transformProjState(e.projectState)}),console.log(a),t.projList=a,t.loadingProjList=!1})},toAddProj:function(){this.$router.push({path:"/add-project"})},scroll:function(t){var e=document.documentElement.scrollTop||document.body.scrollTop,a=function t(a){e>0&&(e-=a,window.scrollTo(0,e),console.log(e),requestAnimationFrame(function(){t(a)}))};a(t)}},mounted:function(){console.log("mymt"),sessionStorage.isRefresh="false"},activated:function(){console.log("myac"),"true"==sessionStorage.isRefresh&&this.headerKey++,void 0==sessionStorage.indexParam&&(sessionStorage.indexParam=""),""==sessionStorage.indexParam&&this.getProjList("sel"),""!=sessionStorage.indexParam&&(this.selState=sessionStorage.indexParam,this.getProjList("sel"))},deactivated:function(){console.log("deac"),sessionStorage.isRefresh="true",sessionStorage.indexParam=""},destroyed:function(){console.log("dest"),sessionStorage.indexParam=""}},rt=lt,ct=(a("f5e5"),a("d5a2"),Object(p["a"])(rt,Z,Y,!1,null,"6b57b605",null)),dt=ct.exports,ut=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("sv-header"),t.isReady?s("div",{staticClass:"clearfix"},[s("div",{staticClass:"top-wrapper clearfix"},[s("div",{staticClass:"project-detail"},[s("div",{staticClass:"detail-top clearfix"},[s("img",{attrs:{src:a("fd1e"),alt:""}}),s("span",[t._v(t._s(t.projBrief.projectName))])]),s("div",{staticClass:"detail-middle clearfix"},[s("img",{attrs:{src:a("525f"),alt:""}}),s("ul",[s("li",{on:{click:function(e){t.confirm("start")}}},[t._v("项目启动")]),s("li",{on:{click:function(e){t.confirm("close")}}},[t._v("项目关闭")]),s("li",{on:{click:t.toDocList}},[t._v("文档")]),s("li",{on:{click:t.toProjTeam}},[t._v("团队")]),s("li",{on:{click:t.toDaily}},[t._v("日志")]),s("li",{on:{click:t.toProjCost}},[t._v("成本")])])]),s("div",{staticClass:"project-brief clearfix"},[s("span",{staticClass:"director-key"},[t._v("项目总监：")]),s("img",{attrs:{src:a("690a"),alt:""}}),s("span",{staticClass:"director-val"},[t._v(t._s(t.projBrief.projectDirector.userRealname))]),s("span",{staticClass:"create-time-key"},[t._v("创建时间：")]),s("span",{staticClass:"create-time-val"},[t._v(t._s(t.projBrief.createTime))]),s("span",{staticClass:"prog-key"},[t._v("进度：")]),s("el-progress",{staticClass:"prog-bar",attrs:{percentage:t.projProg.process}})],1),t._m(0)]),s("div",{staticClass:"time-axis"},[s("div",{staticClass:"title-time-axis"},[t._v("时间轴")]),s("ul",{staticClass:"axis-icon"},[t.firstData.hasData?s("li",{staticStyle:{color:"#62ca31"}},[s("i",{staticClass:"far fa-circle"})]):t._e(),t._l(t.axis,function(e){return s("div",{key:e.id},[t._m(1,!0),s("li",[s("i",{staticClass:"far fa-circle",style:e.iconColor})])])})],2),s("ul",{staticClass:"axis-text"},[s("li",{staticClass:"firstItem"},[t._v(t._s(t.firstData.time))]),t._l(t.axis,function(e){return s("li",{key:e.id},[t._v(t._s(e.time))])})],2)])]),s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.progLoading,expression:"progLoading"}],staticClass:"project-prog"},[s("div",{staticClass:"title-prog"},[t._v("项目进展")]),t.ongoing?s("div",{staticClass:"top clearfix"},[s("span",[t._v("当前阶段：")]),s("span",{staticClass:"val"},[t._v(t._s(t.projProg.curStage))]),s("span",[t._v("共计阶段：")]),s("span",{staticClass:"val stage-num"},[t._v(t._s(t.projProg.stageTotal))]),s("span",[t._v("阶段开始：")]),s("span",{staticClass:"val"},[t._v("2018-01-16")]),s("span",[t._v("预计结束：")]),s("span",{staticClass:"val"},[t._v("2018-01-18")])]):t._e(),t.ongoing?s("div",{staticClass:"middle"},[t._m(2),s("div",{staticClass:"intro-val"},[t._v(t._s(t.projProg.stageDesc))])]):t._e(),t.ongoing?s("div",{staticClass:"bottom"},[s("div",{staticClass:"clearfix"},[s("span",{staticClass:"doc-submit-key"},[t._v("阶段文档提交：")]),s("span",{staticClass:"doc-submit-val"},[t._v(t._s(t.projProg.stageDocSubmitted+"/"+t.projProg.stageDocTotal))]),s("span",{staticClass:"check-stage-detail-link",on:{click:t.toStateDetail}},[t._v("查看项目阶段详情>>")])])]):t._e(),t.notStarted?s("div",[s("span",{staticClass:"title",staticStyle:{"margin-bottom":"30px"}},[t._v("项目还未启动")])]):t._e(),t.finished?s("div",[s("span",{staticClass:"title",staticStyle:{"margin-bottom":"30px"}},[t._v("项目已结束")])]):t._e(),t.closed?s("div",[s("span",{staticClass:"title",staticStyle:{"margin-bottom":"30px"}},[t._v("项目已关闭")])]):t._e(),t.notOngoing?s("div",[s("span",{staticClass:"title",staticStyle:{"margin-bottom":"30px"}},[t._v("没有正在进行的项目阶段！")])]):t._e()])]):t._e(),s("div",{staticClass:"btn-wrapper clearfix"},[s("el-button",{attrs:{type:"warning",icon:"el-icon-back",circle:""},on:{click:function(e){t.back()}}})],1),s("p",{staticClass:"title-center"},[t._v("项目详细信息")]),s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingDetail,expression:"loadingDetail"}],staticClass:"info-wrapper"},[s("span",{staticClass:"key"},[t._v("项目名称：")]),s("span",{staticClass:"val"},[t._v(t._s(t.projDetail.projName))]),s("span",{staticClass:"key"},[t._v("项目代号：")]),s("span",{staticClass:"val"},[t._v(t._s(t.projDetail.projCode))]),s("span",{staticClass:"key"},[t._v("委托方：")]),s("span",{staticClass:"val"},[t._v(t._s(t.projDetail.client))]),s("span",{staticClass:"key"},[t._v("承接方：")]),s("span",{staticClass:"val"},[t._v(t._s(t.projDetail.contractor))]),s("span",{staticClass:"key"},[t._v("监理部门：")]),s("span",{staticClass:"val"},[t._v(t._s(t.projDetail.dept))]),s("span",{staticClass:"key"},[t._v("合作伙伴：")]),s("span",{staticClass:"val"},[t._v(t._s(t.projDetail.partner))]),s("span",{staticClass:"key"},[t._v("开始时间：")]),s("span",{staticClass:"val"},[t._v(t._s(t.projDetail.startTime))]),s("span",{staticClass:"key"},[t._v("结束时间：")]),s("span",{staticClass:"val"},[t._v(t._s(t.projDetail.finishTime))]),s("span",{staticClass:"key"},[t._v("项目总监：")]),s("span",{staticClass:"val"},[t._v(t._s(t.projDetail.director))]),s("span",{staticClass:"key"},[t._v("总监代表：")]),s("span",{staticClass:"val"},[t._v(t._s(t.projDetail.delegate))]),s("span",{staticClass:"key"},[t._v("项目类型：")]),s("span",{staticClass:"val"},[t._v(t._s(t.projDetail.projType))])]),s("p",{staticClass:"title"},[t._v("项目介绍：")]),s("p",{staticClass:"box-desc"},[t._v("\n        "+t._s(t.projDetail.desc)+"\n    ")]),s("sv-footer")],1)},pt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"project-intro"},[s("div",[s("div",{staticClass:"clearfix"},[s("img",{attrs:{src:a("c940"),alt:""}}),s("span",{staticClass:"intro-key"},[t._v("项目介绍：")])]),s("div",{staticClass:"intro-val"},[t._v("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean euismod bibendum laoreet. Proin gravida dolor sit amet lacus accumsan et viverra justo commodo. Proin sodales pulvinar sic tempor. Sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nam fermentum, nulla luctus pharetra vulputate, felis tellus mollis orci, sed rhoncus pronin sapien nunc accuan eget.\n                        ")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",[s("img",{attrs:{src:a("dd36"),alt:""}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"clearfix"},[s("img",{attrs:{src:a("c940"),alt:""}}),s("span",{staticClass:"intro-key"},[t._v("阶段介绍：")])])}],mt={name:"ProjectDetail",components:{SvHeader:S,SvPlaceholder:tt,SvFooter:it},data:function(){return{isReady:!1,loading:!0,progLoading:!1,projectId:this.$route.params.projectId,firstData:{hasData:!0,time:"项目立项 2015-09-01"},projBrief:"",projProg:{curStage:"暂无数据",stageTotal:"暂无数据",stageDesc:"暂无数据",stageDocSubmitted:"",stageDocTotal:""},notStarted:!1,ongoing:!1,finished:!1,closed:!1,notOngoing:!1,axis:[{iconColor:{color:"#62ca31"},time:"项目启动 2015-09-01"},{iconColor:{color:"red"},time:"第1阶段 2018-01-15"},{iconColor:{color:"blue"},time:"第2阶段 2018-01-15"}],projDetail:{},loadingDetail:!1}},methods:{getProjBrief:function(){return this.$axios({method:"get",url:f.svUrl+"project/detail",params:{projectId:sessionStorage.projectId}})},getProjProg:function(){return this.$axios({method:"get",url:f.svUrl+"project/process_current_detail",params:{projectId:sessionStorage.projectId}})},handleProgData:function(t){"Project Is Not Started!"==t?this.notStarted=!0:"Project Is Finished!"==t?this.finished=!0:"Project Is Closed!"==t?this.closed=!0:"没有正在进行的项目阶段！"==t?this.notOngoing=!0:(this.projProg.process=t.process,this.projProg.curStage="第"+t.currentMoment.momentOrder+"阶段",this.projProg.stageTotal=t.momentsSize,this.projProg.stageDesc=t.currentMoment.momentDesc,this.projProg.stageDocSubmitted=t.currentMoment.uploadedFileNumber,this.projProg.stageDocTotal=t.currentMoment.fileNumber,this.ongoing=!0)},confirm:function(t){var e=this;"start"==t?this.$confirm("确定启动项目吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",callback:function(t){"confirm"==t?e.startProj():e.$message("取消操作")}}):this.$confirm("确定关闭项目吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",callback:function(t){"confirm"==t?e.closeProj():e.$message("取消操作")}})},startProj:function(){var t=this,e=new URLSearchParams;e.append("projectId",sessionStorage.projectId),this.$axios({method:"post",url:f.svUrl+"project/start",data:e}).then(function(e){if(f.checkError(t,e.data)){var a=e.data.data;"success"==a&&(t.$message({message:"项目成功启动！",type:"success"}),t.updateProg())}}).catch(function(e){t.$message.error(e)})},closeProj:function(){var t=this,e=new URLSearchParams;e.append("projectId",sessionStorage.projectId),this.$axios({method:"post",url:f.svUrl+"/project/close",data:e}).then(function(e){if(f.checkError(t,e.data)){var a=e.data.data;"success"==a&&(t.$message({message:"项目成功关闭！",type:"success"}),t.updateProg())}}).catch(function(e){t.$message.error(e)})},updateProg:function(){var t=this;this.progLoading=!0,this.getProjProg().then(function(e){var a=e.data,s=(a.msg,a.data);t.notStarted=!1,t.ongoing=!1,t.finished=!1,t.closed=!1,t.notOngoing=!1,t.handleProgData(s),t.progLoading=!1})},toDocList:function(){this.$router.push("document-list")},toProjTeam:function(){this.$router.push("project-team")},toDaily:function(){this.$router.push("daily")},toProjCost:function(){this.$router.push("pro-cost")},toStateDetail:function(){this.$router.push("/state-detail")},transformProjType:function(t){switch(t){case 0:return"软件类";case 1:return"集成工程类";case 2:return"其他"}},getProjDetail:function(){var t=this;this.loadingDetail=!0,this.$axios.get("project/detail?projectId="+sessionStorage.projectId).then(function(e){console.log(e.data);var a=e.data.data;t.projDetail.projName=a.projectName,t.projDetail.projCode=a.projectCode,t.projDetail.dept=a.department.department,t.projDetail.partner=a.partner,t.projDetail.startTime=null==a.startTime?"暂无数据":E(new Date(a.startTime),"yyyy.MM.dd"),t.projDetail.finishTime=null==a.finishTime?"暂无数据":E(new Date(a.finishTime),"yyyy.MM.dd"),t.projDetail.director=a.projectDirector.userRealname,t.projDetail.delegate=a.delegate.userRealname,t.projDetail.desc=a.projectDesc,t.projDetail.projType=t.transformProjType(a.projectType),t.projDetail.client=a.client,t.projDetail.contractor=a.contractor,t.loadingDetail=!1})},back:function(){this.$router.back()}},mounted:function(){this.getProjDetail()}},ft=mt,ht=(a("3b27"),Object(p["a"])(ft,ut,pt,!1,null,"3ac7e78c",null)),vt=ht.exports,gt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("sv-header"),s("div",{staticClass:"title-wrapper clearfix"},[s("el-button",{attrs:{type:"warning",icon:"el-icon-back",circle:""},on:{click:function(e){t.back()}}}),s("span",{staticClass:"title add_btFont"},[t._v(t._s(t.projName)+"项目的团队成员")])],1),s("el-button",{staticClass:"add-btn add_Font14",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){t.getOrg()}}},[t._v("添加成员")]),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTeamTable,expression:"loadingTeamTable"}],staticClass:"team-member-table",attrs:{data:t.teamMembers,border:""}},[s("el-table-column",{attrs:{label:"姓名",width:"375",align:"center",resizable:t.resizable},scopedSlots:t._u([{key:"default",fn:function(e){return[s("img",{staticClass:"avatar",attrs:{src:a("690a"),alt:""}}),s("span",{staticClass:"name-val add_Font14",staticStyle:{"margin-top":"10px"}},[t._v(t._s(e.row.name))])]}}])}),s("el-table-column",{attrs:{label:"职位",width:"375",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"post-val add_Font14"},[t._v(t._s(e.row.post))])]}}])}),s("el-table-column",{attrs:{label:"操作",width:"450",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-popover",{ref:"popref"+e.$index,attrs:{placement:"top",trigger:"click",content:"这是一段内容,这是一段内容,这是一段内容,这是一段内容。"}},[s("p",{staticClass:"add_Font14"},[t._v("部门："+t._s(t.userDetail.departmentName))]),s("p",{staticClass:"add_Font14"},[t._v("手机："+t._s(t.userDetail.mobile))])]),s("div",{staticClass:"btn-wrapper"},[s("el-button",{directives:[{name:"popover",rawName:"v-popover",value:"popref"+e.$index,expression:"'popref'+scope.$index"}],staticClass:"add_Font13",attrs:{type:"primary",icon:"el-icon-search",size:"medium"},on:{click:function(a){t.getUserDetail(e.row.id)}}},[t._v("查看详情")]),e.row.modifiable?s("el-button",{staticClass:"add_Font13",attrs:{type:"warning",icon:"el-icon-edit",size:"medium"},on:{click:function(a){t.getUsersToChange(e.row.ops)}}},[t._v("修改")]):t._e(),e.row.removable?s("el-button",{staticClass:"add_Font13",attrs:{type:"danger",icon:"el-icon-remove-outline",size:"medium"},on:{click:function(a){t.confirm(e.row.id,"remove")}}},[t._v("移出")]):t._e()],1)]}}])})],1),s("el-dialog",{staticStyle:{"text-align":"center"},attrs:{title:"请选择要添加的成员",visible:t.dialogVisible.member,width:"50%"},on:{"update:visible":function(e){t.$set(t.dialogVisible,"member",e)},closed:t.clearCurUserId}},[s("div",{staticClass:"clearfix"},[s("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingOrg,expression:"loadingOrg"}],staticClass:"org add_org",attrs:{data:t.org,props:t.defaultProps,"node-key":"key","default-expanded-keys":[1]},on:{"node-click":t.getUser}}),s("div",{staticClass:"wrapper-usedr-table"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingUserTable,expression:"loadingUserTable"}],key:"user",staticClass:"user-table",attrs:{data:t.user,border:""}},[s("el-table-column",{attrs:{label:"工号",align:"center",prop:"workCode",resizable:!1}}),s("el-table-column",{attrs:{label:"姓名",align:"center",prop:"userName",resizable:!1}}),s("el-table-column",{attrs:{label:"部门",align:"center",prop:"deptDesc",resizable:!1}}),s("el-table-column",{attrs:{label:"职位",align:"center",prop:"roleDesc",resizable:!1}})],1)],1)],1),s("p",[t._v(t._s(t.selUserTips))]),s("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary"},on:{click:function(e){t.confirm(t.curUserId,"add")}}},[t._v(t._s(t.opsBtn))])],1),s("el-dialog",{staticStyle:{"text-align":"center"},attrs:{title:t.opsTitle,visible:t.dialogVisible.manager,width:"50%"},on:{"update:visible":function(e){t.$set(t.dialogVisible,"manager",e)},closed:t.clearCurUserId}},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.users,"highlight-current-row":""},on:{"current-change":t.setCurUserId}},[s("el-table-column",{attrs:{width:"50",align:"right",prop:""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.check?s("i",{staticClass:"el-icon-check"}):t._e()]}}])}),s("el-table-column",{attrs:{label:"姓名",align:"center",prop:"userRealname"}}),s("el-table-column",{attrs:{label:"工号",align:"center",prop:"workCode"}})],1),s("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary"},on:{click:function(e){t.confirm(t.curUserId,t.opsConfirm)}}},[t._v(t._s(t.opsBtn))])],1),s("sv-footer")],1)},bt=[],Ct=(a("ac6a"),{name:"ProjectTeam",components:{SvHeader:S,SvPlaceholder:tt,SvFooter:it},data:function(){return{loadingTeamTable:!1,loading:!0,resizable:!1,dialogVisible:{member:!1,manager:!1},projName:sessionStorage.projectName,isManager:!1,teamMembers:[],org:[{l:"恒普科技",c:[],key:1}],defaultProps:{children:"c",label:"l"},loadingOrg:!1,loadingUserTable:!1,user:[],selUserTips:"未选择",opsTitle:"",opsBtn:"添加",opsConfirm:"",userDetail:"",users:[],showUsers:!1,curPage:1,itemTotal:0,pageSize:5,curUserId:"",loadingData:{dept:"加载中，请稍候...",mobile:"加载中，请稍候..."}}},methods:{checkRole:function(){var t=this;this.$axios.get("user/getUserOfPermissionOfThree").then(function(e){console.log(e.data);var a=e.data.data;a.forEach(function(e){"团队成员踢除"==e.permissionDesc?t.teamMembers.forEach(function(t){"监理工程师"==t.post&&(t.removable=!0)}):"更改总监代表"==e.permissionDesc?t.teamMembers.forEach(function(t){"总监代表"==t.post&&(t.modifiable=!0)}):"更改项目总监"==e.permissionDesc&&t.teamMembers.forEach(function(t){"项目总监"==t.post&&(t.modifiable=!0)})})})},getTeamMembers:function(){var t=this;this.teamMembers=[],this.loadingTeamTable=!0,this.$axios.get("project/team?projectId="+sessionStorage.projectId).then(function(e){if(f.checkError(t,e.data)){var a=e.data.data,s=a.Delegate,o=a.Members,n=a.ProjectManager;if(console.log(e.data),void 0!=n.id&&t.teamMembers.push({id:n.id,name:n.userRealname,post:"项目总监",modifiable:!1,removable:!1,ops:"modifyDirector"}),void 0!=s.id&&t.teamMembers.push({id:s.id,name:s.userRealname,post:"总监代表",modifiable:!1,removable:!1,ops:"modifyDelegate"}),void 0!=o[0])for(var i in o)t.teamMembers.push({id:o[i].id,name:o[i].userRealname,post:"监理工程师",modifiable:!1,removable:!1});t.checkRole(),t.loadingTeamTable=!1}})},getUserDetail:function(t){var e=this;this.userDetail=this.loadingData,this.$axios.get("project/team_user?userId="+t).then(function(t){if(f.checkError(e,t.data)){console.log(t.data);var a=t.data.data;e.userDetail=a}})},getOrg:function(){var t=this;this.dialogVisible.member=!0,this.loadingOrg=!0,this.org=[{l:"恒普科技",c:[],key:1}],this.user=[],this.selUserTips="未选择",this.$axios.get("user/getOrganization").then(function(e){console.log(e.data);var a=e.data.data,s=[];a.forEach(function(e){void 0!=e.userInfo?t.org[0].c.push({l:e.deptDesc,c:e.userInfo.map(function(t){return{l:t.userName,workCode:t.workCode}})}):s.push({l:e.company.department,branchId:e.company.id})}),t.org[0].c.push({l:"分公司",c:s}),t.loadingOrg=!1})},getUser:function(t){var e=this;console.log(t.workCode),void 0!=t.workCode&&(this.loadingUserTable=!0,this.$axios.get("user/checkUserInfoByWorkCode?workCode="+t.workCode).then(function(t){console.log(t.data);var a=t.data.data;e.user=[],e.user.push(a),e.loadingUserTable=!1,e.selUserTips="当前已选择员工：  姓名："+a.userName+"  工号："+a.workCode,e.curUserId=a.id}))},getUsersToChange:function(t){var e=this;"modifyDelegate"==t?(this.opsTitle="请选择要任命为总监代表的人员",this.opsConfirm="modifyDelegate",this.opsBtn="任命",this.showUsers=!1,this.dialogVisible.manager=!0,this.loading=!0,this.$axios.get("project/delegates").then(function(t){if(f.checkError(e,t.data)){var a=t.data.data;e.users=a,console.log(t.data),e.loading=!1}})):(this.opsTitle="请选择要任命为项目总监的人员",this.opsConfirm="modifyDirector",this.opsBtn="任命",this.showUsers=!1,this.dialogVisible.manager=!0,this.loading=!0,this.$axios.get("project/directors").then(function(t){if(f.checkError(e,t.data)){var a=t.data.data;e.users=a,console.log(t.data),e.loading=!1}}))},setCurUserId:function(t,e){null!=e&&(e.check=!1),null!=t&&(t.check=!0),this.curUserId=t.id,console.log(this.curUserId)},clearCurUserId:function(){this.curUserId=""},checkSel:function(t){if(""!==this.curUserId)return!0;"add"==t?this.$confirm("请选择要添加的成员！","提示",{confirmButtonText:"确定"}):"modifyDelegate"==t?this.$confirm("请选择要任命为总监代表的人员！","提示",{confirmButtonText:"确定"}):this.$confirm("请选择要任命为项目总监的人员！","提示",{confirmButtonText:"确定"})},confirm:function(t,e){var a=this;"remove"==e?this.$confirm("确定移出此成员吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",callback:function(e){"confirm"==e?a.delProjMember(t):a.$message({type:"info",message:"取消操作。"})}}):"add"==e?this.checkSel(e)&&this.$confirm("确定添加此员工为新成员吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",callback:function(e){"confirm"==e?a.addProjMember(t):a.$message({type:"info",message:"取消操作。"})}}):"modifyDelegate"==e?this.checkSel(e)&&this.$confirm("确定修改总监代表吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",callback:function(e){"confirm"==e&&a.modifyDelegate(t)}}):this.checkSel(e)&&this.$confirm("确定修改项目总监吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",callback:function(e){"confirm"==e&&a.modifyDirector(t)}})},addProjMember:function(t){var e=this;console.log(t);var a=new URLSearchParams;a.append("projectId",sessionStorage.projectId),a.append("userId",t),this.$axios({method:"post",url:"project/team_join",data:a}).then(function(t){f.checkError(e,t.data)&&"success"==t.data.msg&&(e.$message({message:"添加成员成功！",type:"success"}),e.dialogVisible={member:!1,manager:!1},e.getTeamMembers())})},delProjMember:function(t){var e=this,a=new URLSearchParams;a.append("projectId",sessionStorage.projectId),a.append("userId",t),this.$axios({method:"post",url:"project/team_quit",data:a}).then(function(t){f.checkError(e,t.data)&&(console.log(t.data),e.$message({message:"移出项目成员成功！",type:"success"}),e.dialogVisible={member:!1,manager:!1},e.getTeamMembers())})},modifyDelegate:function(t){var e=this,a=new URLSearchParams;a.append("projectId",sessionStorage.projectId),a.append("userId",t),this.$axios({method:"post",url:"project/team_delegate_change",data:a}).then(function(t){f.checkError(e,t.data)&&(e.$message({message:"修改总监代表成功！",type:"success"}),e.dialogVisible={member:!1,manager:!1},e.getTeamMembers())})},modifyDirector:function(t){var e=this,a=new URLSearchParams;a.append("projectId",sessionStorage.projectId),a.append("userId",t),this.$axios({method:"post",url:"project/team_director_change",data:a}).then(function(t){f.checkError(e,t.data)&&(e.$message({message:"修改项目总监成功！",type:"success"}),e.dialogVisible={member:!1,manager:!1},e.getTeamMembers())})},back:function(){this.$router.back()}},mounted:function(){this.getTeamMembers()}}),yt=Ct,_t=(a("7de5"),Object(p["a"])(yt,gt,bt,!1,null,"939da8b6",null)),wt=_t.exports,kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("sv-header",{attrs:{menuIndex:"4"}}),t._m(0),t.showInfo?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"info-wrapper clearfix"},[a("div",{staticClass:"add_infoLeft clearfix"},[a("div",{staticClass:"add_infoDiv clearfix"},[a("span",{staticClass:"key add_Font14"},[t._v("姓名：")]),a("span",{staticClass:"val add_Font14"},[t._v(t._s(t.personInfo.name))])]),a("div",{staticClass:"add_infoDiv clearfix"},[a("span",{staticClass:"key add_Font14"},[t._v("工号：")]),a("span",{staticClass:"val add_Font14"},[t._v(t._s(t.personInfo.workCode))])]),a("div",{staticClass:"add_infoDiv clearfix"},[a("span",{staticClass:"key add_Font14"},[t._v("部门：")]),a("span",{staticClass:"val add_Font14"},[t._v(t._s(t.personInfo.dept))])]),a("div",{staticClass:"add_infoDiv clearfix"},[a("span",{staticClass:"key add_Font14"},[t._v("手机：")]),a("span",{staticClass:"val add_Font14"},[t._v(t._s(t.personInfo.mobile))])]),a("div",{staticClass:"add_infoDiv clearfix"},[a("span",{staticClass:"key add_Font14"},[t._v("紧急联系人姓名：")]),a("span",{staticClass:"val add_Font14"},[t._v(t._s(t.personInfo.iceName))])])]),a("div",{staticClass:"add_infoRight"},[a("div",{staticClass:"add_infoDiv clearfix"},[a("span",{staticClass:"key add_Font14"},[t._v("年龄：")]),a("span",{staticClass:"val add_Font14"},[t._v(t._s(t.personInfo.age))])]),a("div",{staticClass:"add_infoDiv clearfix"},[a("span",{staticClass:"key add_Font14"},[t._v("性别：")]),a("span",{staticClass:"val add_Font14"},[t._v(t._s(t.personInfo.gender))])]),a("div",{staticClass:"add_infoDiv clearfix"},[a("span",{staticClass:"key add_Font14"},[t._v("邮箱：")]),a("span",{staticClass:"val add_Font14"},[t._v(t._s(t.personInfo.email))])]),a("div",{staticClass:"add_infoDiv clearfix"},[a("span",{staticClass:"key add_Font14"},[t._v("紧急联系人电话：")]),a("span",{staticClass:"val add_Font14"},[t._v(t._s(t.personInfo.icePhone))])])])]):t._e(),a("div",{staticClass:"add_infoBtn"},[a("button",{staticClass:"btn",on:{click:function(e){t.showChangePwd=!0}}},[t._v("修改密码")]),a("button",{staticClass:"btn",on:{click:t.fillOriginalData}},[t._v("修改个人信息")])]),a("el-dialog",{attrs:{title:"修改密码",visible:t.showChangePwd,width:"30%"},on:{"update:visible":function(e){t.showChangePwd=e}}},[a("span",{staticClass:"key-pwd"},[t._v("新密码")]),a("el-input",{attrs:{type:"password",placeholder:"请输入新密码"},model:{value:t.newPwd,callback:function(e){t.newPwd=e},expression:"newPwd"}}),a("el-button",{staticClass:"submit-btn",attrs:{type:"primary",size:"medium"},on:{click:t.changePwd}},[t._v("确认修改")])],1),a("el-dialog",{staticClass:"dialog",attrs:{title:"修改个人信息",visible:t.showChangeInfo,width:"30%"},on:{"update:visible":function(e){t.showChangeInfo=e}}},[a("span",{staticClass:"key"},[t._v("手机")]),a("span",{staticClass:"tip-check"},[t._v(t._s(t.tips.mobile))]),a("el-input",{model:{value:t.newInfo.mobile,callback:function(e){t.$set(t.newInfo,"mobile",e)},expression:"newInfo.mobile"}}),a("span",{staticClass:"key"},[t._v("年龄")]),a("span",{staticClass:"tip-check"},[t._v(t._s(t.tips.age))]),a("el-input",{model:{value:t.newInfo.age,callback:function(e){t.$set(t.newInfo,"age",e)},expression:"newInfo.age"}}),a("span",{staticClass:"key"},[t._v("邮箱")]),a("span",{staticClass:"tip-check"},[t._v(t._s(t.tips.email))]),a("el-input",{model:{value:t.newInfo.email,callback:function(e){t.$set(t.newInfo,"email",e)},expression:"newInfo.email"}}),a("span",{staticClass:"key"},[t._v("紧急联系人姓名")]),a("span",{staticClass:"tip-check"},[t._v(t._s(t.tips.ICEName))]),a("el-input",{model:{value:t.newInfo.ICEName,callback:function(e){t.$set(t.newInfo,"ICEName",e)},expression:"newInfo.ICEName"}}),a("span",{staticClass:"key"},[t._v("紧急联系人电话")]),a("span",{staticClass:"tip-check"},[t._v(t._s(t.tips.ICEPhone))]),a("el-input",{model:{value:t.newInfo.ICEPhone,callback:function(e){t.$set(t.newInfo,"ICEPhone",e)},expression:"newInfo.ICEPhone"}}),a("button",{staticClass:"submit-btn",on:{click:t.checkInput}},[t._v("保存")])],1)],1)},Dt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add_infoTitle"},[a("i",{staticClass:"el-icon-success top_i_css"}),a("span",{staticClass:"title add_btFont"},[t._v("个人信息")]),a("div",{staticClass:"xuxian",attrs:{"data-v-20400949":""}})])}],xt={mobile:"手机号不能为空",age:"年龄不能为空",email:"邮箱不能为空",ICEName:"紧急联系人姓名不能为空",ICEPhone:"紧急联系人电话不能为空"},St={mobile:function(t,e){return!!/^1\d{10}/.test(e)||(t.tips.mobile="手机号格式不正确",!1)},age:function(t,e){return!!/^\d{2,3}$/.test(e)||(t.tips.age="年龄格式不正确",!1)},email:function(t,e){var a=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;return!!a.test(e)||(t.tips.email="邮箱格式不正确",!1)},ICEName:function(){return!0},ICEPhone:function(t,e){return!!/^1\d{10}/.test(e)||(t.tips.ICEPhone="紧急联系人电话格式不正确",!1)}},jt={components:{SvHeader:S},data:function(){return{showChangePwd:!1,showChangeInfo:!1,showInfo:!1,loading:!1,personInfo:"",newPwd:"",tips:{mobile:"",age:"",email:"",ICEName:"",ICEPhone:""},newInfo:{mobile:"",age:"",email:"",ICEName:"",ICEPhone:""}}},methods:{getPersonInfo:function(){var t=this;this.showInfo=!0,this.loading=!0;var e=new URLSearchParams;e.append("workCode",sessionStorage.workcode),console.log(sessionStorage.workcode),this.$axios({method:"post",url:"user/getUserInfoByWorkCode",data:e}).then(function(e){if(f.checkError(t,e.data)){var a=e.data.data;console.log(e.data),t.personInfo=a,t.loading=!1}})},changePwd:function(){var t=this;if(""==this.newPwd)this.$confirm("新密码不能为空","提示");else{var e=new URLSearchParams;e.append("workCode",f.workCode),e.append("password",this.newPwd),this.$axios({method:"post",url:"/user/modifyPassword",data:e}).then(function(e){f.checkError(t,e.data)&&"success"==e.data.msg&&(t.$message({message:"修改密码成功！",type:"success"}),t.showChangePwd=!1)})}},fillOriginalData:function(){this.newInfo.mobile=this.personInfo.mobile,this.newInfo.age=this.personInfo.age,this.newInfo.email=this.personInfo.email,this.newInfo.ICEName=this.personInfo.iceName,this.newInfo.ICEPhone=this.personInfo.icePhone,this.showChangeInfo=!0},checkInput:function(){var t={mobile:!1,age:!1,email:!1,ICEName:!1,ICEPhone:!1},e=!0;for(var a in this.tips)""==this.newInfo[a]?this.tips[a]=xt[a]:(this.tips[a]="",t[a]=St[a](this,this.newInfo[a]));for(var s in t)console.log(t[s]);for(var o in t)if(!t[o]){e=!1;break}console.log("allready"+e),e&&this.changeInfo()},changeInfo:function(){var t=this;console.log("save");var e=new URLSearchParams;e.append("workCode",sessionStorage.workcode),e.append("mobile",this.newInfo.mobile),e.append("age",this.newInfo.age),e.append("email",this.newInfo.email),e.append("iceName",this.newInfo.ICEName),e.append("icePhone",this.newInfo.ICEPhone),this.$axios.post("user/updataUserInfo",e).then(function(e){f.checkError(t,e.data)&&(t.$message({message:"修改个人信息成功！",type:"success"}),t.showChangeInfo=!1,t.getPersonInfo())})}},mounted:function(){""==sessionStorage.workCode?this.$message({duration:1e3,message:"请先登录！"}):this.getPersonInfo()}},$t=jt,Tt=(a("bfb8"),a("bc56"),Object(p["a"])($t,kt,Dt,!1,null,"37d67045",null)),At=Tt.exports,It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("sv-header",{attrs:{menuIndex:"3.3.1"}}),a("span",{staticClass:"title"},[t._v("新增部门")]),a("div",{staticClass:"input-wrapper clearfix"},[a("el-input",{staticClass:"input",attrs:{size:"small",placeholder:"请输入部门名字"},model:{value:t.newDept,callback:function(e){t.newDept=e},expression:"newDept"}}),a("el-button",{staticClass:"submit-btn",on:{click:t.checkInput}},[t._v("新增部门")])],1),a("sv-placeholder",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]}),a("sv-footer")],1)},Pt=[],Bt={name:"addDept",components:{SvHeader:S,SvPlaceholder:tt,SvFooter:it},data:function(){return{newDept:"",loading:!1}},methods:{confirm:function(){var t=this;this.$confirm("确定新增部门吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",callback:function(e){"confirm"==e?t.addDept(t.newDept):t.$message({type:"info",message:"取消操作。"})}})},checkInput:function(){""==this.newDept?this.$confirm("新部门名不能为空","提示",{confirmButtonText:"确定"}):this.confirm()},addDept:function(t){var e=this,a=new URLSearchParams;a.append("department",t),this.loading=!0,this.$axios({method:"post",url:"user/addDepartment",data:a}).then(function(t){f.checkError(e,t.data)&&(e.$message({type:"success",message:"新增部门成功！"}),e.loading=!1,e.dialogVisible=!1)}).catch(function(t){e.$message({type:"info",message:"新增部门失败！"})})}}},Nt=Bt,Lt=(a("c334"),Object(p["a"])(Nt,It,Pt,!1,null,"5917d6d8",null)),Rt=Lt.exports,Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("sv-header",{attrs:{menuIndex:"3.1"}}),a("span",{staticClass:"title add_btFont"},[t._v("账号分配")]),a("span",{staticClass:"tip add_Font14"},[t._v("若批量分配账号，请选择账号分配表excel文件")]),a("input",{staticClass:"input-file",attrs:{id:"file",type:"file"},on:{change:function(e){t.upload(e)}}}),a("label",{staticClass:"upload-btn",attrs:{for:"file"}},[t._v("选择")]),a("span",{staticClass:"msg"},[t._v(t._s(t.msg))]),a("button",{staticClass:"submit-btn",staticStyle:{"margin-left":"10px"},on:{click:function(e){t.checkOps("many")}}},[t._v("批量分配账号")]),a("button",{staticClass:"submit-btn",on:{click:function(e){t.dialogVisible=!0}}},[t._v("分配单个账号")]),t.hasData?a("el-table",{staticClass:"acct-table",attrs:{data:t.accounts,border:""}},[a("el-table-column",{attrs:{label:"姓名",width:"100",prop:"name",align:"center",resizable:t.resizable}}),a("el-table-column",{attrs:{label:"工号",width:"100",prop:"workCode",align:"center",resizable:t.resizable}}),a("el-table-column",{attrs:{label:"部门",width:"100",prop:"dept",align:"center",resizable:t.resizable}}),a("el-table-column",{attrs:{label:"手机",width:"160",prop:"mobile",align:"center",resizable:t.resizable}}),a("el-table-column",{attrs:{label:"密码",width:"120",prop:"pwd",align:"center",resizable:t.resizable}}),a("el-table-column",{attrs:{label:"年龄",width:"60",prop:"age",align:"center",resizable:t.resizable}}),a("el-table-column",{attrs:{label:"性别",width:"60",prop:"gender",align:"center",resizable:t.resizable}}),a("el-table-column",{attrs:{label:"邮箱",width:"220",prop:"email",align:"center",resizable:t.resizable}}),a("el-table-column",{attrs:{label:"紧急联系人姓名",prop:"ICEName",align:"center",resizable:t.resizable}}),a("el-table-column",{attrs:{label:"紧急联系人电话",width:"",prop:"ICEPhone",align:"center",resizable:t.resizable}})],1):t._e(),t.showPh?a("sv-placeholder"):t._e(),a("sv-footer"),a("el-dialog",{staticClass:"dialog",attrs:{title:"请输入账号信息",visible:t.dialogVisible,width:"55%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",{staticClass:"key"},[t._v("姓名:")]),a("span",{staticClass:"tip-check"},[t._v(t._s(t.tips.name))]),a("el-input",{staticClass:"add_el_input",model:{value:t.input.name,callback:function(e){t.$set(t.input,"name",e)},expression:"input.name"}}),a("span",{staticClass:"key mal15"},[t._v("工号:")]),a("span",{staticClass:"tip-check"},[t._v(t._s(t.tips.workCode))]),a("el-input",{staticClass:"add_el_input",model:{value:t.input.workCode,callback:function(e){t.$set(t.input,"workCode",e)},expression:"input.workCode"}}),a("span",{staticClass:"key"},[t._v("部门:")]),a("span",{staticClass:"tip-check"},[t._v(t._s(t.tips.dept))]),a("el-select",{staticClass:"add_select",attrs:{loading:t.loadingDepts,placeholder:"请选择部门"},on:{focus:t.getAllDepts},model:{value:t.input.dept,callback:function(e){t.$set(t.input,"dept",e)},expression:"input.dept"}},t._l(t.depts,function(t){return a("el-option",{key:t.id,attrs:{label:t.department,value:t.department}})}),1),a("span",{staticClass:"key mal15"},[t._v("手机:")]),a("span",{staticClass:"tip-check"},[t._v(t._s(t.tips.mobile))]),a("el-input",{staticClass:"add_el_input",model:{value:t.input.mobile,callback:function(e){t.$set(t.input,"mobile",e)},expression:"input.mobile"}}),a("span",{staticClass:"key"},[t._v("密码:")]),a("span",{staticClass:"tip-check"},[t._v(t._s(t.tips.pwd))]),a("el-input",{staticClass:"add_el_input",attrs:{type:"password"},model:{value:t.input.pwd,callback:function(e){t.$set(t.input,"pwd",e)},expression:"input.pwd"}}),a("span",{staticClass:"key mal15"},[t._v("年龄:")]),a("span",{staticClass:"tip-check"},[t._v(t._s(t.tips.age))]),a("el-input",{staticClass:"add_el_input",model:{value:t.input.age,callback:function(e){t.$set(t.input,"age",e)},expression:"input.age"}}),a("span",{staticClass:"key"},[t._v("邮箱:")]),a("span",{staticClass:"tip-check"},[t._v(t._s(t.tips.email))]),a("el-input",{staticClass:"add_el_input",model:{value:t.input.email,callback:function(e){t.$set(t.input,"email",e)},expression:"input.email"}}),a("span",{staticClass:"key mal15"},[t._v("性别:")]),a("div",{staticClass:"wrapper-radio"},[a("el-radio",{attrs:{label:"男"},model:{value:t.input.gender,callback:function(e){t.$set(t.input,"gender",e)},expression:"input.gender"}},[t._v("男")]),a("el-radio",{attrs:{label:"女"},model:{value:t.input.gender,callback:function(e){t.$set(t.input,"gender",e)},expression:"input.gender"}},[t._v("女")])],1),a("span",{staticClass:"key"},[t._v("紧急联系人姓名:")]),a("span",{staticClass:"tip-check"},[t._v(t._s(t.tips.ICEName))]),a("el-input",{staticClass:"width33",model:{value:t.input.ICEName,callback:function(e){t.$set(t.input,"ICEName",e)},expression:"input.ICEName"}}),a("span",{staticClass:"key mal15"},[t._v("紧急联系人电话:")]),a("span",{staticClass:"tip-check"},[t._v(t._s(t.tips.ICEPhone))]),a("el-input",{staticClass:"width33",model:{value:t.input.ICEPhone,callback:function(e){t.$set(t.input,"ICEPhone",e)},expression:"input.ICEPhone"}}),a("button",{staticClass:"submit-btn",on:{click:function(e){t.checkOps("one")}}},[t._v("分配账号")])],1)],1)},Ut=[],Et=(a("7f7f"),{name:"姓名不能为空",workCode:"工号不能为空",dept:"部门不能为空",mobile:"手机号不能为空",pwd:"密码不能为空",age:"年龄不能为空",email:"邮箱不能为空",ICEName:"紧急联系人姓名不能为空",ICEPhone:"紧急联系人电话不能为空"}),Ft={name:function(){return!0},workCode:function(){return!0},dept:function(){return!0},mobile:function(t,e){return!!/^1\d{10}/.test(e)||(t.tips.mobile="手机号格式不正确",!1)},pwd:function(){return!0},age:function(t,e){return!!/^\d{2,3}$/.test(e)||(t.tips.age="年龄格式不正确",!1)},gender:function(){return!0},email:function(t,e){var a=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;return!!a.test(e)||(t.tips.email="邮箱格式不正确",!1)},ICEName:function(){return!0},ICEPhone:function(t,e){return!!/^1\d{10}/.test(e)||(t.tips.ICEPhone="紧急联系人电话格式不正确",!1)}},Mt={name:"AccountAssign",components:{SvHeader:S,SvPlaceholder:tt,SvFooter:it},data:function(){return{resizable:!1,msg:"未选择文件",accounts:"",hasData:!1,showPh:!0,dialogVisible:!1,input:{name:"",workCode:"",dept:"",mobile:"",pwd:"",age:"",gender:"男",email:"",ICEName:"",ICEPhone:""},loadingDepts:!1,depts:[],tips:{name:"",workCode:"",dept:"",mobile:"",pwd:"",age:"",gender:"",email:"",ICEName:"",ICEPhone:""}}},methods:{upload:function(t){var e=this,a=t.currentTarget.files[0],s=new FileReader,o="",n=t.currentTarget;s.onload=function(){o=XLSX.read(s.result,{type:"binary"}),e.setState(n,a.name),e.genData(o)},s.readAsBinaryString(a)},setState:function(t,e){console.log(e),this.msg=e+" 已读取完毕",t.value=""},genData:function(t){var e=XLSX.utils.sheet_to_json(t.Sheets.Sheet1);if(void 0!=e[0]){var a=[];for(var s in e)a.push({name:e[s].姓名,workCode:e[s].工号,dept:e[s].部门,mobile:e[s].手机,pwd:e[s].密码,age:e[s].年龄,gender:e[s].性别,email:e[s].邮箱,ICEName:e[s].紧急联系人姓名,ICEPhone:e[s].紧急联系人电话});this.accounts=a,this.hasData=!0,this.showPh=!1}},checkData:function(){return""!=this.accounts||(this.$confirm("表格数据不存在,请先选择分配表文件","提示",{confirmButtonText:"确定"}),!1)},checkOps:function(t){"many"==t&&this.checkData()?this.confirm(t):"one"==t&&this.checkInput()&&this.confirm(t)},getAllDepts:function(){var t=this;this.loadingDepts=!0,this.$axios.post("user/getAllDepartment").then(function(e){var a=e.data.data;t.depts=a,t.loadingDepts=!1})},checkInput:function(){var t={name:!1,workCode:!1,dept:!1,mobile:!1,pwd:!1,age:!1,gender:!1,ICEName:!1,ICEPhone:!1},e=!0;for(var a in this.tips)""==this.input[a]?this.tips[a]=Et[a]:(this.tips[a]="",t[a]=Ft[a](this,this.input[a]));for(var s in t)console.log(t[s]);for(var o in t)if(!t[o]){e=!1;break}return console.log("allready"+e),!!e},confirm:function(t){var e=this;this.$confirm("确定分配账号吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",callback:function(a){"confirm"==a?e.addUser(t):e.$message({type:"info",message:"取消操作。"})}})},addUser:function(t){var e=this;"many"==t?this.$axios({method:"post",url:"user/addUser",data:this.accounts}).then(function(t){f.checkError(e,t.data)&&(e.$message({message:"批量分配账号成功！",type:"success"}),e.dialogVisible=!1)}).catch(function(t){e.$message({message:"批量分配账号失败",type:"error"})}):this.$axios({method:"post",url:"user/addUser",data:[this.input]}).then(function(t){f.checkError(e,t.data)&&e.$message({message:"分配单个账号成功！",type:"success"}),e.dialogVisible=!1}).catch(function(t){e.dialogVisible=!1,e.$message({message:"分配单个账号失败",type:"error"})})}},mounted:function(){this.$on("loaded",this.setState)},activated:function(){}},zt=Mt,Ht=(a("c6b4"),a("5d64"),Object(p["a"])(zt,Ot,Ut,!1,null,"5d852849",null)),Wt=Ht.exports,Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("sv-header",{attrs:{menuIndex:"3.3.2"}}),a("span",{staticClass:"title"},[t._v("人员调动")]),a("el-input",{staticClass:"search-input",attrs:{size:"small",placeholder:"请输入查询条件"},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"姓名"},slot:"prepend",model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},[a("el-option",{attrs:{label:"工号",value:"workCode"}}),a("el-option",{attrs:{label:"姓名",value:"name"}})],1),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.checkInput},slot:"append"})],1),t.hasData?a("el-table",{staticClass:"staffs-table",attrs:{data:t.staffs,border:""}},[a("el-table-column",{attrs:{label:"姓名",width:"200",align:"center",prop:"userRealName",resizable:!1}}),a("el-table-column",{attrs:{label:"工号",width:"200",align:"center",prop:"workCode",resizable:!1}}),a("el-table-column",{attrs:{label:"所属部门",width:"200",align:"center",prop:"departmentName",resizable:!1}}),a("el-table-column",{attrs:{label:"操作",width:"200",align:"center",resizable:!1},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(a){t.pop(e.row.departmentName,e.row.workCode)}}},[t._v("调动")])]}}])})],1):t._e(),a("el-dialog",{attrs:{title:"调动员工",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",[a("span",[t._v("当前所在部门：")]),a("span",[t._v(t._s(t.curDept))])]),a("span",[t._v("目标部门：")]),a("el-select",{staticClass:"dept-sel",attrs:{loading:t.loading,placeholder:"请选择要调往的部门"},on:{focus:t.getAllDepts},model:{value:t.selDept,callback:function(e){t.selDept=e},expression:"selDept"}},t._l(t.depts,function(t){return a("el-option",{key:t.id,attrs:{label:t.department,value:t.id}})}),1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("调动")])],1)],1),t.showPh?a("sv-placeholder",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]}):t._e(),a("sv-footer")],1)},Zt=[],Yt={name:"Transfer",components:{SvHeader:S,SvPlaceholder:tt,SvFooter:it},data:function(){return{hasData:!1,showPh:!0,loading:!1,searchInput:"",select:"",staffs:"",depts:"",dialogVisible:!1,curDept:"",selDept:"",curWorkCode:""}},methods:{checkInput:function(){""==this.searchInput?this.$confirm("查询条件不能为空","提示",{confirmButtonText:"确定"}):this.searchStaffs()},searchStaffs:function(){var t=this;this.loading=!0;var e=new URLSearchParams;"workCode"==this.select?e.append("workCode",this.searchInput):e.append("userRealname",this.searchInput),this.$axios({method:"post",url:"user/getDepartmentByCode",data:e}).then(function(e){console.log(e.data);var a=e.data.data;null!=a&&(t.staffs=a,t.hasData=!0,t.showPh=!1,console.log(t.staffs))})},getAllDepts:function(){var t=this;this.loading=!0,this.$axios.post("user/getAllDepartment").then(function(e){console.log(e.data);var a=e.data.data;null!=a&&(t.depts=a,t.loading=!1)})},pop:function(t,e){this.curDept=t,this.curWorkCode=e,this.dialogVisible=!0},checkSel:function(){return""!=this.selDept||(this.$confirm("请选择要调往的部门！","提示",{confirmButtonText:"确定"}),!1)},confirm:function(){var t=this;this.checkSel()&&this.$confirm("确定调动吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",callback:function(e){"confirm"==e?t.transfer():t.$message({type:"info",message:"取消操作。"})}})},transfer:function(){var t=this,e=new URLSearchParams;e.append("departmentId",this.selDept),e.append("workCode",this.curWorkCode),this.$axios({method:"post",url:"user/transferUser",data:e}).then(function(e){"修改成功"==e.data.msg&&(t.$message({type:"success",message:"人员调动成功！"}),t.dialogVisible=!1)})}},mounted:function(){this.$on("visible-change",function(){console.log("e.target")})}},Jt=Yt,Kt=(a("3dbb"),a("71d1"),Object(p["a"])(Jt,Vt,Zt,!1,null,"b4e7bd06",null)),Gt=Kt.exports,qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("sv-header",{attrs:{menuIndex:3.3}}),a("p",{staticClass:"main-title add_btFont20"},[t._v("备份管理")]),a("div",{staticClass:"topbar"},[a("ul",{staticClass:"clearfix"},[t._m(0),a("li",[a("el-date-picker",{staticClass:"date-picker",attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"daterange","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOpts},on:{change:t.getProjByDate},model:{value:t.selDate,callback:function(e){t.selDate=e},expression:"selDate"}})],1),a("li",[a("el-input",{staticClass:"search-box",attrs:{placeholder:"请输入委托方 / 负责人 / 项目名称"},model:{value:t.searchTxt,callback:function(e){t.searchTxt=e},expression:"searchTxt"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){t.searchProj()}},slot:"append"})],1)],1),a("li",[a("span",{staticClass:"btn-search",on:{click:t.searchProj}},[t._v("搜索")])])])]),a("el-table",{ref:"projTable",staticClass:"projTable",attrs:{data:t.projs,border:"","tooltip-effect":"dark"},on:{"select-all":t.setSelAll,"selection-change":t.setSel}},[a("el-table-column",{attrs:{prop:"projectName",label:"项目名称",align:"center",resizable:!1}}),a("el-table-column",{attrs:{prop:"createTime",label:"时间",align:"center",resizable:!1}}),a("el-table-column",{attrs:{prop:"projectDirector.userRealname",label:"负责人",align:"center",resizable:!1}}),a("el-table-column",{attrs:{label:"进度",align:"center",resizable:!1},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-progress",{attrs:{percentage:t.row.process}})]}}])}),a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}})],1),a("div",{staticClass:"btns clearfix"},[a("ul",[a("li",[a("span",{staticClass:"btn-ops",on:{click:t.checkBackupSel}},[t._v("备份")])]),a("li",[a("span",{staticClass:"btn-ops",on:{click:t.backupAll}},[t._v("备份全部")])])])])],1)},Qt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("span",[t._v("时间段：")])])}],Xt=(a("6b54"),{name:"backup",components:{SvHeader:S},data:function(){return{selDate:"",searchTxt:"",backupSel:"",isSelAll:!1,projs:"",pickerOpts:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]}}},methods:{getProjByDate:function(){var t=this;console.log(this.selDate),this.$axios.get("project/query_date?page=1&pageSize=10&start="+this.selDate[0]+"&end="+this.selDate[1]).then(function(e){console.log(e.data);var a=e.data.data.list;a.map(function(t){t.createTime=E(new Date(t.createTime),"yyyy.MM.dd")}),console.log(a),t.projs=a})},searchProj:function(){var t=this;this.$axios.get("project/query?page=1&pageSize=10&query="+this.searchTxt).then(function(e){console.log(e.data);var a=e.data.data.list;a.map(function(t){t.createTime=E(new Date(t.createTime),"yyyy.MM.dd")}),t.projs=a})},setSel:function(t){this.backupSel=t},setSelAll:function(){this.isSelAll=!0},checkBackupSel:function(){var t=this;0==this.projs.length||(void 0==this.backupSel[0]?this.$confirm("请选择要备份的项目","提示",{confirmButtonText:"确定"}):this.$confirm("确定备份所选项目？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){t.backupProj("one")}))},backupAll:function(){var t=this;0==this.projs.length||(this.backupSel.length!=this.projs.length&&this.$refs.projTable.toggleAllSelection(),this.$confirm("确定备份所有项目？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){t.backupProj()}).catch(function(){t.$refs.projTable.clearSelection()}))},backupProj:function(){var t=new URLSearchParams;this.backupSel.map(function(e){t.append("projectIds",e.id)}),console.log(t.toString()),window.open(f.svUrl+"document/backup_projects?"+t.toString())}},mounted:function(){this.searchProj()}}),te=Xt,ee=(a("62a8"),Object(p["a"])(te,qt,Qt,!1,null,"88f0d81a",null)),ae=ee.exports,se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("sv-header",{attrs:{menuIndex:"3.5.2"}}),a("p",{staticClass:"main-title add_btFont20"},[t._v("进度统计")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTable,expression:"loadingTable"}],staticClass:"prog-table",attrs:{data:t.projProgs,border:""}},[a("el-table-column",{attrs:{label:"项目名称",align:"center",prop:"projectName",resizable:!1}}),a("el-table-column",{attrs:{label:"项目进度",align:"center",prop:"process",resizable:!1}})],1),a("div",{staticClass:"pagination clearfix"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.curPage,total:t.itemTotal},on:{"update:currentPage":function(e){t.curPage=e},"current-change":t.getProjProg}})],1)],1)},oe=[],ne={name:"ProgStat",components:{SvHeader:S},data:function(){return{loadingTable:!1,projProgs:[],curPage:1,itemTotal:0}},methods:{getProjProg:function(){var t=this;this.loadingTable=!0,this.$axios.get("census/projects?page="+this.curPage+"&&pageSize=10").then(function(e){console.dir(e.data.data.list);var a=e.data.data,s=a.list,o=a.total,n=[];s.map(function(t){t.process=t.process+"%",n.push(t)}),t.projProgs=n,t.itemTotal=o,t.loadingTable=!1}).catch(function(t){console.log("something wrong")})}},mounted:function(){this.getProjProg()}},ie=ne,le=(a("3ee1"),Object(p["a"])(ie,se,oe,!1,null,"fdc8f28a",null)),re=le.exports,ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("sv-header",{attrs:{menuIndex:"3.5.1"}}),a("p",{staticClass:"main-title add_btFont20"},[t._v("项目总览")]),a("div",{staticClass:"clearfix"},[a("el-date-picker",{staticClass:"sel-year",attrs:{type:"year","value-format":"yyyy",placeholder:"选择年份"},on:{change:t.getProjSum},model:{value:t.selYear,callback:function(e){t.selYear=e},expression:"selYear"}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTable,expression:"loadingTable"}],staticClass:"sum-table add_sum_table",attrs:{data:t.projSums,border:""}},[a("el-table-column",{attrs:{label:"序号",align:"center",prop:"num",resizable:!1}}),a("el-table-column",{attrs:{label:"项目名称",align:"center",prop:"projectName",resizable:!1}}),a("el-table-column",{attrs:{label:"委托方",align:"center",prop:"client",resizable:!1}}),a("el-table-column",{attrs:{label:"委托方联系方式",align:"center",prop:"clientContact",resizable:!1}}),a("el-table-column",{attrs:{label:"商务代表",align:"center",prop:"personCharge",resizable:!1}}),a("el-table-column",{attrs:{label:"合同签订时间",align:"center",prop:"agreementTime",resizable:!1}}),a("el-table-column",{attrs:{label:"建设工期",align:"center",prop:"buildDuration",resizable:!1}}),a("el-table-column",{attrs:{label:"服务周期",align:"center",prop:"serviceDuration",resizable:!1}}),a("el-table-column",{attrs:{label:"是否常驻",align:"center",prop:"isResident",resizable:!1}}),a("el-table-column",{attrs:{label:"非常驻每周天数",align:"center",prop:"notResidentWeekDays",resizable:!1}}),a("el-table-column",{attrs:{label:"工程预算",align:"center",prop:"projectBudget",resizable:!1}}),a("el-table-column",{attrs:{label:"监理费",align:"center",prop:"supervisionAmount",resizable:!1}}),a("el-table-column",{attrs:{label:"付款比例",align:"center",prop:"paymentRatio",resizable:!1}}),a("el-table-column",{attrs:{label:"已付款",align:"center",prop:"supervisionPaid",resizable:!1}}),a("el-table-column",{attrs:{label:"剩余款",align:"center",prop:"paymentRemaining",resizable:!1}}),a("el-table-column",{attrs:{label:"总监",align:"center",prop:"projectDirector.userRealname",resizable:!1}}),a("el-table-column",{attrs:{label:"总监代表",align:"center",prop:"delegate.userRealname",resizable:!1}}),a("el-table-column",{attrs:{label:"实施人员",align:"center",prop:"teamMembers",resizable:!1},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){t.showMembers(e.row.id)}}},[t._v("查看")])]}}])}),a("el-table-column",{attrs:{label:"当前进度",align:"center",prop:"process",resizable:!1}})],1),a("div",{staticClass:"pagination-wrapper clearfix"},[a("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"prev, pager, next","current-page":t.curPage,total:t.itemTotal},on:{"update:currentPage":function(e){t.curPage=e},"current-change":function(e){t.getProjSum()}}})],1),a("div",{staticClass:"btn-export-wrapper clearfix"},[a("button",{staticClass:"btn",on:{click:t.exportProj}},[t._v("导出所有")])]),a("el-dialog",{staticClass:"add_modal",staticStyle:{"text-align":"center"},attrs:{title:"实施人员",visible:t.dialogMembers,width:"20%"},on:{"update:visible":function(e){t.dialogMembers=e}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingMembers,expression:"loadingMembers"}],staticClass:"add_modalDiv clearfix"},t._l(t.teamMembers,function(e){return a("p",{key:e.id,staticClass:"add_modalP clearfix"},[t._v(t._s(e.name))])}),0)])],1)},de=[],ue={name:"ProjSum",components:{SvHeader:S},data:function(){return{selYear:"",curPage:1,itemTotal:0,projSums:[],loadingTable:!1,dialogMembers:!1,teamMembers:[],loadingMembers:!1}},methods:{getProjSum:function(){var t=this;this.loadingTable=!0;var e="";e=""!=this.selYear?this.selYear:(new Date).getFullYear(),console.log(e),this.$axios.get("census/projects?page="+this.curPage+"&&pageSize=10&&year="+e).then(function(e){console.log(e.data);var a=e.data.data,s=a.list,o=a.total;t.projSums=[];var n=1;s.map(function(t){t.num=n,t.agreementTime=null==t.agreementTime?"    ":E(new Date(t.agreementTime),"yyyy.MM.dd"),t.buildDuration=null==t.buildDuration?"    ":t.buildDuration+"个月",t.serviceDuration=null==t.serviceDuration?"    ":t.serviceDuration+"个月",t.isResident=0==t.isResident?"否":"是",t.paymentRemaining=t.supervisionAmount-t.supervisionPaid,t.paymentRatio=isNaN(t.supervisionPaid/t.supervisionAmount)?"0%":Math.round(t.supervisionPaid/t.supervisionAmount*100)+"%",t.notResidentWeekDays=null==t.notResidentWeekDays?"    ":t.notResidentWeekDays+"天",n++}),t.projSums=s,t.itemTotal=o,t.loadingTable=!1})},getProjTeam:function(t){var e=this;this.loadingMembers=!0,this.$axios.get("project/team?projectId="+t).then(function(t){console.log(t.data);var a=t.data.data,s=a.Delegate,o=a.Members,n=a.ProjectManager;if(e.teamMembers=[],void 0!=n.id&&e.teamMembers.push({id:n.id,name:n.userRealname}),void 0!=s.id&&e.teamMembers.push({id:s.id,name:s.userRealname}),void 0!=o[0])for(var i in o)e.teamMembers.push({id:o[i].id,name:o[i].userRealname});e.loadingMembers=!1})},showMembers:function(t){this.dialogMembers=!0,this.getProjTeam(t)},exportProj:function(){window.open(f.svUrl+"census/export")}},mounted:function(){this.getProjSum()}},pe=ue,me=(a("307a"),a("a995"),Object(p["a"])(pe,ce,de,!1,null,"03e9579f",null)),fe=me.exports,he=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("sv-header",{attrs:{menuIndex:"3.7"}}),a("p",{staticClass:"main-title add_btFont20"},[t._v("组织架构")]),a("div",{staticClass:"main-wrapper clearfix"},[a("div",{staticClass:"wrapper-left clearfix"},[a("div",{staticClass:"wrapper-btn clearfix"},[a("span",{staticClass:"btn-refresh el-icon-refresh",on:{click:function(e){t.getOrg("refresh")}}})]),a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingOrg,expression:"loadingOrg"}],staticClass:"org add_Orgleft",attrs:{data:t.org,props:t.defaultProps,"node-key":"key","default-expanded-keys":[1]},on:{"node-click":t.getData}})],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingRightArea,expression:"loadingRightArea"}],staticClass:"wrapper-right"},[t.showModule.root?a("p",{staticClass:"title-org"},[t._v("组织架构")]):t._e(),t.showModule.root?a("span",{staticClass:"btn-add-dept",on:{click:function(e){t.popModifyDialog("addDept")}}},[t._v("添加部门")]):t._e(),t.showModule.root?a("sv-account-assign",{staticClass:"btn-assign"}):t._e(),t.showModule.root?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingUserTable,expression:"loadingUserTable"}],key:"root",staticClass:"depts-table add_Orgtable",attrs:{data:t.depts,border:""}},[a("el-table-column",{attrs:{label:"类别",align:"center",prop:"type",resizable:!1}}),a("el-table-column",{attrs:{label:"名称",align:"center",prop:"desc",resizable:!1}}),a("el-table-column",{attrs:{label:"人数",align:"center",prop:"number",resizable:!1}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"200",resizable:!1},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"btn-wrapper"},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(a){t.popModifyDialog("modifyDept",e.row.deptId,e.row.desc,e.row.type)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger",size:"medium"},on:{click:function(a){t.delDept(e.row.deptId)}}},[t._v("删除")])],1)]}}])})],1):t._e(),t.showModule.user?a("p",{staticClass:"title-org"},[t._v("部门："+t._s(t.curTitle.dept))]):t._e(),t.showModule.user?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingUserTable,expression:"loadingUserTable"}],key:"user",staticClass:"user-table",attrs:{data:t.user,border:""}},[a("el-table-column",{attrs:{label:"登录名",align:"center",prop:"workCode",resizable:!1}}),a("el-table-column",{attrs:{label:"姓名",align:"center",prop:"userName",resizable:!1}}),a("el-table-column",{attrs:{label:"部门",align:"center",prop:"deptDesc",resizable:!1}}),a("el-table-column",{attrs:{label:"职位",align:"center",prop:"roleDesc",resizable:!1}}),a("el-table-column",{attrs:{label:"手机号",align:"center",prop:"phone",resizable:!1}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"200",resizable:!1},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"btn-wrapper"},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(a){t.popModifyDialog("normal",e.row.workCode,e.row.userName,e.row.deptDesc,e.row.phone)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger",size:"medium"},on:{click:function(a){t.delUser(e.row.workCode)}}},[t._v("删除")])],1)]}}])})],1):t._e(),t.showModule.branch?a("p",{staticClass:"title-org"},[t._v("分公司："+t._s(t.curTitle.branch))]):t._e(),t.showModule.branch?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingUserTable,expression:"loadingUserTable"}],key:"branch",staticClass:"user-table",attrs:{data:t.users,border:""}},[a("el-table-column",{attrs:{label:"登录名",align:"center",prop:"workCode",resizable:!1}}),a("el-table-column",{attrs:{label:"姓名",align:"center",prop:"userName",resizable:!1}}),a("el-table-column",{attrs:{label:"职位",align:"center",prop:"roleDesc",resizable:!1}}),a("el-table-column",{attrs:{label:"手机号",align:"center",prop:"phone",resizable:!1}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"200",resizable:!1},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"btn-wrapper"},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(a){t.popModifyDialog("branch",e.row.workCode,e.row.userName,e.row.phone)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger",size:"medium"},on:{click:function(a){t.delUser(e.row.workCode)}}},[t._v("删除")])],1)]}}])})],1):t._e()],1)]),a("el-dialog",{staticClass:"dialog-user",attrs:{title:"编辑员工资料",visible:t.dialogVisible.user,width:"30%"},on:{"update:visible":function(e){t.$set(t.dialogVisible,"user",e)}}},[a("div",{staticClass:"clearfix"},[a("span",{staticClass:"key"},[t._v("姓名：")]),a("el-input",{attrs:{size:"small"},model:{value:t.newUser.name,callback:function(e){t.$set(t.newUser,"name",e)},expression:"newUser.name"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.isNormal,expression:"isNormal"}],staticClass:"key"},[t._v("部门：")]),a("el-select",{directives:[{name:"show",rawName:"v-show",value:t.isNormal,expression:"isNormal"}],ref:"elSelect",staticClass:"dept-sel",attrs:{loading:t.loadingDeptsToSel,placeholder:"请选择部门"},model:{value:t.newUser.deptId,callback:function(e){t.$set(t.newUser,"deptId",e)},expression:"newUser.deptId"}},t._l(t.deptsToSel,function(t){return a("el-option",{key:t.id,attrs:{label:t.department,value:t.id}})}),1),a("span",{staticClass:"key"},[t._v("手机号：")]),a("el-input",{attrs:{size:"small"},model:{value:t.newUser.mobile,callback:function(e){t.$set(t.newUser,"mobile",e)},expression:"newUser.mobile"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.checkInput()}}},[t._v("保存")]),a("el-button",{on:{click:function(e){t.dialogVisible.user=!1}}},[t._v("取消")])],1)]),a("el-dialog",{staticClass:"dialog-dept",attrs:{title:t.dialogTitle,visible:t.dialogVisible.dept,width:"30%"},on:{"update:visible":function(e){t.$set(t.dialogVisible,"dept",e)}}},[a("div",{staticClass:"clearfix"},[a("span",{staticClass:"key"},[t._v("部门名称：")]),a("el-input",{attrs:{size:"small"},model:{value:t.newDept.name,callback:function(e){t.$set(t.newDept,"name",e)},expression:"newDept.name"}}),a("span",{staticClass:"key"},[t._v("类型：")]),a("el-select",{attrs:{placeholder:"请选择部门"},model:{value:t.newDept.type,callback:function(e){t.$set(t.newDept,"type",e)},expression:"newDept.type"}},t._l(t.cats,function(t){return a("el-option",{key:t.type,attrs:{label:t.name,value:t.name}})}),1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.checkInput(!0)}}},[t._v("保存")]),a("el-button",{on:{click:function(e){t.dialogVisible.dept=!1}}},[t._v("取消")])],1)]),a("sv-footer")],1)},ve=[],ge=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("button",{staticClass:"btn",on:{click:function(e){t.dialogVisible=!0}}},[t._v("账号分配")]),a("el-dialog",{staticClass:"dialog",attrs:{title:"请输入账号信息",visible:t.dialogVisible,width:"55%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",{staticClass:"key"},[t._v("姓名:")]),a("span",{staticClass:"tip-check"},[t._v(t._s(t.tips.name))]),a("el-input",{staticClass:"add_el_input",model:{value:t.input.name,callback:function(e){t.$set(t.input,"name",e)},expression:"input.name"}}),a("span",{staticClass:"key mal15"},[t._v("工号:")]),a("span",{staticClass:"tip-check"},[t._v(t._s(t.tips.workCode))]),a("el-input",{staticClass:"add_el_input",model:{value:t.input.workCode,callback:function(e){t.$set(t.input,"workCode",e)},expression:"input.workCode"}}),a("span",{staticClass:"key"},[t._v("部门:")]),a("span",{staticClass:"tip-check"},[t._v(t._s(t.tips.dept))]),a("el-select",{staticClass:"add_select",attrs:{loading:t.loadingDepts,placeholder:"请选择部门"},on:{focus:t.getAllDepts},model:{value:t.input.dept,callback:function(e){t.$set(t.input,"dept",e)},expression:"input.dept"}},t._l(t.depts,function(t){return a("el-option",{key:t.id,attrs:{label:t.department,value:t.department}})}),1),a("span",{staticClass:"key mal15"},[t._v("手机:")]),a("span",{staticClass:"tip-check"},[t._v(t._s(t.tips.mobile))]),a("el-input",{staticClass:"add_el_input",model:{value:t.input.mobile,callback:function(e){t.$set(t.input,"mobile",e)},expression:"input.mobile"}}),a("span",{staticClass:"key"},[t._v("密码:")]),a("span",{staticClass:"tip-check"},[t._v(t._s(t.tips.pwd))]),a("el-input",{staticClass:"add_el_input",attrs:{type:"password"},model:{value:t.input.pwd,callback:function(e){t.$set(t.input,"pwd",e)},expression:"input.pwd"}}),a("span",{staticClass:"key mal15"},[t._v("年龄:")]),a("span",{staticClass:"tip-check"},[t._v(t._s(t.tips.age))]),a("el-input",{staticClass:"add_el_input",model:{value:t.input.age,callback:function(e){t.$set(t.input,"age",e)},expression:"input.age"}}),a("span",{staticClass:"key"},[t._v("邮箱:")]),a("span",{staticClass:"tip-check"},[t._v(t._s(t.tips.email))]),a("el-input",{staticClass:"add_el_input",model:{value:t.input.email,callback:function(e){t.$set(t.input,"email",e)},expression:"input.email"}}),a("span",{staticClass:"key mal15"},[t._v("性别:")]),a("div",{staticClass:"wrapper-radio"},[a("el-radio",{attrs:{label:"男"},model:{value:t.input.gender,callback:function(e){t.$set(t.input,"gender",e)},expression:"input.gender"}},[t._v("男")]),a("el-radio",{attrs:{label:"女"},model:{value:t.input.gender,callback:function(e){t.$set(t.input,"gender",e)},expression:"input.gender"}},[t._v("女")])],1),a("span",{staticClass:"key"},[t._v("紧急联系人姓名:")]),a("span",{staticClass:"tip-check"},[t._v(t._s(t.tips.ICEName))]),a("el-input",{staticClass:"width33",model:{value:t.input.ICEName,callback:function(e){t.$set(t.input,"ICEName",e)},expression:"input.ICEName"}}),a("span",{staticClass:"key mal15"},[t._v("紧急联系人电话:")]),a("span",{staticClass:"tip-check"},[t._v(t._s(t.tips.ICEPhone))]),a("el-input",{staticClass:"width33",model:{value:t.input.ICEPhone,callback:function(e){t.$set(t.input,"ICEPhone",e)},expression:"input.ICEPhone"}}),a("button",{staticClass:"submit-btn",on:{click:function(e){t.checkOps("one")}}},[t._v("分配账号")])],1)],1)},be=[],Ce={name:"姓名不能为空",workCode:"工号不能为空",dept:"部门不能为空",mobile:"手机号不能为空",pwd:"密码不能为空",age:"年龄不能为空",email:"邮箱不能为空",ICEName:"紧急联系人姓名不能为空",ICEPhone:"紧急联系人电话不能为空"},ye={name:function(){return!0},workCode:function(){return!0},dept:function(){return!0},mobile:function(t,e){return!!/^1\d{10}/.test(e)||(t.tips.mobile="手机号格式不正确",!1)},pwd:function(){return!0},age:function(t,e){return!!/^\d{2,3}$/.test(e)||(t.tips.age="年龄格式不正确",!1)},gender:function(){return!0},email:function(t,e){var a=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;return!!a.test(e)||(t.tips.email="邮箱格式不正确",!1)},ICEName:function(){return!0},ICEPhone:function(t,e){return!!/^1\d{10}/.test(e)||(t.tips.ICEPhone="紧急联系人电话格式不正确",!1)}},_e={name:"AccountAssign",data:function(){return{resizable:!1,msg:"未选择文件",accounts:"",hasData:!1,showPh:!0,dialogVisible:!1,input:{name:"",workCode:"",dept:"",mobile:"",pwd:"",age:"",gender:"男",email:"",ICEName:"",ICEPhone:""},loadingDepts:!1,depts:[],tips:{name:"",workCode:"",dept:"",mobile:"",pwd:"",age:"",gender:"",email:"",ICEName:"",ICEPhone:""}}},methods:{checkData:function(){return""!=this.accounts||(this.$confirm("表格数据不存在,请先选择分配表文件","提示",{confirmButtonText:"确定"}),!1)},checkOps:function(t){"many"==t&&this.checkData()?this.confirm(t):"one"==t&&this.checkInput()&&this.confirm(t)},getAllDepts:function(){var t=this;this.loadingDepts=!0,this.$axios.post("user/getAllDepartment").then(function(e){var a=e.data.data;t.depts=a,t.loadingDepts=!1})},checkInput:function(){var t={name:!1,workCode:!1,dept:!1,mobile:!1,pwd:!1,age:!1,gender:!1,ICEName:!1,ICEPhone:!1},e=!0;for(var a in this.tips)""==this.input[a]?this.tips[a]=Ce[a]:(this.tips[a]="",t[a]=ye[a](this,this.input[a]));for(var s in t)console.log(t[s]);for(var o in t)if(!t[o]){e=!1;break}return console.log("allready"+e),!!e},confirm:function(t){var e=this;this.$confirm("确定分配账号吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",callback:function(a){"confirm"==a?e.addUser(t):e.$message({type:"info",message:"取消操作。"})}})},addUser:function(t){var e=this;"many"==t?this.$axios({method:"post",url:"user/addUser",data:this.accounts}).then(function(t){f.checkError(e,t.data)&&(e.$message({message:"批量分配账号成功！",type:"success"}),e.dialogVisible=!1)}).catch(function(t){e.$message({message:"批量分配账号失败",type:"error"})}):this.$axios({method:"post",url:"user/addUser",data:[this.input]}).then(function(t){f.checkError(e,t.data)&&e.$message({message:"分配单个账号成功！",type:"success"}),e.dialogVisible=!1}).catch(function(t){e.dialogVisible=!1,e.$message({message:"分配单个账号失败",type:"error"})})}},mounted:function(){this.$on("loaded",this.setState)},activated:function(){}},we=_e,ke=(a("d6fc"),a("21e7"),Object(p["a"])(we,ge,be,!1,null,"20e371a6",null)),De=ke.exports,xe={name:"org",components:{SvHeader:S,SvFooter:it,SvAccountAssign:De},data:function(){return{loadingOrg:!1,org:[{l:"恒普科技",c:[],key:1}],defaultProps:{children:"c",label:"l"},loadingUserTable:!1,loadingRightArea:!1,showModule:{user:!1,root:!1,branch:!1},depts:[],curTitle:{dept:"",branch:""},user:[],users:[],curData:{data:"",node:""},isNormal:!1,loadingDeptsToSel:!1,deptsToSel:[],curRoleId:"",sel:{user:"未选择",workCode:"",dept:"未选择",deptId:""},newUser:{},newDept:{},cats:[{type:1,name:"部门"},{type:2,name:"分公司"}],dialogTitle:"",dialogVisible:{user:!1,dept:!1}}},methods:{getOrg:function(t){var e=this;this.loadingOrg=!0,"refresh"==t&&(this.org=[{l:"恒普科技",c:[],key:1}]),this.$axios.get("user/getOrganization").then(function(t){console.log(t.data);var a=t.data.data,s=[];a.forEach(function(t){void 0!=t.userInfo?e.org[0].c.push({l:t.deptDesc,deptId:t.deptId}):s.push({l:t.company.department,branchId:t.company.id})}),e.org[0].c.push({l:"分公司",c:s}),e.loadingOrg=!1})},getData:function(t,e,a){var s=this;for(var o in console.log("getData"),console.log(t),"refresh"!=a&&(this.curData.data=t,this.curData.node=e),this.showModule)this.showModule[o]=!1;"恒普科技"==this.curData.data.l?(console.log("into root"),this.showModule.root=!0,this.loadingRightArea=!0,this.$axios.get("user/getAllDeptInfo").then(function(t){console.log(t.data);var e=t.data.data;s.depts=e,s.loadingRightArea=!1})):void 0!=this.curData.data.deptId?(console.log("into normal"),this.loadingRightArea=!0,this.showModule.user=!0,this.curTitle.dept=this.curData.data.l,this.$axios.get("user/getUserInfoByDeptId?deptId="+this.curData.data.deptId).then(function(t){console.log(t.data);var e=t.data.data;s.user=e,s.loadingRightArea=!1})):void 0!=this.curData.data.branchId&&(console.log("into branch"),this.loadingRightArea=!0,this.showModule.branch=!0,this.curTitle.branch=this.curData.data.l,this.$axios.get("user/getUserInfoByCompanyId?companyId="+this.curData.data.branchId).then(function(t){console.log(t.data);var e=t.data.data;s.users=e,s.loadingRightArea=!1}))},popModifyDialog:function(t,e,a,s,o){var n=this;if("normal"==t){this.newUser={workCode:e,name:"",deptId:"",mobile:""};var i="";this.$axios.post("user/getAllDepartment").then(function(t){var e=t.data.data;null!=e&&(console.log(e),e.forEach(function(t){t.department==s&&(i=t.id)}),n.deptsToSel=e,n.fillDefaultData("normal",a,i,o),n.isNormal=!0,n.dialogVisible.user=!0)})}else"branch"==t?(this.newUser={workCode:e,name:"",mobile:""},this.fillDefaultData("branch",a,s),this.isNormal=!1,this.dialogVisible.user=!0):"modifyDept"==t?(this.newDept={deptId:e,name:"",type:""},this.fillDefaultData("dept",a,s),this.dialogTitle="编辑",this.dialogVisible.dept=!0):(this.newDept={name:"",type:""},this.dialogTitle="添加部门",this.dialogVisible.dept=!0)},fillDefaultData:function(t,e,a,s){"dept"==t?(this.newDept.name=e,this.newDept.type=a):"normal"==t?(this.newUser.name=e,console.log(a),this.newUser.deptId=a,this.newUser.mobile=s):(this.newUser.name=e,this.newUser.mobile=a)},delUser:function(t){var e=this;console.log(t),this.$confirm("确定删除此员工？","提示",{confirmButtonText:"确定",type:"warning"}).then(function(){var a=new URLSearchParams;a.append("workCode",t),e.$axios.post("user/delUserFromDept",a).then(function(a){if(console.log(a.data),console.log(t),f.checkError(e,a.data)){for(var s in e.$message({type:"success",message:"删除员工成功！"}),e.showModule)e.showModule[s]=!1;e.getOrg("refresh")}})})},checkInput:function(t){console.log(t);var e="";if(void 0==t&&(e=this.isNormal?"normal":"branch"),"normal"==e||"branch"==e){var a=!0;for(var s in this.newUser)if(""==this.newUser[s]){a=!1;break}a?/^1\d{10}/.test(this.newUser.mobile)?"normal"==e?this.modifyUser("normal"):this.modifyUser("branch"):this.$confirm("手机号码格式不正确！","提示",{confirmButtonText:"确定"}):this.$confirm("请请填写完整的资料！","提示",{confirmButtonText:"确定"})}else if(t){var o=!0;for(var n in this.newDept)if(""==this.newDept[n]){o=!1;break}o?void 0==this.newDept.deptId?this.addDept():this.modifyDept():this.$confirm("请请填写完整的资料！","提示",{confirmButtonText:"确定"})}},modifyUser:function(t){var e=this,a=new URLSearchParams;a.append("workCode",this.newUser.workCode),a.append("userName",this.newUser.name),"normal"==t&&a.append("deptId",this.newUser.deptId),a.append("phone",this.newUser.mobile),"normal"==t?this.$axios.post("user/modifyUserInfoDept",a).then(function(t){if(f.checkError(e,t.data)){for(var a in e.$message({type:"success",message:"员工资料保存成功！"}),e.dialogVisible.user=!1,e.showModule)e.showModule[a]=!1;e.getOrg("refresh")}}):this.$axios.post("user/modifyUserInfoCompany",a).then(function(t){if(f.checkError(e,t.data)){for(var a in e.$message({type:"success",message:"员工资料保存成功！"}),e.dialogVisible.user=!1,e.showModule)e.showModule[a]=!1;e.getOrg("refresh")}})},addDept:function(){var t=this,e=new URLSearchParams;e.append("department",this.newDept.name),e.append("type",this.newDept.type),this.$axios.post("user/addDept",e).then(function(e){f.checkError(t,e.data)&&(t.$message({type:"success",message:"添加部门成功！"}),t.dialogVisible.dept=!1,t.getData("","","refresh"),t.getOrg("refresh"))}).catch(function(e){t.$message({type:"info",message:"添加部门失败！"})})},modifyDept:function(){var t=this,e=new URLSearchParams;e.append("id",this.newDept.deptId),e.append("department",this.newDept.name),e.append("type",this.newDept.type),this.$axios.post("user/modifyDept",e).then(function(e){f.checkError(t,e.data)&&(t.$message({type:"success",message:"保存成功！"}),t.dialogVisible.dept=!1,t.getData("","","refresh"),t.getOrg("refresh"))})},delDept:function(t){var e=this;this.$confirm("确定删除此部门？","提示",{confirmButtonText:"确定",type:"warning"}).then(function(){var a=new URLSearchParams;a.append("deptId",t),e.$axios.post("user/delDept",a).then(function(t){console.log(t.data),f.checkError(e,t.data)&&(e.$message({type:"success",message:"删除部门成功！"}),e.getData("","","refresh"),e.getOrg("refresh"))})})}},mounted:function(){this.getOrg(),this.getData({l:"恒普科技"},"","")}},Se=xe,je=(a("adf2"),Object(p["a"])(Se,he,ve,!1,null,"75e59464",null)),$e=je.exports,Te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addPro"},[a("svHeader",{attrs:{menuIndex:"2.2"}}),a("el-container",[a("el-aside",{staticStyle:{width:"5%"}}),a("el-main",[a("el-row",[a("el-col",{staticClass:"text-center ",attrs:{span:2}},[a("i",{staticClass:"el-icon-success top_i_css"})]),a("el-col",{staticClass:"mat5",attrs:{span:18}},[a("a",{staticClass:"title_css add_btFont20"},[t._v("项目立项")])])],1),a("el-row",[a("el-col",{staticClass:"mt-1",attrs:{span:22,offset:2}},[a("div",{staticClass:"xuxian"})])],1),a("el-row",{staticClass:"mt-1"},[a("el-col",{staticClass:"mt-2",attrs:{span:2,offset:2}},[t._v("\n\t\t\t\t\t\t项目名称:\n\t\t\t\t\t")]),a("el-col",{attrs:{span:8}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.addData.projectName,expression:"addData.projectName "}],staticClass:"mt-2 ",attrs:{placeholder:"请输入项目名称 "},domProps:{value:t.addData.projectName},on:{input:function(e){e.target.composing||t.$set(t.addData,"projectName",e.target.value)}}})]),a("el-col",{staticClass:"mt-2",attrs:{span:2,offset:1}},[t._v("\n\t\t\t\t\t\t项目编号:\n\t\t\t\t\t")]),a("el-col",{attrs:{span:8}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.addData.projectCode,expression:"addData.projectCode"}],staticClass:"mt-2 ",attrs:{placeholder:"请输入项目编号 "},domProps:{value:t.addData.projectCode},on:{input:function(e){e.target.composing||t.$set(t.addData,"projectCode",e.target.value)}}})])],1),a("el-row",{staticClass:"mt-1"},[a("el-col",{staticClass:"mt-2",attrs:{span:2,offset:2}},[t._v("\n\t\t\t\t\t\t委托方:\n\t\t\t\t\t")]),a("el-col",{attrs:{span:8}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.addData.client,expression:"addData.client"}],staticClass:"mt-2 ",attrs:{placeholder:"请输入委托方名称 "},domProps:{value:t.addData.client},on:{input:function(e){e.target.composing||t.$set(t.addData,"client",e.target.value)}}})]),a("el-col",{staticClass:"mt-2",attrs:{span:2,offset:1}},[t._v("\n\t\t\t\t\t\t委托方联系方式\n\t\t\t\t\t")]),a("el-col",{attrs:{span:8}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.addData.clientContact,expression:"addData.clientContact"}],staticClass:"mt-2 ",attrs:{placeholder:"xxx 12345678901"},domProps:{value:t.addData.clientContact},on:{input:function(e){e.target.composing||t.$set(t.addData,"clientContact",e.target.value)}}})])],1),a("el-row",{staticClass:"mt-1"},[a("el-col",{staticClass:"mt-2",attrs:{span:2,offset:2}},[t._v("\n\t\t\t\t\t\t承建方:\n\t\t\t\t\t")]),a("el-col",{attrs:{span:8}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.addData.contractor,expression:"addData.contractor"}],staticClass:"mt-2 ",attrs:{placeholder:"请输入承建方 "},domProps:{value:t.addData.contractor},on:{input:function(e){e.target.composing||t.$set(t.addData,"contractor",e.target.value)}}})]),a("el-col",{staticClass:"mt-1",attrs:{span:2,offset:1}},[t._v("\n\t\t\t\t\t\t合同签订时间:\n\t\t\t\t\t")]),a("el-col",{attrs:{span:8}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:t.addData.agreementTime,callback:function(e){t.$set(t.addData,"agreementTime",e)},expression:"addData.agreementTime"}})],1)],1),a("el-row",{staticClass:"mt-1"},[a("el-col",{staticClass:"mt-2",attrs:{span:2,offset:2}},[t._v("\n\t\t\t\t\t\t商务代表:\n\t\t\t\t\t")]),a("el-col",{attrs:{span:8}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.addData.partner,expression:"addData.partner"}],staticClass:"mt-1 ",attrs:{placeholder:"请输入商务代表 "},domProps:{value:t.addData.partner},on:{input:function(e){e.target.composing||t.$set(t.addData,"partner",e.target.value)}}})]),a("el-col",{staticClass:"mt-1",attrs:{span:2,offset:1}},[t._v("\n\t\t\t\t\t\t建设工期:\n\t\t\t\t\t")]),a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"select_css mt-2",attrs:{placeholder:""},model:{value:t.buildDurationYear,callback:function(e){t.buildDurationYear=e},expression:"buildDurationYear"}},t._l(t.yearOption,function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})}),1)],1),a("el-col",{staticClass:"mt-1 text-center",attrs:{span:1}},[a("span",[t._v("年")])]),a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"select_css mt-2",attrs:{placeholder:""},model:{value:t.buildDurationMonth,callback:function(e){t.buildDurationMonth=e},expression:"buildDurationMonth"}},t._l(t.monthOption,function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})}),1)],1),a("el-col",{staticClass:"mt-1 text-center",attrs:{span:1}},[a("span",[t._v("月")])])],1),a("el-row",{staticClass:"mt-1"},[a("el-col",{staticClass:"mt-2",attrs:{span:2,offset:2}},[t._v("\n\t\t\t\t\t\t服务工期:\n\t\t\t\t\t")]),a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"select_css mt-2",attrs:{placeholder:""},model:{value:t.serviceDurationYear,callback:function(e){t.serviceDurationYear=e},expression:"serviceDurationYear"}},t._l(t.yearOption,function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})}),1)],1),a("el-col",{staticClass:"mt-1 text-center",attrs:{span:1}},[a("span",[t._v("年")])]),a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"select_css mt-2",attrs:{placeholder:""},model:{value:t.serviceDurationMonth,callback:function(e){t.serviceDurationMonth=e},expression:"serviceDurationMonth"}},t._l(t.monthOption,function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})}),1)],1),a("el-col",{staticClass:"mt-1 text-center",attrs:{span:1}},[a("span",[t._v("月")])]),a("el-col",{staticClass:"mt-2",attrs:{span:2,offset:1}},[t._v("\n\t\t\t\t\t\t是否常驻:\n\t\t\t\t\t")]),a("el-col",{attrs:{span:8}},[a("el-select",{staticClass:"select_css mt-2",attrs:{placeholder:""},model:{value:t.addData.isResident,callback:function(e){t.$set(t.addData,"isResident",e)},expression:"addData.isResident"}},t._l(t.isOption,function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})}),1)],1)],1),a("el-row",{staticClass:"mt-1"},[a("el-col",{staticClass:"mt-2",attrs:{span:2,offset:2}},[t._v("\n\t\t\t\t\t\t非常驻每周天数:\n\t\t\t\t\t")]),a("el-col",{attrs:{span:9}},[a("el-select",{staticClass:"select_css w100 mt-2",staticStyle:{width:"90%"},attrs:{placeholder:""},model:{value:t.addData.notResidentWeekDays,callback:function(e){t.$set(t.addData,"notResidentWeekDays",e)},expression:"addData.notResidentWeekDays"}},t._l(t.weekOption,function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})}),1)],1),a("el-col",{staticClass:"mt-2",attrs:{span:2}},[t._v("\n\t\t\t\t\t\t工程预算:\n\t\t\t\t\t")]),a("el-col",{attrs:{span:5}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.addData.projectBudget,expression:"addData.projectBudget"}],staticClass:"mt-2 w100",attrs:{placeholder:"0 "},domProps:{value:t.addData.projectBudget},on:{input:function(e){e.target.composing||t.$set(t.addData,"projectBudget",e.target.value)}}})]),a("el-col",{staticClass:"text-right",attrs:{span:3}},[a("el-select",{staticClass:"select_css mt-2",staticStyle:{width:"90%"},attrs:{placeholder:""},model:{value:t.projectBudgetUnit,callback:function(e){t.projectBudgetUnit=e},expression:"projectBudgetUnit"}},t._l(t.unitOption,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.value}})}),1)],1)],1),a("el-row",{staticClass:"mt-1"},[a("el-col",{staticClass:"mt-2",attrs:{span:2,offset:2}},[t._v("\n\t\t\t\t\t\t监理费用:\n\t\t\t\t\t")]),a("el-col",{attrs:{span:5}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.addData.supervisionAmount,expression:"addData.supervisionAmount"}],staticClass:"mt-2 ",attrs:{placeholder:"0 "},domProps:{value:t.addData.supervisionAmount},on:{input:function(e){e.target.composing||t.$set(t.addData,"supervisionAmount",e.target.value)}}})]),a("el-col",{staticClass:"text-right",attrs:{span:3}},[a("el-select",{staticClass:"select_css mt-2",staticStyle:{width:"90%"},attrs:{placeholder:""},model:{value:t.supervisionAmountUnit,callback:function(e){t.supervisionAmountUnit=e},expression:"supervisionAmountUnit"}},t._l(t.unitOption,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.value}})}),1)],1),a("el-col",{staticClass:"mt-2",attrs:{span:2,offset:1}},[t._v("\n\t\t\t\t\t\t已付监理费:\n\t\t\t\t\t")]),a("el-col",{attrs:{span:5}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.addData.supervisionPaid,expression:"addData.supervisionPaid"}],staticClass:"mt-2 ",attrs:{placeholder:"0 "},domProps:{value:t.addData.supervisionPaid},on:{input:function(e){e.target.composing||t.$set(t.addData,"supervisionPaid",e.target.value)}}})]),a("el-col",{staticClass:"text-right",staticStyle:{"z-inde":"5"},attrs:{span:3}},[a("el-select",{staticClass:"select_css mt-2",staticStyle:{width:"90%"},attrs:{placeholder:""},model:{value:t.supervisionPaidUnit,callback:function(e){t.supervisionPaidUnit=e},expression:"supervisionPaidUnit"}},t._l(t.unitOption,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.value}})}),1)],1)],1),a("el-row",{staticClass:"mt-1"},[a("el-col",{staticClass:"mt-2",attrs:{span:2,offset:2}},[t._v("\n\t\t\t\t\t\t监理部门:\n\t\t\t\t\t")]),a("el-col",{attrs:{span:8}},[a("el-select",{staticClass:"select_css mt-2",attrs:{placeholder:""},model:{value:t.addData.department,callback:function(e){t.$set(t.addData,"department",e)},expression:"addData.department"}},t._l(t.departmentOption,function(t){return a("el-option",{key:t.id,attrs:{label:t.department,value:t.id}})}),1)],1),a("el-col",{staticClass:"mt-2",attrs:{span:2,offset:1}},[t._v("\n\t\t\t\t\t\t项目总监:\n\t\t\t\t\t")]),a("el-col",{attrs:{span:8}},[a("el-select",{staticClass:"select_css mt-2",attrs:{placeholder:""},model:{value:t.addData.projectDirector,callback:function(e){t.$set(t.addData,"projectDirector",e)},expression:"addData.projectDirector"}},t._l(t.directorsOption,function(t){return a("el-option",{key:t.id,attrs:{label:t.userRealname,value:t.id}})}),1)],1)],1),a("el-row",{staticClass:"mt-1"},[a("el-col",{staticClass:"mt-1",attrs:{span:2,offset:2}},[t._v("\n\t\t\t\t\t\t总监代表 :\n\t\t\t\t\t")]),a("el-col",{attrs:{span:8}},[a("el-select",{staticClass:"select_css mt-2",attrs:{placeholder:""},model:{value:t.addData.delegate,callback:function(e){t.$set(t.addData,"delegate",e)},expression:"addData.delegate"}},t._l(t.delegatesOption,function(t){return a("el-option",{key:t.id,attrs:{label:t.userRealname,value:t.id}})}),1)],1),a("el-col",{staticClass:"mt-1",attrs:{span:2,offset:1}},[t._v("\n\t\t\t\t\t\t项目类型:\n\t\t\t\t\t")]),a("el-col",{attrs:{span:8}},[a("el-select",{staticClass:"select_css mt-2",attrs:{placeholder:""},on:{change:function(e){t.selectChange()}},model:{value:t.addData.projectType,callback:function(e){t.$set(t.addData,"projectType",e)},expression:"addData.projectType "}},t._l(t.options,function(t){return a("el-option",{key:t.project_type,attrs:{label:t.project_type,value:t.value}})}),1)],1)],1),t.isCustom?a("el-row",{staticClass:"mt-1"},[a("el-col",{staticClass:"mt-1",attrs:{span:2,offset:2}},[t._v("\n\t\t\t\t\t\t项目阶段:\n\t\t\t\t\t")]),a("el-col",{attrs:{span:20}},[t._l(t.addData.moments,function(e,s){return a("el-row",{key:s,staticClass:"mt-1"},[a("el-col",{attrs:{span:2}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.momentName,expression:"item.momentName"}],staticClass:"mt-2 ",attrs:{placeholder:"请输入内容 "},domProps:{value:e.momentName},on:{input:function(a){a.target.composing||t.$set(e,"momentName",a.target.value)}}})]),a("el-col",{staticClass:"text-center mt-1 ml-1",attrs:{span:1}},[a("a",[t._v("- -")])]),a("el-col",{attrs:{span:20}},[a("el-row",[a("el-col",{staticClass:"mt-1",attrs:{span:3}},[t._v("\n\t\t\t\t\t\t\t\t\t\t预计结束时间:\n\t\t\t\t\t\t\t\t\t")]),a("el-col",{attrs:{span:8}},[a("el-date-picker",{staticClass:"select_css mt-1",attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:e.expectFinishTime,callback:function(a){t.$set(e,"expectFinishTime",a)},expression:"item.expectFinishTime"}})],1),a("el-col",{staticClass:"mt-1",attrs:{offset:1,span:2}},[t._v("\n\t\t\t\t\t\t\t\t\t\t阶段描述:\n\t\t\t\t\t\t\t\t\t")]),a("el-col",{attrs:{span:7}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.momentDesc,expression:"item.momentDesc"}],staticClass:"mt-1 ",attrs:{placeholder:"请输入内容 "},domProps:{value:e.momentDesc},on:{input:function(a){a.target.composing||t.$set(e,"momentDesc",a.target.value)}}})]),a("el-col",{staticClass:" text-center mt-1",attrs:{span:1}},[a("i",{staticClass:"el-icon-remove-outline  cursor",attrs:{title:"删除"},on:{click:function(e){t.deleteState(s)}}})])],1),a("el-row",{staticClass:"mt-1 "},[a("el-col",{staticClass:" text-right mt-3",attrs:{span:2}},[t._v("\n\t\t\t\t\t\t\t\t\t\t文档：\n\t\t\t\t\t\t\t\t\t")]),a("el-col",{attrs:{span:17}},t._l(e.documents,function(e,o){return a("el-row",{key:o,staticClass:"mt-1 ml-2 mb-2"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:4}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(o+1)+".文档名称：\n\t\t\t\t\t\t\t\t\t\t\t")]),a("el-col",{attrs:{span:8}},[a("el-input",{staticClass:"select_css",attrs:{placeholder:"请输入文档名称"},model:{value:e.docName,callback:function(a){t.$set(e,"docName",a)},expression:"item1.docName"}})],1),a("el-col",{staticClass:"mt-2 text-right",attrs:{span:4}},[t._v("文档类型：")]),a("el-col",{attrs:{span:5}},[a("el-select",{staticClass:"select_css mt-2",attrs:{placeholder:""},model:{value:e.docType,callback:function(a){t.$set(e,"docType",a)},expression:"item1.docType"}},t._l(t.document_type,function(t){return a("el-option",{key:t.value,attrs:{label:t.type_name,value:t.value}})}),1)],1),a("el-col",{staticClass:" text-center mt-1",attrs:{span:1}},[a("i",{staticClass:"el-icon-remove-outline  cursor",on:{click:function(e){t.deleteDocument(s)}}})])],1)}),1),a("el-col",{staticClass:"text-center mt-1",attrs:{span:3}},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.addDocument(s)}}},[t._v("添加")])],1)],1)],1)],1)}),a("el-row",{staticClass:"mt-2"},[a("el-col",{attrs:{span:21}},[a("button",{staticClass:"btn cursor",on:{click:function(e){t.addStateFun()}}},[t._v(" + 添加")])])],1)],2)],1):t._e(),a("el-row",{staticClass:"mt-3"},[a("el-col",{attrs:{span:2,offset:2}},[t._v("\n\t\t\t\t\t\t项目介绍：\n\t\t\t\t\t")]),a("el-col",{attrs:{span:12}},[a("el-input",{staticClass:"select_css",attrs:{type:"textarea",rows:6,placeholder:"请输入内容"},model:{value:t.addData.projectDesc,callback:function(e){t.$set(t.addData,"projectDesc",e)},expression:"addData.projectDesc"}})],1)],1),a("el-row",[a("el-col",{staticClass:"mt-3",attrs:{span:22,offset:2}},[a("div",{staticClass:"xuxian"})])],1),a("el-row",{staticClass:"mb-4"},[a("el-col",{staticClass:"mt-3 text-right",attrs:{span:8,offset:2}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addDataFun()}}},[t._v("提  交")])],1),a("el-col",{staticClass:"mt-3 text-center",attrs:{span:4,offset:2}},[a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.gotoIndex()}}},[t._v("返  回")])],1)],1)],1),a("el-aside",{staticStyle:{width:"7%"}})],1)],1)},Ae=[],Ie=a("a4bb"),Pe=a.n(Ie),Be=a("f499"),Ne=a.n(Be),Le={name:"addPro",components:{SvHeader:S},data:function(){return{options:[],document_type:[],directorsOption:[],delegatesOption:[],departmentOption:[],unitOption:[{name:"万",value:1e4,id:1}],monthOption:[{value:1,name:"1"},{value:2,name:"2"},{value:3,name:"3"},{value:4,name:"4"},{value:5,name:"5"},{value:6,name:"6"},{value:7,name:"7"},{value:8,name:"8"},{value:9,name:"9"},{value:10,name:"10"},{value:11,name:"11"},{value:12,name:"12"}],yearOption:[{value:0,name:"0"},{value:1,name:"1"},{value:2,name:"2"},{value:3,name:"3"},{value:4,name:"4"},{value:5,name:"5"},{value:6,name:"6"},{value:7,name:"7"},{value:8,name:"8"},{value:9,name:"9"},{value:10,name:"10"},{value:11,name:"11"},{value:12,name:"12"},{value:13,name:"13"},{value:14,name:"14"},{value:15,name:"15"},{value:16,name:"16"},{value:17,name:"17"},{value:18,name:"18"},{value:19,name:"19"},{value:20,name:"20"}],isOption:[{value:0,name:"否"},{value:1,name:"是"}],weekOption:[{value:0,name:"0"},{value:1,name:"1"},{value:2,name:"2"},{value:3,name:"3"},{value:4,name:"4"},{value:5,name:"5"},{value:6,name:"6"},{value:7,name:"7"}],projectBudgetUnit:1e4,supervisionAmountUnit:1e4,supervisionPaidUnit:1e4,buildDurationYear:0,buildDurationMonth:1,serviceDurationYear:0,serviceDurationMonth:1,addData:{projectName:"",projectCode:"",client:"",clientContact:"",contractor:"",agreementTime:new Date,buildDuration:1,serviceDuration:1,isResident:0,projectBudget:null,supervisionAmount:null,supervisionPaid:null,department:"",partner:"",projectDirector:"",delegate:"",projectType:0,notResidentWeekDays:0,moments:[{momentName:"项目立项",momentDesc:"",expectFinishTime:"",momentOrder:0,documents:[{momentId:0,docName:"",docType:""}]}],projectDesc:"",group_member:[{id:0,member_name:"123"}]},project_stage:"",isCustom:!1}},methods:{addDataFun:function(){var t=this;if(console.log(E(new Date(this.addData.agreementTime),"yyyy-MM-dd hh:mm:ss")),this.addData.supervisionPaid*this.supervisionPaidUnit>=this.addData.supervisionAmount*this.supervisionAmountUnit)this.$alert("已付监理费不能大于等于监理费用","提示");else{for(var e in this.addData)if(2==this.addData.projectType){if(""==this.addData[e]&&0!=this.addData.moments.length&&"isResident"!=e&&"projectBudget"!=e&&"supervisionAmount"!=e&&"supervisionPaid"!=e&&"notResidentWeekDays"!=e)return void this.$alert("请填入完整信息","提示",{confirmButtonText:"确定",callback:function(t){}})}else if(""==this.addData[e]&&"projectType"!=e&&"isResident"!=e&&"projectBudget"!=e&&"supervisionAmount"!=e&&"supervisionPaid"!=e&&"notResidentWeekDays"!=e)return void this.$alert("请填入完整信息","提示",{confirmButtonText:"确定",callback:function(t){}});var a=new URLSearchParams;a.append("projectName",this.addData.projectName),a.append("projectCode",this.addData.projectCode),a.append("client",this.addData.client),a.append("clientContact",this.addData.clientContact),a.append("contractor",this.addData.contractor),a.append("buildDuration",12*this.buildDurationYear+this.buildDurationMonth),a.append("serviceDuration",12*this.serviceDurationYear+this.serviceDurationMonth),a.append("isResident",this.addData.isResident),a.append("agreementTime",E(new Date(this.addData.agreementTime),"yyyy-MM-dd hh:mm:ss")),a.append("projectBudget",this.addData.projectBudget*this.projectBudgetUnit),a.append("supervisionAmount",this.addData.supervisionAmount*this.supervisionAmountUnit),a.append("supervisionPaid",this.addData.supervisionPaid*this.supervisionPaidUnit),a.append("department",this.addData.department),a.append("personCharge",this.addData.partner),a.append("projectDirector",this.addData.projectDirector),a.append("delegate",this.addData.delegate),a.append("projectType",this.addData.projectType),a.append("projectDesc",this.addData.projectDesc),a.append("notResidentWeekDays",this.addData.notResidentWeekDays),2==this.addData.projectType&&a.append("moments",Ne()(this.addData.moments)),console.log(a),this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"post",url:2!=this.addData.projectType?"project/build":"project/build_custom",data:a}).then(function(e){200==e.data.state?(t.$alert("添加成功","提示",{confirmButtonText:"确定",callback:function(t){}}),t.$router.push("/index")):t.$alert("错误！！："+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(e){t.$alert("错误！！："+e,"提示",{confirmButtonText:"确定",callback:function(t){}})})}},addStateFun:function(){var t={momentName:"项目立项",momentDesc:"",expectFinishTime:"",momentOrder:this.addData.moments[this.addData.moments.length-1].momentOrder+1,documents:[{momentId:this.addData.moments.length,docName:"",docType:""}]};this.$set(this.addData.moments,Pe()(this.addData.moments).length,t)},addDocument:function(t){var e={momentId:this.addData.moments.length,docName:"",docType:""};this.$set(this.addData.moments[t].documents,this.addData.moments[t].documents.length,e)},deleteDocument:function(t){this.addData.moments[t].documents.length<=1?this.$alert("项目文档为必填","提示",{confirmButtonText:"确定",callback:function(t){}}):this.$delete(this.addData.moments[t].documents,t)},deleteState:function(t){Pe()(this.addData.moments).length<=1?this.$alert("项目阶段为必填","提示",{confirmButtonText:"确定",callback:function(t){}}):this.$delete(this.addData.moments,t)},selectChange:function(){2==this.addData.projectType?this.isCustom=!0:this.isCustom=!1},getProType:function(){var t=this;this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"get",url:"project/types_list"}).then(function(e){if(200==e.data.state){var a=!0,s=!1,o=void 0;try{for(var n,i=C()(e.data.data);!(a=(n=i.next()).done);a=!0){var l=n.value,r={value:l.typeId,project_type:l.typeName};t.options.push(r)}}catch(c){s=!0,o=c}finally{try{a||null==i.return||i.return()}finally{if(s)throw o}}}else t.$alert("错误！！："+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(e){t.$alert("错误！！："+e,"提示",{confirmButtonText:"确定",callback:function(t){}})})},getDocType:function(){var t=this;this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"get",url:"document/types_list"}).then(function(e){if(200==e.data.state){var a=!0,s=!1,o=void 0;try{for(var n,i=C()(e.data.data.list);!(a=(n=i.next()).done);a=!0){var l=n.value,r={value:l.docTypeId,type_name:l.docTypeName};t.document_type.push(r)}}catch(c){s=!0,o=c}finally{try{a||null==i.return||i.return()}finally{if(s)throw o}}}else t.$alert("错误！！："+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})})},getDirectors:function(){var t=this;this.directorsOption=[],this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"get",url:"project/directors"}).then(function(e){if(200==e.data.state){var a=!0,s=!1,o=void 0;try{for(var n,i=C()(e.data.data);!(a=(n=i.next()).done);a=!0){var l=n.value,r={id:l.id,userRealname:l.userRealname};t.directorsOption.push(r)}}catch(c){s=!0,o=c}finally{try{a||null==i.return||i.return()}finally{if(s)throw o}}}else t.$alert("错误！！："+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(e){t.$alert("错误！！："+e,"提示",{confirmButtonText:"确定",callback:function(t){}})})},gotoIndex:function(){this.$router.push({path:"/index"})},getdelegatesOption:function(){var t=this;this.delegatesOption=[],this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"get",url:"project/delegates"}).then(function(e){if(200==e.data.state){var a=!0,s=!1,o=void 0;try{for(var n,i=C()(e.data.data);!(a=(n=i.next()).done);a=!0){var l=n.value,r={id:l.id,userRealname:l.userRealname};t.delegatesOption.push(r)}}catch(c){s=!0,o=c}finally{try{a||null==i.return||i.return()}finally{if(s)throw o}}}else t.$alert("错误！！："+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(e){t.$alert("错误！！："+e,"提示",{confirmButtonText:"确定",callback:function(t){}})})},getdepartmentOption:function(){var t=this;this.departmentOption=[],this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"get",url:"project/all_departments"}).then(function(e){if(200==e.data.state){var a=!0,s=!1,o=void 0;try{for(var n,i=C()(e.data.data);!(a=(n=i.next()).done);a=!0){var l=n.value,r={id:l.id,department:l.department};t.departmentOption.push(r)}}catch(c){s=!0,o=c}finally{try{a||null==i.return||i.return()}finally{if(s)throw o}}}else t.$alert("错误！！："+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(e){t.$alert("错误！！："+e,"提示",{confirmButtonText:"确定",callback:function(t){}})})}},mounted:function(){this.getdepartmentOption(),this.getdelegatesOption(),this.getDirectors(),this.getProType(),this.getDocType()}},Re=Le,Oe=(a("b61c"),Object(p["a"])(Re,Te,Ae,!1,null,"87e64e62",null)),Ue=Oe.exports,Ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"documentList"},[a("SvHeader",{attrs:{menuIndex:"2.1"}}),a("el-container",[a("div",{staticStyle:{"z-index":"5"}},[a("transition",{attrs:{name:"fade"}},[t.isAdd?a("SvAddDocument",{on:{closeAdd:function(e){t.closeAdd()}}}):t._e()],1)],1),a("el-aside",{staticStyle:{width:"3%"}}),a("el-main",{staticClass:"bg"},[a("el-row",[a("el-col",{staticClass:"mt-2 text-left",attrs:{span:2}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-back",circle:""},on:{click:function(e){t.back()}}})],1),a("el-col",{staticClass:"mt-2 text-left",attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showAdd()}}},[t._v("创建文档")])],1),a("el-col",{staticClass:"text-center",attrs:{span:14}},[a("h1",[t._v("文档记录列表")])]),a("el-col",{staticClass:"text-center mt-4",attrs:{span:2}},[t._v("\n                    搜索\n                ")]),a("el-col",{staticClass:"text-center mt-2",attrs:{span:4}},[a("el-select",{staticClass:"w100",on:{change:function(e){t.searchFun()}},model:{value:t.searchChose,callback:function(e){t.searchChose=e},expression:"searchChose"}},t._l(t.searchOption,function(t){return a("el-option",{key:t.id,attrs:{label:t.moment,value:t.id}})}),1)],1)],1),a("el-row",{staticClass:"mt-2"},[a("el-col",{attrs:{span:24}},[a("el-table",{staticClass:"tborder w100",attrs:{data:t.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{label:"文档编号"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.fileCode))])]}}])}),a("el-table-column",{attrs:{label:"文档名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.docName))])]}}])}),a("el-table-column",{attrs:{label:"文档类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.docType))])]}}])}),a("el-table-column",{attrs:{label:"提交人员"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.upload_per?a("span",[t._v(t._s(e.row.upload_per))]):t._e(),e.row.upload_per?t._e():a("span",[t._v("未提交")])]}}])}),a("el-table-column",{attrs:{label:"提交时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"el-icon-time"}),e.row.upload_per?a("span",{staticClass:"ml-4"},[t._v(t._s(e.row.upload_time))]):t._e(),e.row.upload_per?t._e():a("span",{staticClass:"ml-4"},[t._v("未提交")])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-row",{staticClass:"mt-4"},[a("el-col",{attrs:{span:22}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.documentDetail(e.$index,e.row)}}},[a("i",{staticClass:"el-icon-search"}),t._v(" 查看")])],1)],1),a("el-row",{staticClass:"mt-4"},[a("el-col",{attrs:{span:22}},[a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){t.downLoadFile(e.row.fileCode)}}},[a("i",{staticClass:"fa fa-download"}),t._v(" 下载")])],1)],1),a("el-row",{staticClass:"mt-4"},[a("el-col",{attrs:{span:22}},[a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){t.downLoadTemplate(e.row.docType)}}},[a("i",{staticClass:"fa fa-download"}),t._v(" 下载模板")])],1)],1),a("el-row",{staticClass:"mt-4"},[a("el-col",{attrs:{span:22}},[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.deleteDoc(e.row.fileCode)}}},[a("i",{staticClass:"el-icon-circle-close-outline"}),t._v(" 删除")])],1)],1)]}}])})],1)],1)],1),a("el-row",{staticClass:"mt-4"},[a("el-col",{staticClass:"text-right"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.totalPage,"pager-count":11,"page-size":t.pageSize,"current-page":t.curentPage},on:{"update:currentPage":function(e){t.curentPage=e},"current-change":t.getDocument}})],1)],1)],1),a("el-aside",{staticStyle:{width:"3%"}})],1)],1)},Fe=[],Me=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addDocument"},[a("div",{staticClass:"bg-model",attrs:{id:"bg-model"}},[a("div",{staticClass:"bg-content"},[a("el-container",[a("el-main",[a("el-row",{staticClass:"mt-4"},[a("el-col",{attrs:{span:22,offset:1}},[a("a",{staticClass:"head-css"},[t._v("创建文档")])])],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:5}},[a("a",{staticClass:"title-css"},[t._v("项目名称：")])]),a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{readonly:""},model:{value:t.addData.projectName,callback:function(e){t.$set(t.addData,"projectName",e)},expression:"addData.projectName"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:5}},[a("a",{staticClass:"title-css"},[t._v("项目阶段：")])]),a("el-col",{attrs:{span:16}},[a("el-select",{staticClass:"w100 ",model:{value:t.addData.momentId,callback:function(e){t.$set(t.addData,"momentId",e)},expression:"addData.momentId"}},t._l(t.option,function(t){return a("el-option",{key:t.id,attrs:{label:t.moment,value:t.id}})}),1)],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:5}},[a("a",{staticClass:"title-css"},[t._v("文档名称：")])]),a("el-col",{attrs:{span:16}},[a("el-input",{model:{value:t.addData.docName,callback:function(e){t.$set(t.addData,"docName",e)},expression:"addData.docName"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:5}},[a("a",{staticClass:"title-css"},[t._v("文档类型：")])]),a("el-col",{attrs:{span:16}},[a("el-input",{model:{value:t.addData.docType,callback:function(e){t.$set(t.addData,"docType",e)},expression:"addData.docType"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:5}},[a("a",{staticClass:"title-css"},[t._v("文档代码：")])]),a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{type:"textarea",rows:4},model:{value:t.addData.fileCode,callback:function(e){t.$set(t.addData,"fileCode",e)},expression:"addData.fileCode"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:5}},[a("a",{staticClass:"title-css"},[t._v("文档文件：")])]),a("el-col",{attrs:{span:16}},[a("input",{staticClass:"cursor mt-1",staticStyle:{position:"absolute",opacity:"0"},attrs:{type:"file",id:"fileData"},on:{change:function(e){t.handlerUpload(e)}}}),a("el-button",{staticClass:"mt-2",attrs:{type:"primary",size:"mini"}},[a("i",{staticClass:"el-icon-plus"}),t._v(" 添加")]),t._v("\n                             "+t._s(t.fileList)+"\n                        ")],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{attrs:{span:7,offset:4}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"primary"},on:{click:function(e){t.submitData()}}},[t._v("提交")])],1),a("el-col",{attrs:{span:7,offset:2}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"info",plain:""},on:{click:function(e){t.close()}}},[t._v("取消")])],1)],1)],1)],1)],1)])])},ze=[],He={name:"addDocument",data:function(){return{addData:{projectId:sessionStorage.projectId,projectName:"",momentId:"",docName:"",fileCode:"",docType:"",file:""},fileList:"",option:[]}},methods:{close:function(){this.$emit("closeAdd","")},getOption:function(){var t=this,e=new URLSearchParams;e.append("projectId",this.addData.projectId),this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"post",url:"project/process",data:e}).then(function(e){if(200==e.data.state){var a=!0,s=!1,o=void 0;try{for(var n,i=C()(e.data.data.moments);!(a=(n=i.next()).done);a=!0){var l=n.value,r={id:l.id,moment:l.momentName};t.option.push(r)}}catch(c){s=!0,o=c}finally{try{a||null==i.return||i.return()}finally{if(s)throw o}}}else t.$alert("错误！！："+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}}),t.close()}).catch(function(e){t.$alert("错误！！："+e,"提示",{confirmButtonText:"确定",callback:function(t){}})})},getProDettail:function(){var t=this,e=new URLSearchParams;e.append("projectId",sessionStorage.projectId),this.$axios.post("/project/detail",e).then(function(e){t.addData.projectName=e.data.data.projectName})},submitData:function(){var t=this;for(var e in this.addData)if(""==this.addData[e])return void this.$alert("请填写必要项",{confirmButtonText:"确定",callback:function(t){}});var a=new FormData;a.append("projectId",this.addData.projectId),a.append("momentId",this.addData.momentId),a.append("docName",this.addData.docName),a.append("fileCode",this.addData.fileCode),a.append("docType",this.addData.docType),a.append("file",this.addData.file),this.$axios.post("document/build",a).then(function(e){200==e.data.state?(t.$alert("添加成功","提示",{confirmButtonText:"确定",callback:function(t){}}),t.close()):t.$alert("错误！！"+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})})},handlerUpload:function(t){console.log(t),this.addData.file=t.target.files[0],this.fileList=t.target.value}},mounted:function(){this.getOption(),this.getProDettail()}},We=He,Ve=(a("0bbf"),Object(p["a"])(We,Me,ze,!1,null,"6060913b",null)),Ze=Ve.exports,Ye={name:"documentList",components:{SvHeader:S,SvAddDocument:Ze},data:function(){return{tableData:[],pageSize:5,totalPage:100,curentPage:1,projectId:"",isAdd:!1,searchOption:[],searchChose:-1,allDataBuffer:""}},methods:{getDocument:function(){var t=this;this.tableData=[];var e=new URLSearchParams;e.append("projectId",this.projectId),e.append("page",this.curentPage),e.append("pageSize",this.pageSize),this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"post",url:"document/list",data:e}).then(function(e){if(200==e.data.state){t.totalPage=e.data.data.total;var a=!0,s=!1,o=void 0;try{for(var n,i=C()(e.data.data.list);!(a=(n=i.next()).done);a=!0){var l=n.value,r={docName:l.docName,docState:l.docState,docType:l.docType,fileCode:l.id,upload_per:l.workCode,upload_time:E(new Date(l.uploadTime),"yyyy-MM-dd hh:mm")};t.tableData.push(r)}}catch(c){s=!0,o=c}finally{try{a||null==i.return||i.return()}finally{if(s)throw o}}}else t.$alert("错误！！："+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(e){t.$alert("错误！！："+e,"提示",{confirmButtonText:"确定",callback:function(t){}})})},deleteDoc:function(t){var e=this;if(confirm("是否删除")){var a=new URLSearchParams;a.append("docId",t),this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"post",url:"document/delete",data:a}).then(function(t){200==t.data.state?e.getDocument():e.$alert("错误！！："+t.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(t){e.$alert("错误！！："+t,"提示",{confirmButtonText:"确定",callback:function(t){}})})}},getOption:function(){var t=this;this.searchOption=[{id:-1,moment:"全部"}];var e=new URLSearchParams;e.append("projectId",sessionStorage.projectId),this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"post",url:"project/process",data:e}).then(function(e){if(200==e.data.state){var a=!0,s=!1,o=void 0;try{for(var n,i=C()(e.data.data.moments);!(a=(n=i.next()).done);a=!0){var l=n.value,r={id:l.id,moment:l.momentName};t.searchOption.push(r)}}catch(c){s=!0,o=c}finally{try{a||null==i.return||i.return()}finally{if(s)throw o}}}else t.$alert("错误！！："+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}}),t.close()})},searchFun:function(){var t=this;if(""!=this.searchChose)if(-1!=this.searchChose){this.tableData=[];var e=new URLSearchParams;e.append("momentId",this.searchChose),this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"post",url:"document/moment_list",data:e}).then(function(e){if(200==e.data.state){t.totalPage=1;var a=!0,s=!1,o=void 0;try{for(var n,i=C()(e.data.data);!(a=(n=i.next()).done);a=!0){var l=n.value,r={docName:l.docName,docState:l.docState,docType:l.docType,fileCode:l.id,upload_per:l.workCode,upload_time:E(new Date(l.uploadTime),"yyyy-MM-dd hh:mm")};t.tableData.push(r)}}catch(c){s=!0,o=c}finally{try{a||null==i.return||i.return()}finally{if(s)throw o}}}else t.$alert("错误！！："+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})})}else this.getDocument()},back:function(){this.$router.back()},downLoadFile:function(t){window.open(f.svUrl+"document/download?docId="+t)},downLoadTemplate:function(t){window.open(f.svUrl+"document/template_download?templateName="+t)},showAdd:function(){this.isAdd=!0},closeAdd:function(){this.isAdd=!1}},mounted:function(){this.projectId=sessionStorage.projectId,this.getDocument(),this.getOption()}},Je=Ye,Ke=(a("d119"),Object(p["a"])(Je,Ee,Fe,!1,null,"2a25343b",null)),Ge=Ke.exports,qe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"stateDetail"},[a("sv-header",{attrs:{menuIndex:"2.1"}}),a("el-container",[a("el-aside",{staticStyle:{width:"3%"}}),a("el-main",[a("div",{staticClass:"top-wrapper add_topWrap clearfix"},[a("span",{staticClass:"add_title"},[t._v("项目名称："+t._s(t.projBasicInfo.projName))]),a("transition",{attrs:{name:"extra-menu"}},[a("ul",{staticClass:"links "},[a("li",{on:{click:function(e){t.toPage("/project-team")}}},[t._v("团队成员")]),a("li",{on:{click:function(e){t.toPage("/daily")}}},[t._v("日志")]),a("li",{on:{click:function(e){t.toPage("/pro-cost")}}},[t._v("成本")])])]),a("el-button",{staticClass:"add_back",on:{click:function(e){t.back()}}},[a("b",[t._v("返回")])])],1),a("div",{staticClass:"add_detailCont"},[a("span",{staticClass:"sub-title add_subTitle"},[t._v("项目基本信息")]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingBasic,expression:"loadingBasic"}],staticClass:"proj-basic clearfix"},[a("div",{staticClass:"proj-desc add_referral clearfix"},[a("span",{staticClass:"add_xmjs"},[t._v("项目介绍：")]),a("p",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingDesc,expression:"loadingDesc"}]},[t._v(t._s(t.projBasicInfo.projDesc))])]),a("div",{staticClass:"add_detailLeft clearfix"},[a("p",{staticClass:"clearfix"},[a("span",[t._v("项目总监：")]),a("span",[t._v(t._s(t.projTeam.projDirector))])]),a("p",{staticClass:"clearfix"},[a("span",[t._v("总监代表：")]),a("span",[t._v(t._s(t.projTeam.delegate))])]),a("p",{staticClass:"clearfix"},[a("span",[t._v("商务代表：")]),a("span",[t._v(t._s(t.projBasicInfo.personCharge))])])]),a("div",{staticClass:"add_detailMiddle clearfix"},[a("p",{staticClass:"clearfix"},[a("span",[t._v("当前成本：")]),a("span",{staticClass:"val"},[t._v(t._s(t.projBasicInfo.projCost))])]),a("p",{staticClass:"clearfix"},[a("span",[t._v("预定工期：")]),a("span",{staticClass:"val"},[t._v(t._s(t.projBasicInfo.buildDuration))])]),a("p",{staticClass:"clearfix"},[a("span",[t._v("当前进度：")]),a("el-progress",{staticClass:"prog-bar add_prog",attrs:{percentage:t.projBasicInfo.prog}})],1)]),a("div",{staticClass:"add_detailRight"},[a("p",{staticClass:"clearfix"},[a("span",[t._v("合同签订时间：")]),a("span",{staticClass:"val"},[t._v(t._s(t.projBasicInfo.agreementTime))])]),a("p",{staticClass:"add_multi_name clearfix"},[a("span",[t._v("监理人员：")]),a("span",[t._v(t._s(t.projTeam.members))])])])]),a("el-row",[a("el-col",{attrs:{span:4}},[a("span",{staticClass:"sub-title"},[t._v("项目阶段信息")])]),a("el-col",{staticClass:"mt-3 add_phase",attrs:{span:4}},[a("span",[a("el-button",{staticClass:"add_round",attrs:{type:"primary",size:"small",plain:"",round:""},on:{click:function(e){t.showAddState()}}},[t._v("添加阶段")])],1)])],1),t.body?a("div",{staticClass:"add_stateFont"},t._l(t.stateListData,function(e,s){return a("div",{key:s,staticClass:"mt-4 mb-4"},[a("el-row",{staticClass:"mt-2 cursor "},[a("el-col",{attrs:{offset:1,span:22}},[a("div",{on:{click:function(e){t.showItem(s)}}},[a("el-row",{staticClass:"bor_bottom rowCss"},[a("el-col",{attrs:{span:23}},[a("a",{staticClass:"state_name"},[t._v(t._s(s+1)+"、"+t._s(e.momentName))])]),a("el-col",{attrs:{span:1}},[e.is_show?t._e():a("i",{staticClass:"el-icon-arrow-right"}),e.is_show?a("i",{staticClass:"el-icon-arrow-down"}):t._e()])],1)],1)])],1),a("transition",{attrs:{name:"el-fade-in"}},[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.is_show,expression:"item.is_show"}],staticClass:"mt-3 "},[a("el-col",{attrs:{offset:1,span:22}},[a("div",{staticClass:"add_bor"},[a("el-row",[a("el-col",{staticClass:"ml-1 ",staticStyle:{width:"100px"}},[a("p",[t._v("阶段文档提交：")])]),a("el-col",{staticClass:"ml-1 mt-1",attrs:{span:10}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){t.showAddTemplate(e)}}},[t._v("添加阶段文档")])],1)],1),t._l(e.documentList,function(e,o){return a("el-row",{key:o},[a("div",{on:{click:function(e){t.showdocItem(s,o)}}},[a("el-col",{staticClass:"bor_css"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("p",{staticClass:"add_cost"},[t._v(t._s(e.docName)+"（"+t._s(e.docType)+"）")])]),a("el-col",{staticClass:"text-left add_ml",attrs:{span:2}},[a("input",{staticClass:"cursor mt-1",staticStyle:{position:"absolute",opacity:"0",width:"70px",height:"100%","font-size":"0"},attrs:{type:"file",id:"fileData"},on:{change:function(a){t.handlerUpload(a,e.id)}}}),a("p",[a("el-button",{staticStyle:{cursor:"pointer"},attrs:{type:"primary",size:"mini"}},[a("i",{staticClass:"el-icon-plus"}),t._v(" 上传")])],1)]),a("el-col",{staticClass:"text-center",attrs:{span:2}},[a("p",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.updateDoc(e.id)}}},[a("i",{staticClass:"el-icon-edit"}),t._v(" 修改")])],1)]),a("el-col",{staticClass:"text-center",attrs:{span:3}},[a("p",[a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){t.downLoadTemplate(e.docType)}}},[a("i",{staticClass:"fa fa-download"}),t._v(" 下载模板")])],1)]),a("el-col",{staticClass:"text-right add_jt",attrs:{span:1}},[e.is_show?t._e():a("i",{staticClass:"el-icon-arrow-right font25"}),e.is_show?a("i",{staticClass:"el-icon-arrow-down font25"}):t._e()])],1)],1)],1),e.is_show?a("el-col",[t._l(e.documents,function(e,s){return a("div",{key:s},["0"!=e.docState&&"2"!=e.docState?a("el-row",[a("el-col",{staticClass:"bor_css1 "},[a("el-row",[a("el-col",{attrs:{span:4,offset:1}},[a("p",[t._v(t._s(e.wholeName))])]),"1"==e.docState?a("div",[a("el-col",{staticClass:"text-center",attrs:{span:2}},[a("p",[t._v("提交人：")])]),a("el-col",{attrs:{span:2}},[a("p",[t._v(t._s(e.uploaderName))])]),a("el-col",{staticClass:"text-center",attrs:{span:2}},[a("p",[t._v("提交于：")])]),a("el-col",{attrs:{span:4}},[a("p",[t._v(t._s(e.uploadTime))])]),a("el-col",{staticClass:"text-center",attrs:{span:2}},[a("p",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.updateDoc(e.id)}}},[a("i",{staticClass:"el-icon-edit"}),t._v(" 修改")])],1)]),a("el-col",{staticClass:"text-center",attrs:{span:2}},[a("p",[a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){t.downLoadFile(e.id)}}},[a("i",{staticClass:"fa fa-download"}),t._v(" 下载")])],1)]),a("el-col",{staticClass:"text-center",attrs:{span:2}},[a("p",[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){t.confirmDelete(e.id)}}},[a("i",{staticClass:"el-icon-circle-close-outline"}),t._v(" 删除")])],1)])],1):t._e()],1)],1)],1):t._e()],1)}),0==e.documents.length?a("el-row",[a("el-col",{staticClass:"bor_css1  text-center "},[a("p",[t._v("无")])])],1):t._e()],2):t._e()],1)})],2)])],1)],1)],1)}),0):t._e(),a("el-row",[a("el-col",{staticClass:"text-right",attrs:{span:23}},[a("span",{staticClass:"add_btn add_btnstart",on:{click:function(e){t.confirm("start")}}},[t._v("启动")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.backupProj()}}},[t._v("项目归档")]),a("span",{staticClass:"add_btn add_btnclose",on:{click:function(e){t.confirm("close")}}},[t._v("关闭")])],1)],1),t.body?t._e():a("sv-placeholder",{directives:[{name:"loading",rawName:"v-loading",value:!0,expression:"true"}]})],1)]),a("el-aside",{staticStyle:{width:"3%"}})],1),t.isAddStateShow?a("div",[a("SvAddState",{on:{closeAddState:function(e){t.closeAddState()},closeWithoutReflash:function(e){t.closeWithoutReflash()}}})],1):t._e(),t.isAddTemplateShow?a("div",[a("SvAddDocumentTemplate",{attrs:{projectId:t.projectId,momentId:t.addMomentId,maxAddDocTemLength:t.maxAddDocTemLength},on:{closeAddTemplate:function(e){t.closeAddTemplate()},closeWithoutReflash:function(e){t.closeWithoutReflash()}}})],1):t._e()],1)},Qe=[],Xe=(a("3022"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addState"},[a("div",{staticClass:"bg-model",attrs:{id:"bg-model"}},[a("div",{staticClass:"bg-content"},[a("el-container",[a("el-main",[a("el-row",{staticClass:"mt-4"},[a("el-col",{attrs:{span:22,offset:1}},[a("a",{staticClass:"head-css"},[t._v("添加阶段")])])],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:5}},[a("a",{staticClass:"title-css"},[t._v("项目名称：")])]),a("el-col",{attrs:{span:17}},[a("el-input",{attrs:{readonly:""},model:{value:t.addData.projectName,callback:function(e){t.$set(t.addData,"projectName",e)},expression:"addData.projectName"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:5}},[a("a",{staticClass:"title-css"},[t._v("阶段名称：")])]),a("el-col",{attrs:{span:17}},[a("el-input",{model:{value:t.addData.momentName,callback:function(e){t.$set(t.addData,"momentName",e)},expression:"addData.momentName"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:5}},[a("a",{staticClass:"title-css"},[t._v("阶段顺序：")])]),a("el-col",{attrs:{span:17}},[a("el-input",{model:{value:t.addData.maxOrder,callback:function(e){t.$set(t.addData,"maxOrder",e)},expression:"addData.maxOrder"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:5}},[a("a",{staticClass:"title-css"},[t._v("预计完成时间：")])]),a("el-col",{attrs:{span:10}},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:t.addData.time,callback:function(e){t.$set(t.addData,"time",e)},expression:"addData.time"}})],1)])],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:5}},[a("a",{staticClass:"title-css"},[t._v("阶段描述：")])]),a("el-col",{attrs:{span:17}},[a("el-input",{staticClass:"w100",attrs:{type:"textarea",placeholder:"请填入阶段描述信息（选填）"},model:{value:t.addData.desc,callback:function(e){t.$set(t.addData,"desc",e)},expression:"addData.desc"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:5}},[a("a",{staticClass:"title-css"},[t._v("阶段文档：")])]),a("el-col",{attrs:{span:17}},t._l(t.documentList,function(e,s){return a("el-row",{key:s},[a("el-col",{attrs:{span:6}},[a("el-select",{staticClass:"w100",on:{change:function(a){t.selectType(e.doctype,s)}},model:{value:e.doctype,callback:function(a){t.$set(e,"doctype",a)},expression:"item.doctype"}},t._l(t.docTypeOption,function(t){return a("el-option",{key:t.docTypeName,attrs:{label:t.docTypeName,value:t.docTypeName}})}),1)],1),a("el-col",{staticClass:"ml-2",attrs:{span:15}},[a("el-input",{attrs:{placeholder:"文档名称",disabled:""},model:{value:e.docName,callback:function(a){t.$set(e,"docName",a)},expression:"item.docName"}})],1),a("el-col",{staticClass:"mt-2 ml-1",attrs:{span:1}},[0==s?a("el-button",{attrs:{icon:"el-icon-plus",type:"primary",size:"small",circle:""},on:{click:function(e){t.pushInList()}}}):t._e(),0!=s?a("el-button",{attrs:{icon:"el-icon-minus",type:"danger",size:"small",circle:""},on:{click:function(e){t.deleteList(s)}}}):t._e()],1)],1)}),1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{attrs:{span:7,offset:4}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"primary"},on:{click:function(e){t.submitData()}}},[t._v("提交")])],1),a("el-col",{attrs:{span:7,offset:2}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"info",plain:""},on:{click:function(e){t.closeWithoutReflash()}}},[t._v("取消")])],1)],1)],1)],1)],1)])])}),ta=[],ea={name:"addState",data:function(){return{addData:{projectId:sessionStorage.projectId,projectName:"",time:new Date,momentName:"",desc:"",maxOrder:0},Unit:"(单位：元)",money:400,Halfmoney:0,documentList:[{docName:"",fileCode:"",docType:""}],option:[],docTypeOption:[]}},methods:(M={close:function(){this.$emit("closeAddState","")},closeWithoutReflash:function(){this.$emit("closeWithoutReflash","")},getDocTypeOption:function(){var t=this;this.$axios.get("document/types_list/").then(function(e){200==e.data.state&&(t.docTypeOption=e.data.data)})},submitData:function(){var t=this;if(""!=this.addData.amount){var e=new URLSearchParams;e.append("amount",this.addData.amount),e.append("projectId",this.projectId),e.append("momentId",this.addData.momentId),this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"post",url:"project/extra_cost_build",data:e}).then(function(e){200==e.data.state?(t.$alert("添加成功","提示",{confirmButtonText:"确定",callback:function(e){t.$message({type:"info",message:"action: ".concat(e)})}}),t.close()):t.$alert("错误！！："+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(e){t.$message({type:"info",message:"action: ".concat(e)})}})}).catch(function(e){t.$alert("错误！！："+e,"提示",{confirmButtonText:"确定",callback:function(e){t.$message({type:"info",message:"action: ".concat(e)})}})})}else this.$alert("请填写金额","提示",{confirmButtonText:"确定",callback:function(t){}})},getOption:function(){var t=this,e=new URLSearchParams;e.append("projectId",this.addData.projectId),this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"post",url:"project/process",data:e}).then(function(e){if(200==e.data.state){var a=!0,s=!1,o=void 0;try{for(var n,i=C()(e.data.data.moments);!(a=(n=i.next()).done);a=!0){var l=n.value;t.addData.maxOrder<l.momentOrder&&(t.addData.maxOrder=l.momentOrder)}}catch(r){s=!0,o=r}finally{try{a||null==i.return||i.return()}finally{if(s)throw o}}t.addData.maxOrder=t.addData.maxOrder+1}else t.$alert("错误！！："+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(e){t.$message({type:"info",message:"action: ".concat(e)})}}),t.close()}).catch(function(e){t.$alert("错误！！："+e,"提示",{confirmButtonText:"确定",callback:function(e){t.$message({type:"info",message:"action: ".concat(e)})}})})},getProDettail:function(){var t=this,e=new URLSearchParams;e.append("projectId",sessionStorage.projectId),this.$axios.post("/project/detail",e).then(function(e){t.addData.projectName=e.data.data.projectName})}},Object(J["a"])(M,"submitData",function(){var t=this,e=!0,a=!1,s=void 0;try{for(var o,n=C()(this.documentList);!(e=(o=n.next()).done);e=!0){var i=o.value;for(var l in i)if(""==i[l]&&"docType"!=l&&"fileCode"!=l&&"docName"!=l)return void this.$alert("请填写必要信息"+l,"提示",{confirmButtonText:"确定",callback:function(t){}})}}catch(d){a=!0,s=d}finally{try{e||null==n.return||n.return()}finally{if(a)throw s}}for(var r in this.addData)if(""==this.addData[r])return void this.$alert("请填写必要信息"+item1,"提示",{confirmButtonText:"确定",callback:function(t){}});var c=new URLSearchParams;c.append("projectId",this.addData.projectId),c.append("momentOrder",this.addData.maxOrder),c.append("momentDesc",this.addData.desc),c.append("expectFinishTime",E(new Date(this.addData.time),"yyyy-MM-dd hh:mm")),c.append("momentName",this.addData.momentName),c.append("documentStrings",Ne()(this.documentList)),this.$axios.post("/project/moment_build",c).then(function(e){200==e.data.state?(t.$alert("添加成功","提示",{confirmButtonText:"确定",callback:function(t){}}),t.close()):t.$alert("错误！！"+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})})}),Object(J["a"])(M,"pushInList",function(){var t={docName:"",fileCode:"",docType:""};this.$set(this.documentList,this.documentList.length,t)}),Object(J["a"])(M,"deleteList",function(t){this.$delete(this.documentList,t)}),Object(J["a"])(M,"selectType",function(t,e){var a=this,s=new FormData;s.append("templateName",t),this.$axios.post("document/template",s).then(function(t){200==t.data.state?a.documentList[e].docName=t.data.data.docTypeDesc:a.$alert(t.data.msg,"提示")})}),M),mounted:function(){this.getOption(),this.getProDettail(),this.getDocTypeOption()}},aa=ea,sa=(a("dca2"),Object(p["a"])(aa,Xe,ta,!1,null,"0dc83730",null)),oa=sa.exports,na=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"AddDocumentTemplate"},[a("div",{staticClass:"bg-model"},[a("div",{staticClass:"bg-content"},[a("el-container",[a("el-main",[a("el-row",{staticClass:"mt-4"},[a("el-col",{attrs:{span:22,offset:1}},[a("a",{staticClass:"head-css"},[t._v("添加文档模板")])])],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:4,offset:1}},[a("a",{staticClass:"title-css"},[t._v("文档类型：")])]),a("el-col",{attrs:{span:16}},[a("el-select",{staticClass:"w100 ",attrs:{filterable:""},on:{change:function(e){t.selectType()}},model:{value:t.addData.docType,callback:function(e){t.$set(t.addData,"docType",e)},expression:"addData.docType"}},t._l(t.docTypeOption,function(t){return a("el-option",{key:t.docTypeName,attrs:{label:t.docTypeName,value:t.docTypeName}})}),1)],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:4,offset:1}},[a("a",{staticClass:"title-css"},[t._v("文档名称：")])]),a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{disabled:""},model:{value:t.addData.docName,callback:function(e){t.$set(t.addData,"docName",e)},expression:"addData.docName"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:4,offset:1}},[a("a",{staticClass:"title-css"},[t._v("文档顺序：")])]),a("el-col",{attrs:{span:16}},[a("el-input",{model:{value:t.addData.orderMoment,callback:function(e){t.$set(t.addData,"orderMoment",e)},expression:"addData.orderMoment"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{attrs:{span:7,offset:4}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"primary"},on:{click:function(e){t.submitData()}}},[t._v("提交")])],1),a("el-col",{attrs:{span:7,offset:2}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"info",plain:""},on:{click:function(e){t.closeWithoutReflash()}}},[t._v("取消")])],1)],1)],1)],1)],1)])])},ia=[],la=(a("c5f6"),{name:"AddDocumentTemplate",props:{projectId:String,momentId:Number,maxAddDocTemLength:Number},data:function(){return{addData:{docName:"",fileCode:"",docType:"",orderMoment:0},docTypeOption:[]}},methods:{close:function(){this.addData.workTime="",this.$emit("closeAddTemplate","")},submitData:function(){var t=this;for(var e in this.addData)if(""==this.addData[e]&&"fileCode"!=e&&"docName"!=e)return void this.$alert("请填写必要信息"+e,"提示",{confirmButtonText:"确定",callback:function(t){}});var a=new URLSearchParams;a.append("momentId",this.momentId),a.append("projectId",this.projectId),a.append("docName",this.addData.docName),a.append("orderMoment",this.addData.orderMoment),a.append("fileCode",this.addData.fileCode),a.append("docType",this.addData.docType),this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"post",url:"document/create",data:a}).then(function(e){200==e.data.state?(t.$alert("添加成功","提示",{confirmButtonText:"确定",callback:function(t){}}),t.close()):t.$alert("错误！！："+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})})},getDocTypeOption:function(){var t=this;this.$axios.get("document/types_list/").then(function(e){200==e.data.state&&(t.docTypeOption=e.data.data)})},closeWithoutReflash:function(){this.$emit("closeWithoutReflash","")},selectType:function(){var t=this,e=new FormData;e.append("templateName",this.addData.docType),this.$axios.post("document/template",e).then(function(e){200==e.data.state?t.addData.docName=e.data.data.docTypeDesc:t.$alert(e.data.msg,"提示")})}},mounted:function(){this.addData.orderMoment=this.maxAddDocTemLength,this.getDocTypeOption()}}),ra=la,ca=(a("7a29"),Object(p["a"])(ra,na,ia,!1,null,"205b9f97",null)),da=ca.exports,ua={name:"stateDetail",components:{SvHeader:S,SvPlaceholder:tt,SvAddState:oa,SvAddDocumentTemplate:da},data:function(){return{showMenu:!1,projBasicInfo:{},projTeam:{},loadingBasic:!1,loadingDesc:!1,loadingTeam:!1,stateListData:[],allStateNum:0,body:!1,projectId:"",stating:"",isAddStateShow:!1,isAddTemplateShow:!1,addMomentId:0,maxAddDocTemLength:0}},methods:{handlerUpload:function(t,e){var a=this;console.log(t.target.files),console.log(e);var s=new FormData;s.append("id",e),s.append("file",t.target.files[0]),console.log(t.target.files[0]),this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3","Content-Type":"multipart/form-data"},method:"post",url:"document/upload",data:s}).then(function(t){200==t.data.state?(a.$alert("添加成功","提示",{confirmButtonText:"确定",callback:function(t){}}),a.getStateList()):(a.$alert("错误！！："+t.data.msg,"提示"),document.getElementById("fileData").value="")}).catch(function(t){a.$alert("错误！！："+t,"提示"),document.getElementById("fileData").value=""})},getStateList:function(t){for(var e=this,a=[],s=0;s<this.stateListData.length;s++)this.stateListData[s]["is_show"]&&1==this.stateListData[s]["is_show"]&&a.push(s);this.body=!1,this.stateListData=[];var o=new URLSearchParams;o.append("projectId",this.projectId),this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"post",url:"project/process",data:o}).then(function(t){if(200==t.data.state){e.allStateNum=t.data.data.momentsSize,e.stateListData=t.data.data.moments;var s=!0,o=!1,n=void 0;try{for(var i,l=C()(e.stateListData);!(s=(i=l.next()).done);s=!0){var r=i.value;1==r.state&&(e.stating=r.momentOrder),r.uploadTime&&e.$set(r,"uploadTime",E(new Date(r.uploadTime),"yyyy-MM-dd hh:mm")),r.startTime?e.$set(r,"startTime",E(new Date(r.startTime),"yyyy-MM-dd hh:mm")):e.$set(r,"startTime","未开始"),r.expectFinishTime?e.$set(r,"expectFinishTime",E(new Date(r.expectFinishTime),"yyyy-MM-dd hh:mm")):e.$set(r,"expectFinishTime",E(new Date,"yyyy-MM-dd hh:mm")),r.finishTime?e.$set(r,"finishTime",E(new Date(r.finishTime),"yyyy-MM-dd hh:mm")):e.$set(r,"finishTime","未结束");var c=!0,d=!1,u=void 0;try{for(var p,m=C()(r.documentList);!(c=(p=m.next()).done);c=!0){var f=p.value,h=!0,v=!1,g=void 0;try{for(var b,y=C()(f.documents);!(h=(b=y.next()).done);h=!0){var _=b.value;"uploadTime"in _&&(e.$set(_,"uploadTime",E(new Date(_.uploadTime),"yyyy-MM-dd hh:mm")),e.$set(f,"is_show",!1))}}catch(x){v=!0,g=x}finally{try{h||null==y.return||y.return()}finally{if(v)throw g}}}}catch(x){d=!0,u=x}finally{try{c||null==m.return||m.return()}finally{if(d)throw u}}if(0==a.length)e.$set(r,"is_show",!1);else for(var k=0;k<a.length;k++){var D=a[k];e.$set(e.stateListData[D],"is_show",!0)}}}catch(x){o=!0,n=x}finally{try{s||null==l.return||l.return()}finally{if(o)throw n}}console.log(a),Object(w["setTimeout"])(function(t){e.body=!0},500)}else e.$alert("错误！！："+t.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(t){e.$alert("错误！！："+t,"提示",{confirmButtonText:"确定",callback:function(t){}})})},showItem:function(t){this.$set(this.stateListData[t],"is_show",!this.stateListData[t].is_show)},showdocItem:function(t,e){this.$set(this.stateListData[t].documentList[e],"is_show",!this.stateListData[t].documentList[e].is_show)},confirmDelete:function(t){var e=this;this.$confirm("是否确认删除","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"删除",cancelButtonText:"取消"}).then(function(){e.deleteDoc(t)})},deleteDoc:function(t){var e=this,a=new URLSearchParams;a.append("docId",t),this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"post",url:"document/delete",data:a}).then(function(t){200==t.data.state?e.getStateList():e.$alert("错误！！："+t.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(t){e.$alert("错误！！："+t,"提示",{confirmButtonText:"确定",callback:function(t){}})})},back:function(){this.$router.push(sessionStorage.detailBackRouter)},stateStart:function(t,e){var a=this,s=new URLSearchParams;s.append("projectId",t),s.append("momentId",e),this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"post",url:"project/moment_start",data:s}).then(function(t){200==t.data.state?(a.$alert("开启成功","提示",{confirmButtonText:"确定",callback:function(t){}}),a.getStateList()):a.$alert("错误！！："+t.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(t){a.$alert("错误！！："+t,"提示",{confirmButtonText:"确定",callback:function(t){}})})},stateEnd:function(t,e){var a=this;if(confirm("是否继续结束该阶段")){var s=new URLSearchParams;s.append("projectId",t),s.append("momentId",e),this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"post",url:"project/moment_finish",data:s}).then(function(t){200==t.data.state?a.getStateList():a.$alert("错误！！："+t.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(t){a.$alert("错误！！："+t,"提示",{confirmButtonText:"确定",callback:function(t){}})})}},toPage:function(t){this.$router.push(t)},confirm:function(t){var e=this;"start"==t?this.$confirm("确认启动项目吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){e.startProj()}):this.$confirm("项目进度是否达到100%？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){return e.$confirm("项目是否已归档？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"})}).then(function(){e.closeProj()})},startProj:function(){var t=this,e=new URLSearchParams;e.append("projectId",sessionStorage.projectId),this.$axios({method:"post",url:"project/start",data:e}).then(function(e){if(f.checkError(t,e.data)){var a=e.data.data;"success"==a&&t.$message({message:"项目成功启动！",type:"success"})}}).catch(function(e){t.$message.error(e)})},closeProj:function(){var t=this,e=new URLSearchParams;e.append("projectId",sessionStorage.projectId),this.$axios({method:"post",url:"project/close",data:e}).then(function(e){if(f.checkError(t,e.data)){var a=e.data.data;"success"==a&&t.$message({message:"项目成功关闭！",type:"success"})}}).catch(function(e){t.$message.error(e)})},getProjBasicInfo:function(){var t=this;this.loadingBasic=!0,this.loadingDesc=!0,this.$axios.get("project/detail?projectId="+sessionStorage.projectId).then(function(e){console.log(e.data);var a=e.data.data;t.projBasicInfo.projName=a.projectName,t.projBasicInfo.agreementTime=null==a.agreementTime?"暂无数据":E(new Date(a.agreementTime),"yyyy.MM.dd"),t.projBasicInfo.personCharge=null==a.personCharge?"暂无数据":a.personCharge,t.projBasicInfo.prog=a.process,t.projBasicInfo.curState=a.projectState,t.projBasicInfo.delegate=a.delegate.userRealname,t.projBasicInfo.director=a.projectDirector.userRealname,t.projBasicInfo.projCost=a.projectCost.realCost,t.projBasicInfo.projDesc=a.projectDesc,t.projBasicInfo.buildDuration=a.buildDuration+"个月",t.loadingBasic=!1,t.loadingDesc=!1})},getProjTeam:function(){var t=this;this.loadingTeam=!0,this.$axios.get("project/team?projectId="+sessionStorage.projectId).then(function(e){console.log(e.data);var a=e.data,s=a.data,o=a.data.Members;t.projTeam.delegate=s.Delegate.userRealname,t.projTeam.projDirector=s.ProjectManager.userRealname;var n="";o.map(function(t){n=n+t.userRealname+" "}),t.projTeam.members=n,t.loadingTeam=!1}).catch(function(t){console.log("something wrong")})},downLoadFile:function(t){window.open(f.svUrl+"document/download?docId="+t+"&&id="+sessionStorage.id)},downLoadTemplate:function(t){window.open(f.svUrl+"document/template_download?templateName="+t)},showAddState:function(){this.isAddStateShow=!0},closeAddState:function(){this.isAddStateShow=!1,this.getStateList()},showAddTemplate:function(t){this.isAddTemplateShow=!0,this.addMomentId=t.id,this.maxAddDocTemLength=t.documentList.length+1},closeAddTemplate:function(){this.isAddTemplateShow=!1,this.getStateList()},backupProj:function(){window.open(f.svUrl+"document/backup_projects/?projectIds="+this.projectId+"&&id="+sessionStorage.id)},updateDoc:function(t){sessionStorage["docId"]=t,window.location.href="/ueditor"},closeWithoutReflash:function(){this.isAddStateShow=!1,this.isAddTemplateShow=!1}},mounted:function(){this.projectId=sessionStorage.projectId,this.getProjBasicInfo(),this.getProjTeam(),this.getStateList()}},pa=ua,ma=(a("7645"),Object(p["a"])(pa,qe,Qe,!1,null,"1901c3f2",null)),fa=ma.exports,ha=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login"},[s("div",{staticClass:"bg-model"},[s("div",{staticClass:"bg-content"},[s("el-container",[s("el-aside",{staticStyle:{width:"3%"}}),s("el-main",[s("div",{staticClass:"box"},[s("el-row",{staticClass:" text-center"},[s("el-col",[s("p",{staticClass:"title_p_css"},[t._v("登录")])])],1),s("el-row",{staticClass:" text-center mt-4"},[s("el-col",[s("el-input",{attrs:{placeholder:"请输入工号"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.checkCode()}},model:{value:t.workCode,callback:function(e){t.workCode=e},expression:"workCode"}},[s("template",{slot:"prepend"},[s("i",{staticClass:"fas fa-user",attrs:{"aria-hidden":"true"}})])],2)],1)],1),s("el-row",{staticClass:" text-center mt-4"},[s("el-col",{staticClass:" mt-4"},[s("el-input",{attrs:{type:"password",placeholder:"请输入密码"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.checkCode()}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}},[s("template",{slot:"prepend"},[s("i",{staticClass:"fas fa-unlock-alt"})])],2)],1)],1),s("el-row",{staticClass:" text-center mt-4"},[s("el-col",{staticClass:" mt-4",attrs:{span:12}},[s("el-input",{attrs:{type:"text",placeholder:"请输入验证码"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.checkCode()}},model:{value:t.imgCode,callback:function(e){t.imgCode=e},expression:"imgCode"}})],1),s("el-col",{staticClass:" mt-4",attrs:{span:12}},[s("img",{staticClass:"cursor",attrs:{id:"codeImg"},on:{click:function(e){t.getImg()}}})])],1),s("el-row",{staticClass:" text-center mt-5"},[s("el-col",{staticClass:" mt-4"},[s("el-button",{staticClass:"w100 mt-4",attrs:{type:"primary"},on:{click:function(e){t.checkCode()}}},[t._v("登录")])],1)],1),s("el-row")],1)]),s("el-aside",{staticStyle:{width:"3%"}})],1)],1),s("div",{staticClass:"bg-logo"},[s("el-row",[s("img",{staticClass:"logoCSS",attrs:{src:a("5dd1")}})])],1),s("div",{staticClass:"bg-logo-1"},[s("el-row",[s("img",{staticClass:"logoCSS",attrs:{src:a("dc8b")}})])],1),s("div",{staticClass:"bg_qywhs"},[s("el-row",[s("img",{staticClass:"qywhsCss",attrs:{src:a("59b3")}})])],1)])])},va=[],ga={name:"login",components:{},data:function(){return{workCode:"",password:"",imgData:"user/getVerify",imgCode:""}},methods:{login:function(){var t=this;if(""==this.workCode||""==this.password)return this.$alert("请输入账号和密码","提示"),void this.getImg();var e=this.workCode,a=new URLSearchParams;a.append("workCode",this.workCode),a.append("password",this.password),this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"post",url:"user/login",data:a}).then(function(a){200==a.data.state?(t.$router.push({path:"/index"}),sessionStorage.username=a.data.data.userRealname,sessionStorage.setItem("workcode",e),sessionStorage.detailBackRouter="/index"):t.$alert("错误！！："+a.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})})},getImg:function(){document.getElementById("codeImg").src="user/getVerify?"+Math.random()},checkCode:function(){var t=this;this.$axios.get("user/checkVerify?inputStr="+this.imgCode).then(function(e){200==e.data.state?t.login():(t.$alert("错误！！：验证码错误","提示",{confirmButtonText:"确定",callback:function(t){}}),t.getImg())})}},mounted:function(){this.getImg()}},ba=ga,Ca=(a("6dd0"),Object(p["a"])(ba,ha,va,!1,null,"1ec42f4a",null)),ya=Ca.exports,_a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"proCost"},[a("SvHeader",{attrs:{menuIndex:"2.1"}}),a("el-container",[a("div",{staticStyle:{"z-index":"5"}},[a("transition",{attrs:{name:"fade"}},[t.isAddJobCost?a("SvShowJobCost",{on:{closeAddJobCost:function(e){t.closeAddJobCost()}}}):t._e(),t.isAddExtraCost?a("SvAddExtraCost",{attrs:{projectId:t.projectId},on:{closeAddExtraCost:function(e){t.closeAddExtraCost()}}}):t._e(),t.isShowGetCost?a("SvGetCost",{attrs:{projectId:t.projectId},on:{closeShowGetCost:function(e){t.closeShowGetCost()}}}):t._e()],1)],1),a("el-aside",{staticStyle:{width:"3%"}}),a("el-main",[a("el-row",{staticClass:"mt-1"},[a("el-col",{attrs:{span:1}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-back",circle:""},on:{click:function(e){t.back()}}})],1),a("el-col",{attrs:{span:2,offset:1}},[a("el-button",{staticClass:"w100",attrs:{type:"primary",projectId:t.projectId},on:{click:function(e){t.showAddExtraCost()}}},[t._v("成本录入")])],1),a("el-col",{attrs:{span:2,offset:1}},[a("el-button",{staticClass:"w100",attrs:{type:"primary",projectId:t.projectId},on:{click:function(e){t.showShowGetCost()}}},[t._v("成本统计")])],1),a("el-col",{staticClass:"text-center ",staticStyle:{"margin-top":"7px"},attrs:{span:2,offset:9}},[t._v("\n                        搜索\n                    ")]),a("el-col",{attrs:{span:6}},[a("el-select",{staticClass:"w100",on:{change:function(e){t.searchFun()}},model:{value:t.searchChose,callback:function(e){t.searchChose=e},expression:"searchChose"}},t._l(t.searchOption,function(t){return a("el-option",{key:t.id,attrs:{label:t.momentName,value:t.id}})}),1)],1)],1),a("el-row",{staticClass:"mt-1"},[a("el-col",{attrs:{span:24}},[a("el-table",{staticClass:"tborder w100",attrs:{data:t.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{label:"时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.uploadedTime))])]}}])}),a("el-table-column",{attrs:{label:"人力成本"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.humanCostAmount))])]}}])}),a("el-table-column",{attrs:{label:"差旅"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.extraCosts[0].amount))])]}}])}),a("el-table-column",{attrs:{label:"伙食"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.extraCosts[1].amount))])]}}])}),a("el-table-column",{attrs:{label:"交通"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.extraCosts[2].amount))])]}}])}),a("el-table-column",{attrs:{label:"其他"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.extraCosts[3].amount))]),e.row.extraCosts[3].costRemarks&&""!=e.row.extraCosts[3].costRemarks?a("span",{staticStyle:{color:"rgb(50, 50, 50)"}},[t._v("（备注："+t._s(e.row.extraCosts[3].costRemarks)+"）")]):t._e()]}}])})],1)],1)],1)],1),a("el-aside",{staticStyle:{width:"3%"}})],1)],1)},wa=[],ka=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addJobCost"},[a("div",{staticClass:"bg-model"},[a("div",{staticClass:"bg-content"},[a("el-container",[a("el-main",[a("el-row",{staticClass:"mt-4"},[a("el-col",{attrs:{span:22,offset:1}},[a("a",{staticClass:"head-css"},[t._v("添加工作记录")])])],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:4,offset:2}},[a("a",{staticClass:"title-css"},[t._v("工作记录：")])]),a("el-col",{attrs:{span:16}},[a("el-select",{staticClass:"w100 ",model:{value:t.addData.workTime,callback:function(e){t.$set(t.addData,"workTime",e)},expression:"addData.workTime"}},[a("el-option",{key:1,attrs:{label:1,value:1}}),a("el-option",{key:2,attrs:{label:2,value:2}})],1)],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:4,offset:2}},[a("a",{staticClass:"title-css"},[t._v("项目阶段：")])]),a("el-col",{attrs:{span:16}},[a("el-select",{staticClass:"w100 ",model:{value:t.addData.momentId,callback:function(e){t.$set(t.addData,"momentId",e)},expression:"addData.momentId"}},t._l(t.option,function(t){return a("el-option",{key:t.momentId,attrs:{label:t.moment,value:t.momentId}})}),1)],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{attrs:{span:7,offset:4}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"primary"},on:{click:function(e){t.submitData()}}},[t._v("提交")])],1),a("el-col",{attrs:{span:7,offset:2}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"info",plain:""},on:{click:function(e){t.close()}}},[t._v("取消")])],1)],1)],1)],1)],1)])])},Da=[],xa={name:"addJobCost",props:{projectId:String},data:function(){return{addData:{workTime:1,momentId:1},option:[]}},methods:{close:function(){this.addData.workTime="",this.$emit("closeAddJobCost","")},submitData:function(){var t=this;if(""!=this.addData.workTime){var e=new URLSearchParams;e.append("workTime",this.addData.workTime),e.append("projectId",this.projectId),e.append("momentId",this.addData.momentId),this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"post",url:"project/work_record_build",data:e}).then(function(e){200==e.data.state?(t.$alert("添加成功","提示",{confirmButtonText:"确定",callback:function(t){}}),t.close()):t.$alert("错误！！："+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(e){t.$alert("错误！！："+e,"提示",{confirmButtonText:"确定",callback:function(t){}})})}else this.$alert("请选择工作记录","提示",{confirmButtonText:"确定",callback:function(t){}})},getOption:function(){var t=this;this.option=[];var e=new URLSearchParams;e.append("projectId",this.projectId),this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"post",url:"project/process",data:e}).then(function(e){if(200==e.data.state){var a=!0,s=!1,o=void 0;try{for(var n,i=C()(e.data.data.moments);!(a=(n=i.next()).done);a=!0){var l=n.value,r={momentId:l.momentOrder,moment:l.momentDesc};t.option.push(r)}}catch(c){s=!0,o=c}finally{try{a||null==i.return||i.return()}finally{if(s)throw o}}}else t.$alert("错误！！："+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}}),t.close()}).catch(function(e){t.$alert("错误！！："+e,"提示",{confirmButtonText:"确定",callback:function(t){}})})}},mounted:function(){this.getOption()}},Sa=xa,ja=(a("377d"),Object(p["a"])(Sa,ka,Da,!1,null,"624eb97b",null)),$a=ja.exports,Ta=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"showJobCost"},[t.body?a("div",{staticClass:"bg-model"},[a("div",{staticClass:"bg-content"},[a("el-container",[a("el-main",[a("el-row",{staticClass:"mt-4"},[a("el-col",{attrs:{span:22,offset:1}},[a("a",{staticClass:"head-css"},[t._v("人力成本总览")])])],1),a("el-row",{staticClass:"mt-4"},[a("el-col",{staticClass:"mt-2",attrs:{span:24}},[a("el-table",{staticClass:"tborder w100",attrs:{data:t.humanCost[t.curentPage-1],border:"",stripe:""}},[a("el-table-column",{attrs:{label:"提交人",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.workCode))])]}}])}),a("el-table-column",{attrs:{label:"提交时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.uploadTime))])]}}])}),a("el-table-column",{attrs:{label:"成本",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.applyState))])]}}])})],1)],1)],1),a("el-row",{staticClass:"mt-4"},[a("el-col",{staticClass:"text-center",attrs:{span:22,offset:1}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"warning"},on:{click:function(e){t.close()}}},[t._v("返回")])],1)],1),a("el-row",{staticClass:"mt-4"},[a("el-col",{staticClass:"text-right"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.totalPage,"pager-count":11,"page-size":t.pageSize,"current-page":t.curentPage},on:{"update:currentPage":function(e){t.curentPage=e}}})],1)],1)],1)],1)],1)]):t._e()])},Aa=[],Ia={name:"showJobCost",data:function(){return{costList:{},body:!1,cost:"",selectChose:"",projectId:sessionStorage.projectId,humanCost:[],Halfmoney:0,money:0,pageSize:10,totalPage:100,curentPage:1}},methods:{getCostData:function(){var t=this,e=new URLSearchParams;e.append("projectId",this.projectId),this.$axios.post("project/cost_list",e).then(function(e){if(200==e.data.state){var a=0,s=!0,o=!1,n=void 0;try{for(var i,l=C()(e.data.data.HumanCostRecord);!(s=(i=l.next()).done);s=!0){var r=i.value;r["applyState"]=r["applyState"]*t.money,r["uploadTime"]=E(new Date(r["uploadTime"]),"yyyy.MM.dd")}}catch(u){o=!0,n=u}finally{try{s||null==l.return||l.return()}finally{if(o)throw n}}t.humanCost=[];a=0;while(-1!=a){for(var c=[],d=0;d<5;d++){if(!e.data.data.HumanCostRecord[a]){a=-1;break}c.push(e.data.data.HumanCostRecord[a]),a++}t.humanCost.push(c)}t.totalPage=10*t.humanCost.length,t.body=!0}else t.$alert("错误！！："+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})})},close:function(){this.$emit("closeAddJobCost","")},selectFun:function(){var t=!0,e=!1,a=void 0;try{for(var s,o=C()(this.costList.momentCosts);!(t=(s=o.next()).done);t=!0){var n=s.value;if(this.selectChose==n.id){this.cost=n.realCost;break}}}catch(i){e=!0,a=i}finally{try{t||null==o.return||o.return()}finally{if(e)throw a}}},getMoney:function(){var t=this;this.$axios.get("project/role_cost").then(function(e){t.Halfmoney=e.data.data.roleCostHalfDay,t.money=t.Halfmoney,t.getCostData()})}},mounted:function(){this.getMoney()}},Pa=Ia,Ba=(a("b1fe"),Object(p["a"])(Pa,Ta,Aa,!1,null,"19f4da63",null)),Na=Ba.exports,La=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addExtraCost"},[a("div",{staticClass:"bg-model",attrs:{id:"bg-model"}},[a("div",{staticClass:"bg-content"},[a("el-container",[a("el-main",[a("el-row",{staticClass:"mt-4"},[a("el-col",{attrs:{span:22,offset:1}},[a("a",{staticClass:"head-css"},[t._v("录入成本")])])],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:5}},[a("a",{staticClass:"title-css"},[t._v("项目名称：")])]),a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{readonly:""},model:{value:t.addData.projectName,callback:function(e){t.$set(t.addData,"projectName",e)},expression:"addData.projectName"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:5}},[a("a",{staticClass:"title-css"},[t._v("填写时间：")])]),a("el-col",{attrs:{span:10}},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:t.addData.time,callback:function(e){t.$set(t.addData,"time",e)},expression:"addData.time"}})],1)])],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:5}},[a("a",{staticClass:"title-css"},[t._v("监理时间段：")])]),a("el-col",{staticClass:"mt-2",attrs:{span:17}},[[a("el-checkbox-group",{on:{change:function(e){t.checkChange()}},model:{value:t.addData.checkList,callback:function(e){t.$set(t.addData,"checkList",e)},expression:"addData.checkList"}},[a("el-checkbox",{attrs:{label:"上午"}}),a("el-checkbox",{attrs:{label:"下午"}})],1)]],2)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:5}},[a("a",{staticClass:"title-css"},[t._v("项目阶段：")])]),a("el-col",{attrs:{span:15}},[a("el-select",{staticClass:"w100 ",model:{value:t.addData.momentId,callback:function(e){t.$set(t.addData,"momentId",e)},expression:"addData.momentId"}},t._l(t.option,function(t){return a("el-option",{key:t.momentId,attrs:{label:t.moment,value:t.momentId}})}),1)],1)],1),a("el-row",[a("el-col",{staticClass:"mt-4 text-right",attrs:{span:3,offset:2}},[a("a",{staticClass:"title-css"},[t._v("成本：")])]),a("el-col",{attrs:{span:17}},t._l(t.costList,function(e,s){return a("el-row",{key:s,staticClass:"mt-4"},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{placeholder:"请输入成本名称",readonly:0==e.isDelete},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"item.name"}})],1),a("el-col",{attrs:{span:6,offset:1}},[a("el-input",{attrs:{placeholder:"请输入金额",readonly:"人力成本"==e.name},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}})],1),a("el-col",{attrs:{span:6}},[a("p",{staticStyle:{color:"red"}},[t._v(" "+t._s(t.Unit))])])],1)}),1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:5}},[a("a",{staticClass:"title-css"},[t._v("备注：")])]),a("el-col",{attrs:{span:15}},[a("el-input",{staticClass:"w100 ",attrs:{type:"textarea",placeholder:"请填入对其他金额的备注信息"},model:{value:t.addData.ps,callback:function(e){t.$set(t.addData,"ps",e)},expression:"addData.ps"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{attrs:{span:7,offset:4}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"primary"},on:{click:function(e){t.submitData()}}},[t._v("提交")])],1),a("el-col",{attrs:{span:7,offset:2}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"info",plain:""},on:{click:function(e){t.close()}}},[t._v("取消")])],1)],1)],1)],1)],1)])])},Ra=[],Oa={name:"addExtraCost",data:function(){return{addData:{projectId:sessionStorage.projectId,projectName:"",momentId:"",type:0,detail:"",time:new Date,checkList:[],ps:""},Unit:"(单位：元)",money:400,Halfmoney:0,costList:[],option:[],addCostListData:{name:"",value:400,isDelete:1}}},methods:Object(J["a"])({close:function(){this.$emit("closeAddExtraCost","")},submitData:function(){var t=this;if(""!=this.addData.amount){var e=new URLSearchParams;e.append("amount",this.addData.amount),e.append("projectId",this.projectId),e.append("momentId",this.addData.momentId),this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"post",url:"project/extra_cost_build",data:e}).then(function(e){200==e.data.state?(t.$alert("添加成功","提示",{confirmButtonText:"确定",callback:function(t){}}),t.close()):t.$alert("错误！！："+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(e){t.$alert("错误！！："+e,"提示",{confirmButtonText:"确定",callback:function(t){}})})}else this.$alert("请填写金额","提示",{confirmButtonText:"确定",callback:function(t){}})},getOption:function(){var t=this,e=new URLSearchParams;e.append("projectId",this.addData.projectId),this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"post",url:"project/process",data:e}).then(function(e){if(200==e.data.state){var a=!0,s=!1,o=void 0;try{for(var n,i=C()(e.data.data.moments);!(a=(n=i.next()).done);a=!0){var l=n.value,r={momentId:l.id,moment:l.momentName};t.option.push(r)}}catch(c){s=!0,o=c}finally{try{a||null==i.return||i.return()}finally{if(s)throw o}}}else t.$alert("错误！！："+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}}),t.close()}).catch(function(e){t.$alert("错误！！："+e,"提示",{confirmButtonText:"确定",callback:function(t){}})})},getMoney:function(){var t=this;this.$axios.get("project/role_cost").then(function(e){t.Halfmoney=e.data.data.roleCostHalfDay,t.money=t.addData.checkList.length*t.Halfmoney,t.costList=[{name:"人力成本",value:t.money,isDelete:0},{name:"交通",value:0,isDelete:0},{name:"差旅",value:0,isDelete:0},{name:"伙食",value:0,isDelete:0},{name:"其他",value:0,isDelete:0}]})},addArr:function(){this.$set(this.costList,this.costList.length,{name:"",value:0,isDelete:1})},deleteArr:function(t){this.$delete(this.costList,t)},getProDettail:function(){var t=this,e=new URLSearchParams;e.append("projectId",sessionStorage.projectId),this.$axios.post("/project/detail",e).then(function(e){t.addData.projectName=e.data.data.projectName})},checkChange:function(){var t=0;this.money=this.addData.checkList.length*this.Halfmoney;var e=!0,a=!1,s=void 0;try{for(var o,n=C()(this.costList);!(e=(o=n.next()).done);e=!0){var i=o.value;this.$set(this.costList,t,{name:i.name,value:"人力成本"==i.name?this.money:i.value,isDelete:i.isDelete}),t++}}catch(l){a=!0,s=l}finally{try{e||null==n.return||n.return()}finally{if(a)throw s}}}},"submitData",function(){var t=this,e=[],a=!0,s=!1,o=void 0;try{for(var n,i=C()(this.costList);!(a=(n=i.next()).done);a=!0){var l=n.value;if(""==l.name)return void this.$alert("请填写必要信息","提示",{confirmButtonText:"确定",callback:function(t){}});"人力成本"!=l.name&&("其他"==l.name?e.push({amount:l.value,costDesc:l.name,costRemarks:this.addData.ps}):e.push({amount:l.value,costDesc:l.name}))}}catch(c){s=!0,o=c}finally{try{a||null==i.return||i.return()}finally{if(s)throw o}}var r=new URLSearchParams;r.append("projectId",this.addData.projectId),r.append("momentId",this.addData.momentId),r.append("humanCostRecord.workTime",this.addData.checkList.length),r.append("uploadTime",E(new Date(this.addData.momentId),"yyyy-MM-dd hh:mm")),r.append("extraCostList",Ne()(e)),this.$axios.post("/project/cost_build",r).then(function(e){200==e.data.state?(t.$alert("添加成功","提示",{confirmButtonText:"确定",callback:function(t){}}),t.close()):t.$alert("错误！！"+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})})}),mounted:function(){this.getOption(),this.getMoney(),this.getProDettail()}},Ua=Oa,Ea=(a("a961"),Object(p["a"])(Ua,La,Ra,!1,null,"55687400",null)),Fa=Ea.exports,Ma=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"getCost"},[t.body?a("div",{staticClass:"bg-model"},[a("div",{staticClass:"bg-content"},[a("el-container",[a("el-main",[a("el-row",{staticClass:"mt-2"},[a("el-col",{attrs:{span:22}},[a("a",{staticClass:"head-css"},[t._v("成员成本总览")])])],1),a("el-row",{staticClass:"mt-4"},[a("el-col",{attrs:{span:24}},[a("el-table",{staticClass:"tborder w100",attrs:{data:t.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{label:"项目成员"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.realName))])]}}])}),a("el-table-column",{attrs:{label:"人力成本"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.humanCost))])]}}])}),a("el-table-column",{attrs:{label:"差旅"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.stay))])]}}])}),a("el-table-column",{attrs:{label:"伙食"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.meals))])]}}])}),a("el-table-column",{attrs:{label:"交通"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.traffic))])]}}])}),a("el-table-column",{attrs:{label:"其他"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.others))])]}}])}),a("el-table-column",{attrs:{label:"总计"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.humanCost+e.row.others+e.row.stay+e.row.meals+e.row.traffic))])]}}])})],1)],1)],1),a("el-row",{staticClass:"mt-4"},[a("el-col",{staticClass:"text-center",attrs:{span:20,offset:2}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"warning"},on:{click:function(e){t.close()}}},[t._v("返回")])],1)],1)],1)],1)],1)]):t._e()])},za=[],Ha={name:"getCost",props:{projectId:String},data:function(){return{tableData:[],body:!1}},methods:{getCostData:function(){var t=this,e=new URLSearchParams;e.append("projectId",this.projectId),this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"post",url:"project/member_total_cost",data:e}).then(function(e){200==e.data.state?(0==e.data.data.length&&(t.$alert("暂时无成本","提示",{confirmButtonText:"确定",callback:function(e){t.$message({type:"info",message:"action: ".concat(e)})}}),t.close()),t.body=!0,t.tableData=e.data.data):t.$alert("错误！！："+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(e){t.$message({type:"info",message:"action: ".concat(e)})}})}).catch(function(e){t.$alert("错误！！："+e,"提示",{confirmButtonText:"确定",callback:function(e){t.$message({type:"info",message:"action: ".concat(e)})}})})},close:function(){this.$emit("closeShowGetCost","")}},mounted:function(){this.getCostData()}},Wa=Ha,Va=(a("1a7b"),Object(p["a"])(Wa,Ma,za,!1,null,"7c234b43",null)),Za=Va.exports,Ya={name:"proCost",components:{SvHeader:S,SvAddJobCost:$a,SvAddExtraCost:Fa,SvGetCost:Za,SvShowJobCost:Na},data:function(){return{tableData:[],isAddJobCost:!1,isAddExtraCost:!1,projectId:"",isShowGetCost:!1,searchOption:[],searchChose:"",pageSize:10,totalPage:10,curentPage:1,allDataBuffer:"",extraCostLength:0}},methods:{showAddJobCost:function(){this.isAddJobCost=!0},showAddExtraCost:function(){this.isAddExtraCost=!0},getCostList:function(){var t=this;this.tableData=[];var e=new URLSearchParams;e.append("projectId",this.projectId),this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"post",url:"project/moment_person_cost",data:e}).then(function(e){200==e.data.state?(t.tableData=e.data.data,t.allDataBuffer=e.data.data):t.$alert("错误！！："+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(e){t.$alert("错误！！："+e,"提示",{confirmButtonText:"确定",callback:function(t){}})})},closeAddJobCost:function(){this.getMemberCost(),this.getmoments(),this.isAddJobCost=!1},closeAddExtraCost:function(){this.getMemberCost(),this.getmoments(),this.isAddExtraCost=!1},pass:function(t,e){var a=this,s=new URLSearchParams;s.append(0==e?"humanCostRecordId":"extraCostId",t),this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"post",url:0==e?"project/work_record_apply":"project/extra_cost_apply",data:s}).then(function(t){200==t.data.state?(a.$alert("修改成功","提示",{confirmButtonText:"确定",callback:function(t){}}),a.getMemberCost(),a.getmoments()):(a.$alert("错误！！："+t.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}}),a.getMemberCost())}).catch(function(t){a.$alert("错误！！："+t,"提示",{confirmButtonText:"确定",callback:function(t){}}),a.getMemberCost()})},showShowGetCost:function(){this.isShowGetCost=!0},closeShowGetCost:function(){this.getMemberCost(),this.getmoments(),this.isShowGetCost=!1},getmoments:function(){var t=this,e=new URLSearchParams;e.append("projectId",this.projectId),this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"post",url:"project/moments",data:e}).then(function(e){200==e.data.state?(t.searchOption=e.data.data,t.searchOption.unshift({momentName:"全部",id:-1})):t.$alert("错误！！："+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(e){t.$alert("错误！！："+e,"提示",{confirmButtonText:"确定",callback:function(t){}})})},searchFun:function(){if(""!=this.searchChose)if(-1!=this.searchChose){this.tableData=[];var t=!0,e=!1,a=void 0;try{for(var s,o=C()(this.allDataBuffer);!(t=(s=o.next()).done);t=!0){var n=s.value;n.momentId==this.searchChose&&this.tableData.push(n)}}catch(i){e=!0,a=i}finally{try{t||null==o.return||o.return()}finally{if(e)throw a}}}else this.getMemberCost()},back:function(){this.$router.push("/state-detail")},getMemberCost:function(){var t=this,e=new URLSearchParams;e.append("projectId",this.projectId),this.$axios.post("project/person_cost",e).then(function(e){200==e.data.state?(t.allDataBuffer=e.data.data.list,t.tableData=e.data.data.list,t.totalPage=e.data.data.total):t.$alert("错误！！："+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})})}},mounted:function(){this.projectId=sessionStorage.projectId,this.getmoments(),this.getMemberCost()}},Ja=Ya,Ka=(a("c1cc"),Object(p["a"])(Ja,_a,wa,!1,null,"6e614d6d",null)),Ga=Ka.exports,qa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"daily"},[a("SvHeader",{attrs:{menuIndex:"2.1"}}),a("el-container",[a("div",{staticStyle:{"z-index":"5"}},[t.isAdd?a("SvAddDaily",{attrs:{projectId:t.projectId},on:{closeAdd:function(e){t.closeAdd()}}}):t._e()],1),a("el-aside",{staticStyle:{width:"3%"}}),a("el-main",[a("el-row"),a("el-row",{staticClass:"mt-2"},[a("el-col",{staticClass:" text-left",attrs:{span:2}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-back",circle:""},on:{click:function(e){t.back()}}})],1),a("el-col",{attrs:{span:2}},[a("el-button",{staticClass:"w100 mt-5 add_addbtn",attrs:{type:"primary ",size:"small"},on:{click:function(e){t.showAdd()}}},[t._v("添加")])],1),a("el-col",{attrs:{span:4,offset:12}},[a("el-date-picker",{staticClass:"w100",staticStyle:{width:"180px"},attrs:{type:"date",placeholder:"选择日期"},on:{change:function(e){t.showChose()}},model:{value:t.searchTime,callback:function(e){t.searchTime=e},expression:"searchTime"}})],1),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){t.showChose()}},model:{value:t.searchDailyType,callback:function(e){t.searchDailyType=e},expression:"searchDailyType"}},t._l(t.dailyTypeOption,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)],1),t.isDaily?a("el-row",{staticClass:"mt-2"},[a("el-col",[a("el-table",{staticClass:"tborder w100",attrs:{data:t.dailyData,border:"",stripe:""}},[a("el-table-column",{attrs:{label:"编号"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.id))])]}}])}),a("el-table-column",{attrs:{label:"日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.uploadTime))])]}}])}),a("el-table-column",{attrs:{label:"上午"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.dailyDetailAM))])]}}])}),a("el-table-column",{attrs:{label:"下午"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.dailyDetailPM))])]}}])}),a("el-table-column",{attrs:{label:"提交人员"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.uploadFrom.userRealname))])]}}])})],1)],1)],1):t._e(),t.isDaily?t._e():a("el-row",{staticClass:"mt-2"},[a("el-col",[a("el-table",{staticClass:"tborder w100",attrs:{data:t.weekly,border:"",stripe:""}},[a("el-table-column",{attrs:{label:"编号"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.id))])]}}])}),a("el-table-column",{attrs:{label:"日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.uploadTime))])]}}])}),a("el-table-column",{attrs:{label:"本周内容"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.weekDetail))])]}}])}),a("el-table-column",{attrs:{label:"问题及意见"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.askQuestion))])]}}])}),a("el-table-column",{attrs:{label:"提交人员"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.uploadFrom.userRealname))])]}}])})],1)],1)],1),a("el-row",{staticClass:"mt-4"},[a("el-col",{staticClass:"text-right"},[t.isDaily?a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.totalPage,"pager-count":11,"page-size":t.pageSize,"current-page":t.curentPage},on:{"update:currentPage":function(e){t.curentPage=e},"current-change":t.getDaily}}):t._e()],1)],1),a("el-row",{staticClass:"mt-4"},[a("el-col",{staticClass:"text-right"},[t.isDaily?t._e():a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.totalPage,"pager-count":11,"page-size":t.pageSize,"current-page":t.curentPage},on:{"update:currentPage":function(e){t.curentPage=e},"current-change":t.getWeekly}})],1)],1)],1),a("el-aside",{staticStyle:{width:"3%"}})],1)],1)},Qa=[],Xa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addDaily"},[a("div",{staticClass:"bg-model"},[a("div",{staticClass:"bg-content"},[a("el-container",[a("el-main",[a("el-row",{staticClass:"mt-4"},[a("el-col",{attrs:{span:22,offset:1}},[a("a",{staticClass:"head-css"},[t._v("日志/周报")])])],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:5,offset:1}},[a("a",{staticClass:"title-css"},[t._v("类型：")])]),a("el-col",{attrs:{span:16}},[a("el-select",{model:{value:t.addData.type,callback:function(e){t.$set(t.addData,"type",e)},expression:"addData.type"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:5,offset:1}},[a("a",{staticClass:"title-css"},[t._v("日期：")])]),a("el-col",{attrs:{span:16}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:t.addData.time,callback:function(e){t.$set(t.addData,"time",e)},expression:"addData.time"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:5,offset:1}},[0==t.addData.type?a("a",{staticClass:"title-css"},[t._v("上午：")]):t._e(),1==t.addData.type?a("a",{staticClass:"title-css"},[t._v("本周工作内容：")]):t._e()]),a("el-col",{attrs:{span:15}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容"},model:{value:t.addData.summary,callback:function(e){t.$set(t.addData,"summary",e)},expression:"addData.summary"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:5,offset:1}},[0==t.addData.type?a("a",{staticClass:"title-css"},[t._v("下午：")]):t._e(),1==t.addData.type?a("a",{staticClass:"title-css"},[t._v("存在问题及意见：")]):t._e()]),a("el-col",{attrs:{span:15}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容"},model:{value:t.addData.detail,callback:function(e){t.$set(t.addData,"detail",e)},expression:"addData.detail"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{attrs:{span:7,offset:4}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"primary"},on:{click:function(e){t.submitData()}}},[t._v("提交")])],1),a("el-col",{attrs:{span:7,offset:2}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"info",plain:""},on:{click:function(e){t.close()}}},[t._v("取消")])],1)],1)],1)],1)],1)])])},ts=[],es={name:"addDaily",props:{projectId:String},data:function(){return{addData:{summary:"",detail:"",type:0,time:new Date},options:[{value:0,label:"日志"},{value:1,label:"周报"}]}},methods:{close:function(){this.addData={summary:"",detail:"",type:0},this.$emit("closeAdd","")},submitData:function(){var t=this;if(""!=this.addData.summary&&""!=this.addData.detail){var e=new URLSearchParams;e.append("projectId",this.projectId),e.append("uploadTime",E(this.addData.time,"'yyyy-MM-dd hh:mm:ss'")),e.append(0==this.addData.type?"dailyDetailAM":"weekDetail",this.addData.summary),e.append(0==this.addData.type?"dailyDetailPM":"askQuestion",this.addData.detail),this.$axios.post(0==this.addData.type?"project/daily_build":"project/week_report_build",e).then(function(e){200==e.data.state?(t.$alert("添加成功","提示"),t.close()):t.$alert("错误！！："+e.data.msg,"提示")})}else this.$alert("请填写必要信息","提示")}}},as=es,ss=(a("c15c"),Object(p["a"])(as,Xa,ts,!1,null,"5d823644",null)),os=ss.exports,ns={name:"daily",components:{SvHeader:S,SvAddDaily:os},data:function(){return{isDaily:!0,dailyData:[],pageSize:10,totalPage:100,curentPage:1,weekly:[],isAdd:!1,projectId:"",dailyTypeOption:[{name:"日志",id:0},{name:"周报",id:1}],searchDailyType:0,searchTime:new Date}},methods:{showChose:function(){0==this.searchDailyType?(this.getDaily(),this.isDaily=!0):(this.getWeekly(),this.isDaily=!1)},getDaily:function(){var t=this;this.dailyData=[];var e=new URLSearchParams;e.append("projectId",this.projectId),e.append("page",this.curentPage),e.append("pageSize",this.pageSize),e.append("start",E(this.searchTime,"yyyy-MM-dd ")+"00:00:00"),this.$axios.post(sessionStorage.roleId>66?"project/dailies/":"project/my_dailies/",e).then(function(e){if(200==e.data.state){t.totalPage=e.data.data.total;var a=!0,s=!1,o=void 0;try{for(var n,i=C()(e.data.data.list);!(a=(n=i.next()).done);a=!0){var l=n.value;l.uploadTime=E(new Date(l.uploadTime),"yyyy-MM-dd hh:mm:ss")}}catch(r){s=!0,o=r}finally{try{a||null==i.return||i.return()}finally{if(s)throw o}}t.dailyData=e.data.data.list}else t.$alert("错误！！："+e.data.msg,"提示")})},getWeekly:function(){var t=this;this.weekly=[];var e=new URLSearchParams;e.append("projectId",this.projectId),e.append("page",this.curentPage),e.append("pageSize",this.pageSize),e.append("start",E(this.searchTime,"yyyy-MM-dd ")+"00:00:00"),this.$axios.post(sessionStorage.roleId>66?"project/reports/":"project/my_reports/",e).then(function(e){if(200==e.data.state){t.totalPage=e.data.data.total;var a=!0,s=!1,o=void 0;try{for(var n,i=C()(e.data.data.list);!(a=(n=i.next()).done);a=!0){var l=n.value;l.uploadTime=E(new Date(l.uploadTime),"yyyy-MM-dd hh:mm:ss")}}catch(r){s=!0,o=r}finally{try{a||null==i.return||i.return()}finally{if(s)throw o}}t.weekly=e.data.data.list}else t.$alert("错误！！："+e.data.msg,"提示")})},showAdd:function(){this.isAdd=!0},closeAdd:function(){this.isAdd=!1,this.getDaily(),this.getWeekly},back:function(){this.$router.push("/state-detail")}},mounted:function(){this.projectId=sessionStorage.projectId,this.getDaily()}},is=ns,ls=(a("5606"),Object(p["a"])(is,qa,Qa,!1,null,null,null)),rs=ls.exports,cs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"account"},[a("svHeader",{attrs:{menuIndex:"3.2.4"}}),a("el-container",[a("div",{staticStyle:{"z-index":"5"}},[a("transition",{attrs:{name:"fade"}},[t.isAddAcountRoleShow?a("SvAddAcountRole",{attrs:{addRoleWorkCode:t.addRoleWorkCode},on:{closeAddAcountRole:t.closeAddAcountRole}}):t._e(),t.isAddPerShow?a("SvAddAcountPremission",{attrs:{addPremissionWorkCode:t.addPremissionWorkCode},on:{closeAddAcountPer:t.closeAddAcountPer}}):t._e()],1)],1),a("el-aside",{staticStyle:{width:"3%"}}),a("el-main",{staticClass:"bg"},[a("el-row",[a("sv-account-assign",{staticClass:"btn-assign"})],1),a("el-row",[a("el-col",{staticClass:"text-center",attrs:{span:24}},[a("h1",{staticClass:"add_btFont20"},[t._v("账号总览")])])],1),a("el-row",{staticClass:"mt-2"},[a("el-col",{attrs:{span:24}},[a("el-table",{staticClass:"w100",attrs:{data:t.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{label:"工号"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.workCode))])]}}])}),a("el-table-column",{attrs:{label:"部门"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.department.departmentName))])]}}])}),a("el-table-column",{attrs:{label:"员工名字"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.realName))])]}}])}),a("el-table-column",{attrs:{label:"手机号"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.mobile))])]}}])}),a("el-table-column",{attrs:{label:"角色"},scopedSlots:t._u([{key:"default",fn:function(e){return["0"!=e.row.role.roleId?a("span",[t._v(t._s(e.row.role.roleDesc))]):t._e(),"0"==e.row.role.roleId?a("span",[t._v("无角色")]):t._e()]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.role.roleId?a("el-row",{staticClass:" mt-2"},[a("el-col",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.showAddAcountRole(e.row.workCode)}}},[a("i",{staticClass:"el-icon-plus"}),t._v(" 分配角色")])],1)],1):t._e(),"0"!=e.row.role.roleId?a("el-row",{staticClass:" mt-2"},[a("el-col",[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.confirmDeteleRole(e.row.workCode)}}},[a("i",{staticClass:"el-icon-circle-close-outline"}),t._v(" 删除角色")])],1)],1):t._e(),a("el-row",{staticClass:" mt-2"},[a("el-col",[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.confirmDeleteAccount(e.row.id)}}},[a("i",{staticClass:"el-icon-circle-close-outline"}),t._v(" 删除员工")])],1)],1)]}}])})],1)],1)],1),a("el-row",{staticClass:"mt-4"},[a("el-col",{staticClass:"text-right"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.totalPage,"pager-count":11,"page-size":t.pageSize,"current-page":t.curentPage},on:{"update:currentPage":function(e){t.curentPage=e},"current-change":t.getAccountList}})],1)],1)],1),a("el-aside",{staticStyle:{width:"3%"}})],1)],1)},ds=[],us=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addAcountRole"},[a("div",{staticClass:"bg-model"},[a("div",{staticClass:"bg-content"},[a("el-container",[a("el-main",[a("el-row",{staticClass:"mt-4"},[a("el-col",{attrs:{span:22,offset:1}},[a("a",{staticClass:"head-css"},[t._v("分配角色")])])],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:4,offset:2}},[a("a",{staticClass:"title-css"},[t._v("员工工号：")])]),a("el-col",{staticClass:"mt-2 ",attrs:{span:15,offset:1}},[t._v("\n                            "+t._s(t.addRoleWorkCode)+"\n                        ")])],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:4,offset:2}},[a("a",{staticClass:"title-css"},[t._v("角色选择：")])]),a("el-col",{attrs:{span:16}},[a("el-select",{staticClass:"w100 ",model:{value:t.roleId,callback:function(e){t.roleId=e},expression:"roleId"}},t._l(t.option,function(t){return a("el-option",{key:t.id,attrs:{label:t.roledesc,value:t.id}})}),1)],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{attrs:{span:7,offset:4}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"primary"},on:{click:function(e){t.submitData()}}},[t._v("提交")])],1),a("el-col",{attrs:{span:7,offset:2}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"info",plain:""},on:{click:function(e){t.close()}}},[t._v("取消")])],1)],1)],1)],1)],1)])])},ps=[],ms={name:"addAcountRole",data:function(){return{roleId:0,option:[]}},props:{addRoleWorkCode:String},methods:{close:function(){this.$emit("closeAddAcountRole","")},submitData:function(){var t=this;if(0!=this.roleId){var e=new URLSearchParams;e.append("roleId",this.roleId),e.append("workCode",this.addRoleWorkCode),this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"post",url:f.svUrl+"user/assignRole",data:e}).then(function(e){200==e.data.state?(t.$alert("分配成功","提示",{confirmButtonText:"确定",callback:function(t){}}),t.close()):t.$alert("错误！！："+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(e){t.$alert("错误！！："+e,"提示",{confirmButtonText:"确定",callback:function(t){}})})}else this.$alert("请选择角色","提示",{confirmButtonText:"确定",callback:function(t){}})},getRoleOption:function(){var t=this;this.option=[];new URLSearchParams;this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"post",url:f.svUrl+"user/getRoleList",data:{}}).then(function(e){if(200==e.data.state){var a=!0,s=!1,o=void 0;try{for(var n,i=C()(e.data.data);!(a=(n=i.next()).done);a=!0){var l=n.value,r={id:l.id,roledesc:l.roledesc};t.option.push(r)}}catch(c){s=!0,o=c}finally{try{a||null==i.return||i.return()}finally{if(s)throw o}}}else t.$alert("错误！！："+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(e){t.$alert("错误！！："+e,"提示",{confirmButtonText:"确定",callback:function(t){}})})}},mounted:function(){this.getRoleOption()}},fs=ms,hs=(a("caa3"),Object(p["a"])(fs,us,ps,!1,null,"f7f65f76",null)),vs=hs.exports,gs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addAcountPremission"},[a("div",{staticClass:"bg-model"},[a("div",{staticClass:"bg-content"},[a("el-container",[a("el-main",[a("el-row",{staticClass:"mt-4"},[a("el-col",{attrs:{span:22,offset:1}},[a("a",{staticClass:"head-css"},[t._v("分配权限")])])],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:4,offset:2}},[a("a",{staticClass:"title-css"},[t._v("角色名称：")])]),a("el-col",{staticClass:"mt-2 ",attrs:{span:15,offset:1}},[t._v("\n                            "+t._s(t.data.roleData.roledesc)+"\n                        ")])],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:4,offset:2}},[a("a",{staticClass:"title-css"},[t._v("权限选择：")])]),a("el-col",{staticClass:"mt-2 ",attrs:{span:15}},[a("el-row",{staticClass:"boxCss"},t._l(t.option,function(e,s){return a("el-col",{key:s,attrs:{span:12}},[a("el-checkbox",{model:{value:t.checkBox[s],callback:function(e){t.$set(t.checkBox,s,e)},expression:"checkBox[index]"}},[t._v(t._s(e.permissionDesc))])],1)}),1)],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{attrs:{span:8,offset:3}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"primary",size:"small"},on:{click:function(e){t.submitData()}}},[t._v("提交")])],1),a("el-col",{attrs:{span:8,offset:2}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"info",plain:"",size:"small"},on:{click:function(e){t.close()}}},[t._v("取消")])],1)],1)],1)],1)],1)])])},bs=[],Cs={name:"addAcountPremission",data:function(){return{premissionId:0,option:[],checkBox:[]}},props:{data:Object},methods:{close:function(){this.$emit("closeAddAcountPer","")},submitData:function(){for(var t=this,e="",a=0;a<this.checkBox.length;a++)this.checkBox[a]&&(e=e+this.option[a].id+",");var s=new FormData;s.append("roleId",this.data.roleData.id),s.append("permissionId",e),this.$axios.post("user/modifyRoleOfPermission",s).then(function(e){200==e.data.state?(t.$alert("添加成功","提示"),t.close()):t.$alert("错误！！："+e.data.msg,"提示")})},getOption:function(){var t=this;this.option=[];new URLSearchParams;this.$axios.get("user/getPermissionList").then(function(e){if(200==e.data.state){for(var a=0;a<e.data.data.length;a++){t.checkBox[a]=!1;var s=!0,o=!1,n=void 0;try{for(var i,l=C()(t.data.permissionData);!(s=(i=l.next()).done);s=!0){var r=i.value;e.data.data[a].id==r.id&&(t.checkBox[a]=!0)}}catch(c){o=!0,n=c}finally{try{s||null==l.return||l.return()}finally{if(o)throw n}}}t.option=e.data.data}else t.$alert("错误！！："+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})})}},mounted:function(){console.log(this.data),this.getOption()}},ys=Cs,_s=(a("944b"),Object(p["a"])(ys,gs,bs,!1,null,"0aaa2454",null)),ws=_s.exports,ks={name:"account",components:{SvHeader:S,SvAddAcountRole:vs,SvAddAcountPremission:ws,SvAccountAssign:De},data:function(){return{tableData:[],pageSize:5,totalPage:100,curentPage:1,isAddAcountRoleShow:!1,addRoleWorkCode:"",addPremissionWorkCode:"",isAddPerShow:!1}},methods:{getAccountList:function(){var t=this;this.tableData=[];var e=new URLSearchParams;e.append("currentPage",this.curentPage),e.append("pageSize",this.pageSize),this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"post",url:"user/getAll",data:e}).then(function(e){if(200==e.data.state){t.totalPage=e.data.data.total;var a=!0,s=!1,o=void 0;try{for(var n,i=C()(e.data.data.items);!(a=(n=i.next()).done);a=!0){var l=n.value,r={id:l.id,workCode:l.workCode,department:l.department,realName:l.userRealname,mobile:l.mobile,role:l.role,permission:l.permission,upload_time:E(new Date(l.uploadTime),"yyyy-MM-dd hh:mm")};t.tableData.push(r)}}catch(c){s=!0,o=c}finally{try{a||null==i.return||i.return()}finally{if(s)throw o}}}else t.$alert("错误！！："+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(e){t.$alert("错误！！："+e,"提示",{confirmButtonText:"确定",callback:function(t){}})})},confirmDeteleRole:function(t){var e=this;this.$confirm("是否确认删除","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"删除",cancelButtonText:"取消"}).then(function(){e.deleteRole(t)})},deleteRole:function(t){var e=this,a=new URLSearchParams;a.append("workCode",t),this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"post",url:"user/delUserOfRole",data:a}).then(function(t){200==t.data.state?e.getAccountList():e.$alert("错误！！："+t.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(t){e.$alert("错误！！："+t,"提示",{confirmButtonText:"确定",callback:function(t){}})})},deleteAccountPer:function(t){var e=this;if(confirm("是否确定删除")){var a=new URLSearchParams;a.append("workCode",t),this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"post",url:"user/delUserOfRole",data:a}).then(function(t){200==t.data.state?e.getAccountList():e.$alert("错误！！："+t.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(t){e.$alert("错误！！："+t,"提示",{confirmButtonText:"确定",callback:function(t){}})})}},confirmDeleteAccount:function(t){var e=this;this.$confirm("是否确认删除","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"删除",cancelButtonText:"取消"}).then(function(){e.deleteAccount(t)})},deleteAccount:function(t){var e=this,a=new URLSearchParams;a.append("id",t),this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"post",url:"user/delUser",data:a}).then(function(t){200==t.data.state?e.getAccountList():e.$alert("错误！！："+t.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})}).catch(function(t){e.$alert("错误！！："+t,"提示",{confirmButtonText:"确定",callback:function(t){}})})},showAddAcountRole:function(t){this.addRoleWorkCode=t,this.isAddAcountRoleShow=!0},closeAddAcountRole:function(){this.addRoleWorkCode="",this.isAddAcountRoleShow=!1,this.getAccountList()},showAddAcountPer:function(t){this.addPremissionWorkCode=t,this.isAddPerShow=!0},closeAddAcountPer:function(){this.addPremissionWorkCode="",this.isAddPerShow=!1,this.getAccountList()}},mounted:function(){this.getAccountList()}},Ds=ks,xs=(a("cb0e"),a("7745"),Object(p["a"])(Ds,cs,ds,!1,null,"5a94b6c2",null)),Ss=xs.exports,js=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addDailyAndCost"},[a("svHeader"),t.body?a("el-container",[a("el-aside",{staticStyle:{width:"27%"}}),a("el-main",[a("el-row",[a("el-col",{staticClass:"text-center mt-1",attrs:{span:24}},[a("span",{staticClass:"titile"},[t._v("添加个人工作日报")])])],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-1",attrs:{span:3}},[a("span",{staticClass:"subheading "},[t._v("日期：")])]),a("el-col",{attrs:{span:21}},[[a("div",{staticClass:"block"},[a("el-date-picker",{staticClass:"borderCss",staticStyle:{width:"40%"},attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1)]],2)],1),t._l(t.proDetail,function(e,s){return a("div",{key:s},[0!=s?a("el-row",[a("el-col",{staticClass:"mt-3",attrs:{span:24}},[a("div",{staticClass:"xuxian"})])],1):t._e(),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-1",attrs:{span:3}},[a("span",{staticClass:"subheading "},[t._v("项目"+t._s(s)+"：")])]),a("el-col",{attrs:{span:12}},[a("el-select",{staticClass:"borderCss w100",on:{change:function(a){t.getState(e.projectId)}},model:{value:e.projectId,callback:function(a){t.$set(e,"projectId",a)},expression:"item.projectId"}},t._l(t.projectinfo,function(t,e){return a("el-option",{key:e,attrs:{label:t.projectName,value:t.id}})}),1)],1),a("el-col",{staticClass:"mt-1 text-center",attrs:{span:3}},[a("span",{staticClass:"subheading "},[t._v("工时:")])]),a("el-col",{attrs:{span:5}},[a("el-select",{staticClass:"borderCss w100",model:{value:e.jobTime,callback:function(a){t.$set(e,"jobTime",a)},expression:"item.jobTime"}},t._l(t.jobTime,function(t,e){return a("el-option",{key:e,attrs:{label:t.timeName,value:t.timeValue}})}),1)],1),a("el-col",{staticClass:" text-center mt-1",attrs:{span:1}},[a("i",{staticClass:"el-icon-remove-outline  cursor",on:{click:function(e){t.deleteDocument(s)}}})])],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-1",attrs:{span:3}},[a("span",{staticClass:"subheading "},[t._v("阶段：")])]),a("el-col",{attrs:{span:20}},[a("el-select",{staticClass:"borderCss w100",model:{value:e.projectState,callback:function(a){t.$set(e,"projectState",a)},expression:"item.projectState"}},t._l(t.projectState,function(t,e){return a("el-option",{key:e,attrs:{label:t.momentName,value:t.projectId}})}),1)],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-1",attrs:{span:3}},[a("span",{staticClass:"subheading "},[t._v("标题：")])]),a("el-col",{attrs:{span:20}},[a("el-input",{staticClass:"borderCss",attrs:{placeholder:"请输入内容"},model:{value:e.summary,callback:function(a){t.$set(e,"summary",a)},expression:"item.summary"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-1",attrs:{span:4}},[a("span",{staticClass:"subheading "},[t._v("详细说明：")])])],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{attrs:{span:22,offset:1}},[a("el-input",{staticClass:"borderCss",attrs:{type:"textarea",autosize:{minRows:10,maxRows:15},placeholder:"请输入内容"},model:{value:e.detail,callback:function(a){t.$set(e,"detail",a)},expression:"item.detail"}})],1)],1)],1)}),a("el-row",{staticClass:"mt-4"},[a("el-col",{attrs:{span:24}},[a("button",{staticClass:"btn cursor",on:{click:function(e){t.addFun()}}},[t._v(" + 添加")])])],1),a("el-row",{staticClass:"mt-2"},[a("el-col",{staticClass:"text-center mt-5",attrs:{offset:4,span:8}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submit()}}},[t._v("提  交")])],1),a("el-col",{staticClass:"text-center mt-5",attrs:{span:8}},[a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.backtoindex()}}},[t._v("返  回")])],1)],1)],2),a("el-aside",{staticStyle:{width:"27%"}})],1):t._e(),t.body?t._e():a("sv-placeholder",{directives:[{name:"loading",rawName:"v-loading",value:!0,expression:"true"}]})],1)},$s=[],Ts={name:"addDailyAndCost",components:{SvHeader:S},data:function(){return{body:!0,time:new Date,proDetail:[{projectId:"",jobTime:"1",summary:"",detail:"",projectState:""}],projectinfo:[],projectState:[],jobTime:[{timeName:"半天",timeValue:"1"},{timeName:"一天",timeValue:"2"}]}},methods:{backtoindex:function(){this.$router.push("/index")},addFun:function(){var t={projectId:"",jobTime:"1",summary:"",detail:"",projectState:""};this.proDetail.push(t)},deleteDocument:function(t){var e=this;1!=this.proDetail.length?this.proDetail.splice(t,1):this.$alert("日志信息必须填写！","提示",{confirmButtonText:"确定",callback:function(t){e.$message({type:"info",message:"action: ".concat(t)})}})},getProList:function(){var t=this;this.$axios.get("project/list").then(function(e){200==e.data.state?t.projectinfo=e.data.data.list:t.$alert("错误！！："+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})})},getState:function(t){var e=this,a=new URLSearchParams;a.append("projectId",t),this.$axios.post("project/process",a).then(function(t){200==t.data.state?e.projectState=t.data.data.moments:e.$alert("错误！！："+t.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})})},submit:function(){var t=this,e=[],a=[],s=!0,o=!1,n=void 0;try{for(var i,l=C()(this.proDetail);!(s=(i=l.next()).done);s=!0){var r=i.value;for(var c in r)if(""==r[c])return void this.$alert("请填写必要项","提示",{confirmButtonText:"确定",callback:function(t){}});var d={projectId:r.projectId,summary:r.summary,dailyDetail:r.detail},u={projectId:r.projectId,workTime:r.jobTime,momentId:r.projectState};e.push(d),a.push(u)}}catch(m){o=!0,n=m}finally{try{s||null==l.return||l.return()}finally{if(o)throw n}}var p=new URLSearchParams;p.append("uploadTime",E(this.time,"yyyy-MM-dd hh:mm:ss")),p.append("dailyList",Ne()(e)),p.append("costRecordList",Ne()(a)),this.$axios.post("project/work_record",p).then(function(e){200==e.data.state?(t.$alert("添加成功","提示",{confirmButtonText:"确定",callback:function(t){}}),t.backtoindex()):t.$alert("错误！！："+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})})}},mounted:function(){this.getProList()}},As=Ts,Is=(a("cd95"),Object(p["a"])(As,js,$s,!1,null,"0b22e1f8",null)),Ps=Is.exports,Bs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"proCrossCount"},[a("SvHeader",{attrs:{menuIndex:"3.5.3"}}),a("el-container",[a("el-aside",{staticStyle:{width:"3%"}}),a("el-main",[a("el-row",[a("el-col",{staticClass:"text-center ",attrs:{span:15,offset:4}},[a("h1",{staticClass:"add_btFont20"},[t._v("项目成本统计")])]),a("el-col",{staticClass:"mt-1",staticStyle:{"padding-left":"35px"},attrs:{span:5}},[a("el-date-picker",{attrs:{type:"year",placeholder:"选择年"},on:{change:function(e){t.getCostList()}},model:{value:t.year,callback:function(e){t.year=e},expression:"year"}})],1)],1),a("el-row",{staticClass:"mt-1"},[a("el-col",{attrs:{span:24}},[a("el-table",{staticClass:"w100",attrs:{data:t.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{label:"项目编号",type:"index",width:"100"}}),a("el-table-column",{attrs:{label:"项目名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.project.projectName))])]}}])}),a("el-table-column",{attrs:{label:"项目总监"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.project.buildName))])]}}])}),a("el-table-column",{attrs:{label:"人力成本"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.humanCost))])]}}])}),a("el-table-column",{attrs:{label:"差旅"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.stay))])]}}])}),a("el-table-column",{attrs:{label:"伙食"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.meals))])]}}])}),a("el-table-column",{attrs:{label:"交通"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.traffic))])]}}])}),a("el-table-column",{attrs:{label:"其他"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.others))])]}}])}),a("el-table-column",{attrs:{label:"总计"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.humanCost+e.row.others+e.row.stay+e.row.meals+e.row.traffic))])]}}])})],1)],1)],1),a("el-row",{staticClass:"mt-4"},[a("el-col",{staticClass:"text-right"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.totalPage,"pager-count":11,"page-size":t.pageSize,"current-page":t.curentPage},on:{"update:currentPage":function(e){t.curentPage=e},"current-change":t.getCostList}})],1)],1)],1),a("el-aside",{staticStyle:{width:"3%"}})],1)],1)},Ns=[],Ls={name:"proCrossCount",components:{SvHeader:S},data:function(){return{tableData:[],pageSize:10,totalPage:10,curentPage:1,allDataBuffer:"",extraCostLength:0,search:"",year:new Date}},methods:{getCostList:function(){var t=this;this.tableData=[];var e=new URLSearchParams;e.append("projectId",this.projectId),e.append("page",this.curentPage),e.append("pageSize",this.pageSize),e.append("year",this.year.getFullYear()),this.$axios({headers:{deviceCode:"A95ZEF1-47B5-AC90BF3"},method:"post",url:"census/cost",data:e}).then(function(e){200==e.data.state?(t.tableData=e.data.data.list,t.allDataBuffer=e.data.data.list,t.totalPage=e.data.data.total):t.$alert("错误！！："+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})})},searchFun:function(){}},mounted:function(){this.getCostList()}},Rs=Ls,Os=(a("6dcf"),Object(p["a"])(Rs,Bs,Ns,!1,null,"c8e04a9a",null)),Us=Os.exports,Es=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"documentTemplateList"},[a("SvHeader",{attrs:{menuIndex:"3.6.3"}}),a("el-container",[a("div",{staticStyle:{"z-index":"5"}},[a("transition",{attrs:{name:"el-fade-in"}},[t.isAddShow?a("SvAddDocumentTemplateWithFile",{on:{closeAddTemplateWithFile:function(e){t.closeAdd()}}}):t._e()],1)],1),a("el-aside",{staticStyle:{width:"3%"}}),a("el-main",[a("el-row",[a("el-col",{staticClass:"text-center",attrs:{span:18,offset:3}},[a("h1",{staticClass:"add_btFont"},[t._v("文档模板管理")])]),a("el-col",{staticClass:"mt-2 text-left",attrs:{span:3}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showAdd()}}},[t._v("新建文档模板")])],1)],1),a("el-row",{staticClass:"mt-2"},[a("el-col",{attrs:{span:24}},[a("el-table",{staticClass:"tborder w100",attrs:{data:t.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{label:"文档名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.docTypeDesc))])]}}])}),a("el-table-column",{attrs:{label:"文档类型",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.docTypeName))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.confirmDel(e.row.docTypeId)}}},[a("i",{staticClass:"el-icon-circle-close-outline"}),t._v(" 删除")])],1)],1)]}}])})],1)],1)],1),a("el-row",{staticClass:"mt-4"},[a("el-col",{staticClass:"text-right"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.totalPage,"pager-count":11,"page-size":t.pageSize,"current-page":t.curentPage},on:{"update:currentPage":function(e){t.curentPage=e},"current-change":t.getDocumentListData}})],1)],1)],1),a("el-aside",{staticStyle:{width:"3%"}})],1)],1)},Fs=[],Ms=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"AddDocumentTemplateWithFile"},[a("div",{staticClass:"bg-model"},[a("div",{staticClass:"bg-content"},[a("el-container",[a("el-main",[a("el-row",{staticClass:"mt-4"},[a("el-col",{attrs:{span:22,offset:1}},[a("a",{staticClass:"head-css"},[t._v("添加文档模板")])])],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:4,offset:2}},[a("a",{staticClass:"title-css"},[t._v("文档名称：")])]),a("el-col",{attrs:{span:15}},[a("el-input",{model:{value:t.addData.docTypeDesc,callback:function(e){t.$set(t.addData,"docTypeDesc",e)},expression:"addData.docTypeDesc"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:4,offset:2}},[a("a",{staticClass:"title-css"},[t._v("文档类型：")])]),a("el-col",{attrs:{span:15}},[a("el-input",{model:{value:t.addData.docName,callback:function(e){t.$set(t.addData,"docName",e)},expression:"addData.docName"}})],1)],1),a("el-row",{staticClass:"mt-2"},[a("el-col",{staticClass:"mt-5 text-right",attrs:{span:4,offset:2}},[a("a",{staticClass:"title-css"},[t._v("上传模板：")])]),a("el-col",{staticClass:"text-left ",attrs:{span:2}},[a("input",{staticClass:"cursor mt-1",staticStyle:{position:"absolute",opacity:"0",width:"70px",height:"100%","font-size":"0"},attrs:{type:"file",id:"fileData"},on:{change:function(e){t.handlerUpload(e)}}}),a("p",[a("el-button",{staticStyle:{cursor:"pointer"},attrs:{type:"primary",size:"small"}},[a("i",{staticClass:"el-icon-plus"}),t._v(" 上传")])],1)]),a("el-col",{staticClass:"text-left ",attrs:{span:8,offset:2}},[a("p",[t._v(t._s(t.fileName))])])],1),a("el-row",[a("el-col",{attrs:{span:8,offset:3}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"primary"},on:{click:function(e){t.submitData()}}},[t._v("提交")])],1),a("el-col",{attrs:{span:8,offset:2}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"info",plain:""},on:{click:function(e){t.close()}}},[t._v("取消")])],1)],1)],1)],1)],1)])])},zs=[],Hs={name:"AddDocumentTemplateWithFile",props:{},data:function(){return{addData:{docName:"",docTypeDesc:"",fileData:""},fileName:""}},methods:{close:function(){this.$emit("closeAddTemplateWithFile","")},submitData:function(){var t=this;for(var e in this.addData)if(""==this.addData[e])return void this.$alert("请填写必要信息"+e,"提示",{confirmButtonText:"确定",callback:function(t){}});var a=new FormData;a.append("docTypeName",this.addData.docName),a.append("docTypeDesc",this.addData.docTypeDesc),a.append("docFile",this.addData.fileData[0]),this.$axios.post("document/template_upload/",a).then(function(e){200==e.data.state?(t.$alert("添加成功","提示",{confirmButtonText:"确定",callback:function(t){}}),t.close()):t.$alert("错误！！："+e.data.msg,"提示",{confirmButtonText:"确定",callback:function(t){}})})},handlerUpload:function(t){this.fileName=t.target.files[0].name,this.addData.fileData=t.target.files,console.log(this.addData.fileData)}},mounted:function(){}},Ws=Hs,Vs=(a("679d"),Object(p["a"])(Ws,Ms,zs,!1,null,"3feb5e50",null)),Zs=Vs.exports,Ys={name:"documentTemplateList",components:{SvHeader:S,SvAddDocumentTemplateWithFile:Zs},data:function(){return{tableData:[],isAddShow:!1,isAddPermission:!1,perPermissonData:{},totalPage:10,pageSize:10,curentPage:1}},methods:{getDocumentListData:function(){var t=this,e=new FormData;e.append("page",this.curentPage),e.append("pageSize",this.pageSize),this.$axios.post("document/types_list",e).then(function(e){200==e.data.state?(t.tableData=e.data.data.list,t.totalPage=e.data.data.total):t.$alert(e.data.msg,"提示")})},showAdd:function(){this.isAddShow=!0},closeAdd:function(){this.isAddShow=!1,this.getDocumentListData()},confirmDel:function(t){var e=this;this.$confirm("是否确认删除","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"删除",cancelButtonText:"取消"}).then(function(){e.deleteDoc(t)})},deleteDoc:function(t){var e=this,a=new FormData;a.append("id",t),this.$axios.post("document/template_delete/",a).then(function(t){200==t.data.state?e.getDocumentListData():e.$alert(t.data.msg,"提示")})}},mounted:function(){this.getDocumentListData()}},Js=Ys,Ks=(a("6d5e"),Object(p["a"])(Js,Es,Fs,!1,null,"7d98029a",null)),Gs=Ks.exports,qs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"roleList"},[a("SvHeader",{attrs:{menuIndex:"3.6.1"}}),a("el-container",[a("div",{staticStyle:{"z-index":"5"}},[a("transition",{attrs:{name:"el-fade-in"}},[t.isAddShow?a("SvAddRole",{on:{closeAddRole:function(e){t.closeAddRole()}}}):t._e(),t.isAddPermission?a("SvAddAccountPermission",{attrs:{data:t.perPermissonData},on:{closeAddAcountPer:function(e){t.closeAddPermission()}}}):t._e()],1)],1),a("el-aside",{staticStyle:{width:"3%"}}),a("el-main",{},[a("el-row",[a("el-col",{staticClass:"text-center",attrs:{span:18,offset:3}},[a("h1",{staticClass:"add_btFont20"},[t._v("角色权限管理")])]),a("el-col",{staticClass:"mt-2 text-left",attrs:{span:3}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showAdd()}}},[t._v("新增角色")])],1)],1),a("el-row",{staticClass:"mt-2"},[a("el-col",{attrs:{span:24}},[a("el-table",{staticClass:"tborder w100",attrs:{data:t.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{label:"角色名称",width:"250",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return"NULL"!=e.row.roleData.roledesc?[a("span",[t._v(t._s(e.row.roleData.roledesc))])]:void 0}}])}),a("el-table-column",{attrs:{label:"权限",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return"NULL"!=e.row.roleData.roledesc?[0!=e.row.permissionData.length?a("div",{staticStyle:{"word-wrap":"break-word",width:"70%","margin-left":"15%"}},[a("el-row",t._l(e.row.permissionData,function(e,s){return a("el-col",{key:s,attrs:{span:6}},[a("span",[t._v(t._s(e.permissionDesc))])])}),1)],1):t._e(),0==e.row.permissionData.length?a("div",{staticStyle:{"word-wrap":"break-word"}},[a("span",[t._v("无")])]):t._e()]:void 0}}])}),a("el-table-column",{attrs:{label:"操作",width:"250",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return"NULL"!=e.row.roleData.roledesc?[a("el-row",[a("el-col",{attrs:{span:16,offset:4}},[a("el-button",{staticClass:"w100",attrs:{size:"mini",type:"primary"},on:{click:function(a){t.addPermission(e.row)}}},[a("i",{staticClass:"el-icon-plus"}),t._v(" 分配权限")])],1)],1),a("el-row",{staticClass:"mt-4"},[a("el-col",{attrs:{span:16,offset:4}},[a("el-button",{staticClass:"w100",attrs:{size:"mini",type:"danger"},on:{click:function(a){t.confirmDel(e.row.roleData.id)}}},[a("i",{staticClass:"el-icon-circle-close-outline"}),t._v(" 删除")])],1)],1)]:void 0}}])})],1)],1)],1)],1),a("el-aside",{staticStyle:{width:"3%"}})],1)],1)},Qs=[],Xs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addRole"},[a("div",{staticClass:"bg-model"},[a("div",{staticClass:"bg-content"},[a("el-container",[a("el-main",[a("el-row",{staticClass:"mt-4"},[a("el-col",{attrs:{span:22,offset:1}},[a("a",{staticClass:"head-css"},[t._v("添加角色")])])],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-4 text-right",attrs:{span:6}},[a("a",{staticClass:"title-css"},[t._v("角色名称：")])]),a("el-col",{attrs:{span:16}},[a("el-input",{model:{value:t.addData.roledesc,callback:function(e){t.$set(t.addData,"roledesc",e)},expression:"addData.roledesc"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{attrs:{span:9,offset:2}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"primary",size:"small"},on:{click:function(e){t.submitData()}}},[t._v("提交")])],1),a("el-col",{attrs:{span:9,offset:2}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"info",plain:"",size:"small"},on:{click:function(e){t.close()}}},[t._v("取消")])],1)],1)],1)],1)],1)])])},to=[],eo={name:"addRole",props:{projectId:String},data:function(){return{addData:{roledesc:""},option:[]}},methods:{close:function(){this.$emit("closeAddRole","")},submitData:function(){var t=this;if(""!=this.addData.roledesc){var e=new URLSearchParams;e.append("roleDesc",this.addData.roledesc),this.$axios.post("user/addRole/",e).then(function(e){200==e.data.state?(t.$alert("添加成功","提示"),t.close()):t.$alert("错误！！："+e.data.msg,"提示")})}else this.$alert("请填写必要信息","提示")}},mounted:function(){}},ao=eo,so=(a("ef50"),Object(p["a"])(ao,Xs,to,!1,null,"4429d864",null)),oo=so.exports,no={name:"roleList",components:{SvHeader:S,SvAddRole:oo,SvAddAccountPermission:ws},data:function(){return{tableData:[],isAddShow:!1,isAddPermission:!1,perPermissonData:{}}},methods:{getRoleListData:function(){var t=this;this.$axios.get("user/getRoleOfPermissionList").then(function(e){200==e.data.state?t.tableData=e.data.data:t.$alert(e.data.msg,"提示")})},showAdd:function(){this.isAddShow=!0},closeAddRole:function(){this.isAddShow=!1,this.getRoleListData()},addPermission:function(t){this.perPermissonData=t,this.isAddPermission=!0},closeAddPermission:function(){this.isAddPermission=!1,this.getRoleListData()},confirmDel:function(t){var e=this;this.$confirm("是否确认删除","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"删除",cancelButtonText:"取消"}).then(function(){e.deleteRole(t)})},deleteRole:function(t){var e=this,a=new FormData;a.append("id",t),this.$axios.post("user/delRole/",a).then(function(t){200==t.data.state?e.getRoleListData():e.$alert(t.data.msg,"提示")})}},mounted:function(){this.getRoleListData()}},io=no,lo=(a("5169"),Object(p["a"])(io,qs,Qs,!1,null,"73c12720",null)),ro=lo.exports,co=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"roleCostList"},[a("SvHeader",{attrs:{menuIndex:"3.6.2"}}),a("el-container",[a("div",{staticStyle:{"z-index":"5"}},[a("transition",{attrs:{name:"el-fade-in"}},[t.isAddShow?a("SvUpdateRoleCost",{attrs:{data:t.updateData},on:{closeUpdateRoleCost:function(e){t.closeUpdateRoleCost()}}}):t._e()],1)],1),a("el-aside",{staticStyle:{width:"3%"}}),a("el-main",[a("el-row",[a("el-col",{staticClass:"text-center",attrs:{span:18,offset:3}},[a("h1",{staticClass:"add_btFont20"},[t._v("角色成本管理")])])],1),a("el-row",{staticClass:"mt-2"},[a("el-col",{attrs:{span:24}},[a("el-table",{staticClass:"tborder w100",attrs:{data:t.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{label:"角色",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return"NULL"!=e.row.roleName?[a("span",[t._v(t._s(e.row.roleName))])]:void 0}}])}),a("el-table-column",{attrs:{label:"成本（半天）",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return"NULL"!=e.row.roleName?[a("span",[t._v(t._s(e.row.roleCostHalfDay))])]:void 0}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return"NULL"!=e.row.roleName?[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.updateShow(e.row)}}},[a("i",{staticClass:"el-icon-edit"}),t._v(" 修改")])],1)],1)]:void 0}}])})],1)],1)],1)],1),a("el-aside",{staticStyle:{width:"3%"}})],1)],1)},uo=[],po=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"updateRoleCost"},[a("div",{staticClass:"bg-model"},[a("div",{staticClass:"bg-content"},[a("el-container",[a("el-main",[a("el-row",{staticClass:"mt-4"},[a("el-col",{attrs:{span:22,offset:1}},[a("a",{staticClass:"head-css"},[t._v("成本设置")])])],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-4 text-right",attrs:{span:8}},[a("a",{staticClass:"title-css"},[t._v("角色名称：")])]),a("el-col",{staticClass:"mt-4",attrs:{span:14}},[a("a",{staticClass:"title-css"},[t._v(" "+t._s(t.data.roleName))])])],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-4 text-right",attrs:{span:8}},[a("a",{staticClass:"title-css"},[t._v("角色成本(半天)：")])]),a("el-col",{attrs:{span:14}},[a("el-input",{model:{value:t.data.roleCostHalfDay,callback:function(e){t.$set(t.data,"roleCostHalfDay",e)},expression:"data.roleCostHalfDay"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{attrs:{span:9,offset:2}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"primary",size:"small"},on:{click:function(e){t.submitData()}}},[t._v("提交")])],1),a("el-col",{attrs:{span:9,offset:2}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"info",plain:"",size:"small"},on:{click:function(e){t.close()}}},[t._v("取消")])],1)],1)],1)],1)],1)])])},mo=[],fo={name:"updateRoleCost",props:{data:Object},data:function(){return{}},methods:{close:function(){this.$emit("closeUpdateRoleCost","")},submitData:function(){var t=this;if(""!=this.data.roleCostHalfDay){var e=new URLSearchParams;e.append("roleId",this.data.id),e.append("roleCostHalfDay",this.data.roleCostHalfDay),this.$axios.post("project/role_cost_modify/",e).then(function(e){200==e.data.state?(t.$alert("修改成功","提示"),t.close()):t.$alert("错误！！："+e.data.msg,"提示")})}else this.$alert("请填写工资金额","提示")}},mounted:function(){}},ho=fo,vo=(a("4556"),Object(p["a"])(ho,po,mo,!1,null,"a5384f9c",null)),go=vo.exports,bo={name:"roleCostList",components:{SvHeader:S,SvUpdateRoleCost:go},data:function(){return{tableData:[],isAddShow:!1,updateData:{}}},methods:{getRoleListData:function(){var t=this;this.$axios.get("project/role_costs").then(function(e){200==e.data.state?t.tableData=e.data.data:t.$alert(e.data.msg,"提示")})},updateShow:function(t){this.isAddShow=!0,this.updateData=t},closeUpdateRoleCost:function(){this.isAddShow=!1,this.getRoleListData()}},mounted:function(){this.getRoleListData()}},Co=bo,yo=(a("8e02"),Object(p["a"])(Co,co,uo,!1,null,"29a5bbe2",null)),_o=yo.exports,wo=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"knowledge"},[s("SvHeader",{attrs:{menuIndex:"6"}}),s("el-container",[s("el-aside",{staticStyle:{width:"10%"}}),s("el-main",{staticClass:"clearfix"},[s("el-row",{staticClass:"add_serch"},[s("el-col",{staticClass:"text-center",attrs:{span:8,offset:7}},[s("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入关键字"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[s("el-button",{attrs:{slot:"prepend",icon:"el-icon-search"},slot:"prepend"})],1)],1),s("el-col",{staticClass:"mal10",attrs:{span:2}},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.searchKey()}}},[t._v("搜索")])],1)],1),s("div",{staticClass:"add_knowLeft"},[s("el-row",{staticClass:"mt-1 "},[s("el-col",{staticClass:"add_knowTitle"},[s("strong",{staticClass:"title add_strong add_Font16"},[s("i",{staticClass:"fa fa-list ",attrs:{"aria-hidden":"true"}}),t._v("\n\t                             知识分类\n\t                        ")]),s("el-button",{staticClass:"ml-4 add_knowBtn1",attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){t.addFirstShow()}}},[t._v("+ 新建分类")])],1)],1),t.body?s("el-row",{staticClass:"add_sortCon"},[s("el-col",t._l(t.list,function(e,o){return s("el-row",{key:o},[s("el-col",{staticClass:"carBox1 clearfix"},[s("span",{staticClass:"add_Font15"},[t._v(t._s(e.className))]),s("i",{staticClass:"fas fa-pencil-alt ml-1 text-danger mt-1 cursor",attrs:{"aria-hidden":"true"},on:{click:function(a){t.changeFirstClass(e,0)}}}),s("i",{staticClass:"ml-3 cursor add_sortTwo add_Font12",attrs:{title:"添加"},on:{click:function(a){t.addSecondShow(e.id)}}},[t._v("\n\t                                \t+ 新建二级分类\n\t                                ")]),s("span",{staticStyle:{float:"left"}},[e.close?t._e():s("i",{staticClass:"cursor",attrs:{"aria-hidden":"true"},on:{click:function(e){t.changeShow(o)}}},[s("img",{attrs:{src:a("c49b")}})]),e.close?s("i",{staticClass:"cursor",attrs:{"aria-hidden":"true"},on:{click:function(e){t.changeShow(o)}}},[s("img",{attrs:{src:a("1809")}})]):t._e()])]),s("transition",{attrs:{name:"el-zoom-in-top"}},[e["close"]?t._e():s("el-col",[s("div",{staticClass:"mab25 clearfix add_TwoConList"},t._l(e.childClasses,function(n,i){return s("div",{key:i,staticClass:"add_Twolist"},[s("el-row",{staticClass:"mal50 add_TwoCon"},[s("span",{staticClass:"mat5 ml-2"},[n.close?t._e():s("i",{staticClass:"cursor",attrs:{"aria-hidden":"true"},on:{click:function(e){t.changeSecondShow(o,i)}}},[s("img",{attrs:{src:a("0d6d")}})]),n.close?s("i",{staticClass:"cursor",attrs:{"aria-hidden":"true"},on:{click:function(e){t.changeSecondShow(o,i)}}},[s("img",{attrs:{src:a("27ed")}})]):t._e()]),s("p",{staticClass:"ml-2 add_sortTitle add_Font14"},[t._v(t._s(n.className))]),s("i",{staticClass:"fas fa-pencil-alt ml-1 text-danger mt-1 cursor",attrs:{"aria-hidden":"true"},on:{click:function(e){t.changeFirstClass(n,1)}}}),s("i",{staticClass:"cursor mal10 add_sortThree",attrs:{title:"添加"},on:{click:function(e){t.addThirdShow(n.id)}}},[t._v("+ 三级分类")])]),s("transition",{attrs:{name:"el-zoom-in-top"}},[n.close?s("el-row",{staticClass:"mal50 mat5 add_sortThreeCon"},[s("el-col",{staticStyle:{"padding-bottom":"5px"},attrs:{span:22,offset:2}},t._l(n.childClasses,function(a,o){return s("el-col",{key:o,staticClass:"mab5"},[s("a",{staticClass:"secondTitle add_Font13",on:{click:function(s){t.showBook(a.id,e.className,n.className,a.className)}}},[t._v("\n\t                                                            \t"+t._s(a.className)+"\n\t                                                            ")]),s("i",{staticClass:"fas fa-pencil-alt ml-1 text-danger mt-1 cursor",attrs:{"aria-hidden":"true"},on:{click:function(e){t.changeFirstClass(a,2)}}})])}),1)],1):t._e()],1)],1)}),0)])],1)],1)}),1)],1):t._e()],1),s("div",{staticClass:"add_knowRight"},[t.body?s("el-row",{staticClass:"mt-4"},[s("el-col",{staticClass:"add_knowTitle"},[s("strong",{staticClass:"title add_strong add_Font16"},[s("i",{staticClass:"el-icon-time"}),t._v(" 最新知识")])])],1):t._e(),t.body?s("el-row",{staticClass:"add_sortCon"},t._l(t.latelyBook,function(e,a){return s("el-col",{key:a},[s("div",{staticClass:"book add_book clearfix",on:{click:function(a){t.historySearch(e.id)}}},[s("span",{staticClass:"add_Font15",staticStyle:{float:"left"}},[t._v(t._s(e.bookName))]),s("p",{staticClass:"add_sortTime add_Font15",staticStyle:{float:"right"}},[t._v(t._s(e.editTime))])])])}),1):t._e()],1),t.body?t._e():s("sv-placeholder",{directives:[{name:"loading",rawName:"v-loading",value:!0,expression:"true"}]})],1),s("el-aside",{staticStyle:{width:"10%"}})],1),s("div",[s("transition",{attrs:{name:"el-fade-in"}},[t.isAddFirstShow?s("SvAddFirst",{on:{closeAddFirst:function(e){t.closeAddFirst()},closeWithReFlash:function(e){t.closeAddWithOutFlash()}}}):t._e()],1),s("transition",{attrs:{name:"el-fade-in"}},[t.isAddSecondShow?s("SvAddSecond",{attrs:{parentClass:t.parentClass},on:{closeAddSecond:function(e){t.closeAddSecond()},closeAddSecondWithOutFlash:function(e){t.closeAddWithOutFlash()}}}):t._e()],1),s("transition",{attrs:{name:"el-fade-in"}},[t.isAddThirdShow?s("SvAddThird",{attrs:{parentClass:t.parentClass},on:{closeAddThird:function(e){t.closeAddThird()},closeAddSecondWithOutFlash:function(e){t.closeAddWithOutFlash()}}}):t._e()],1),s("transition",{attrs:{name:"el-fade-in"}},[t.isChangeClass?s("SvKnowledgeClassUpdate",{attrs:{changeData:t.changeData,classPriority:t.classPriority},on:{closeChangeFirst:function(e){t.closeChangeFirst()},closeWithReFlash:function(e){t.closeAddWithOutFlash()}}}):t._e()],1)],1)],1)},ko=[],Do=(a("386d"),a("86d4"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addFirst"},[a("div",{staticClass:"bg-model"},[a("div",{staticClass:"bg-content"},[a("el-container",[a("el-main",[a("el-row",{staticClass:"mt-2"},[a("el-col",{attrs:{span:22,offset:1}},[a("a",{staticClass:"head-css"},[t._v("添加分类")])])],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-4 text-right",attrs:{span:6}},[a("a",{staticClass:"title-css"},[t._v("分类名称：")])]),a("el-col",{attrs:{span:16}},[a("el-input",{model:{value:t.addData.className,callback:function(e){t.$set(t.addData,"className",e)},expression:"addData.className"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-4 text-right",attrs:{span:6}},[a("a",{staticClass:"title-css"},[t._v("分类描述：")])]),a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.addData.classDesc,callback:function(e){t.$set(t.addData,"classDesc",e)},expression:"addData.classDesc"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-4 text-right",attrs:{span:6}},[a("a",{staticClass:"title-css"},[t._v("关键字：")])]),a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{type:"textarea",placeholder:"用逗号分割"},model:{value:t.addData.keywords,callback:function(e){t.$set(t.addData,"keywords",e)},expression:"addData.keywords"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{attrs:{span:9,offset:2}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"primary",size:"small"},on:{click:function(e){t.submitData()}}},[t._v("提交")])],1),a("el-col",{attrs:{span:9,offset:2}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"info",plain:"",size:"small"},on:{click:function(e){t.closeWithReFlash()}}},[t._v("取消")])],1)],1)],1)],1)],1)])])}),xo=[],So={name:"addFirst",data:function(){return{addData:{className:"",classDesc:"",keywords:""},option:[]}},methods:{close:function(){this.$emit("closeAddFirst","")},closeWithReFlash:function(){this.$emit("closeWithReFlash","")},submitData:function(){var t=this;for(var e in this.addData)if(""==this.addData[e]&&"className"==e)return void this.$alert("请填写必要信息","提示");var a=new URLSearchParams;a.append("className",this.addData.className),a.append("classDesc",this.addData.classDesc),a.append("keywords",this.addData.keywords.replace(/，/gi,",")),this.$axios.post("library/first_build/",a).then(function(e){200==e.data.state?(t.$alert("添加成功","提示"),t.close()):t.$alert("错误！！："+e.data.msg,"提示")})}},mounted:function(){}},jo=So,$o=(a("d329"),Object(p["a"])(jo,Do,xo,!1,null,"287b14b3",null)),To=$o.exports,Ao=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addSecond"},[a("div",{staticClass:"bg-model"},[a("div",{staticClass:"bg-content"},[a("el-container",[a("el-main",[a("el-row",{staticClass:"mt-2"},[a("el-col",{attrs:{span:22,offset:1}},[a("a",{staticClass:"head-css"},[t._v("添加二级分类")])])],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-4 text-right",attrs:{span:6}},[a("a",{staticClass:"title-css"},[t._v("分类名称：")])]),a("el-col",{attrs:{span:16}},[a("el-input",{model:{value:t.addData.className,callback:function(e){t.$set(t.addData,"className",e)},expression:"addData.className"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-4 text-right",attrs:{span:6}},[a("a",{staticClass:"title-css"},[t._v("分类描述：")])]),a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.addData.classDesc,callback:function(e){t.$set(t.addData,"classDesc",e)},expression:"addData.classDesc"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-4 text-right",attrs:{span:6}},[a("a",{staticClass:"title-css"},[t._v("关键字：")])]),a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{type:"textarea",placeholder:"用逗号分割"},model:{value:t.addData.keywords,callback:function(e){t.$set(t.addData,"keywords",e)},expression:"addData.keywords"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{attrs:{span:9,offset:2}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"primary",size:"small"},on:{click:function(e){t.submitData()}}},[t._v("提交")])],1),a("el-col",{attrs:{span:9,offset:2}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"info",plain:"",size:"small"},on:{click:function(e){t.closeAddSecondWithOutFlash()}}},[t._v("取消")])],1)],1)],1)],1)],1)])])},Io=[],Po={name:"addSecond",props:{parentClass:Number},data:function(){return{addData:{className:"",classDesc:"",keywords:""},option:[]}},methods:{close:function(){this.$emit("closeAddSecond","")},closeAddSecondWithOutFlash:function(){this.$emit("closeAddSecondWithOutFlash","")},submitData:function(){var t=this;for(var e in this.addData)if(""==this.addData[e]&&"className"==e)return void this.$alert("请填写必要信息","提示");var a=new URLSearchParams;a.append("className",this.addData.className),a.append("classDesc",this.addData.classDesc),a.append("keywords",this.addData.keywords.replace(/，/gi,",")),a.append("parentClass",this.parentClass),this.$axios.post("library/second_build/",a).then(function(e){200==e.data.state?(t.$alert("添加成功","提示"),t.close()):t.$alert("错误！！："+e.data.msg,"提示")})}},mounted:function(){}},Bo=Po,No=(a("bb57"),Object(p["a"])(Bo,Ao,Io,!1,null,"99648704",null)),Lo=No.exports,Ro=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addThird"},[a("div",{staticClass:"bg-model"},[a("div",{staticClass:"bg-content"},[a("el-container",[a("el-main",[a("el-row",{staticClass:"mt-2"},[a("el-col",{attrs:{span:22,offset:1}},[a("a",{staticClass:"head-css"},[t._v("添加三级分类")])])],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-4 text-right",attrs:{span:6}},[a("a",{staticClass:"title-css"},[t._v("分类名称：")])]),a("el-col",{attrs:{span:16}},[a("el-input",{model:{value:t.addData.className,callback:function(e){t.$set(t.addData,"className",e)},expression:"addData.className"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-4 text-right",attrs:{span:6}},[a("a",{staticClass:"title-css"},[t._v("分类描述：")])]),a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.addData.classDesc,callback:function(e){t.$set(t.addData,"classDesc",e)},expression:"addData.classDesc"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-4 text-right",attrs:{span:6}},[a("a",{staticClass:"title-css"},[t._v("关键字：")])]),a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{type:"textarea",placeholder:"用逗号分割"},model:{value:t.addData.keywords,callback:function(e){t.$set(t.addData,"keywords",e)},expression:"addData.keywords"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{attrs:{span:9,offset:2}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"primary",size:"small"},on:{click:function(e){t.submitData()}}},[t._v("提交")])],1),a("el-col",{attrs:{span:9,offset:2}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"info",plain:"",size:"small"},on:{click:function(e){t.closeAddSecondWithOutFlash()}}},[t._v("取消")])],1)],1)],1)],1)],1)])])},Oo=[],Uo={name:"addThird",props:{parentClass:Number},data:function(){return{addData:{className:"",classDesc:"",keywords:""},option:[]}},methods:{close:function(){this.$emit("closeAddThird","")},closeAddSecondWithOutFlash:function(){this.$emit("closeAddSecondWithOutFlash","")},submitData:function(){var t=this;for(var e in this.addData)if(""==this.addData[e]&&"className"==e)return void this.$alert("请填写必要信息","提示");var a=new URLSearchParams;a.append("className",this.addData.className),a.append("classDesc",this.addData.classDesc),a.append("keywords",this.addData.keywords.replace(/，/gi,",")),a.append("parentClass",this.parentClass),this.$axios.post("library/third_build/",a).then(function(e){200==e.data.state?(t.$alert("添加成功","提示"),t.close()):t.$alert("错误！！："+e.data.msg,"提示")})}},mounted:function(){}},Eo=Uo,Fo=(a("6672"),Object(p["a"])(Eo,Ro,Oo,!1,null,"75188420",null)),Mo=Fo.exports,zo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"knowLedgeUpdate"},[a("div",{staticClass:"bg-model"},[a("div",{staticClass:"bg-content"},[a("el-container",[a("el-main",[a("el-row",{staticClass:"mt-2"},[a("el-col",{attrs:{span:22,offset:1}},[a("a",{staticClass:"head-css"},[t._v("修改分类")])])],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-4 text-right",attrs:{span:6}},[a("a",{staticClass:"title-css"},[t._v("分类名称：")])]),a("el-col",{attrs:{span:16}},[a("el-input",{model:{value:t.changeDataBuffer.className,callback:function(e){t.$set(t.changeDataBuffer,"className",e)},expression:"changeDataBuffer.className"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-4 text-right",attrs:{span:6}},[a("a",{staticClass:"title-css"},[t._v("分类描述：")])]),a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.changeDataBuffer.classDesc,callback:function(e){t.$set(t.changeDataBuffer,"classDesc",e)},expression:"changeDataBuffer.classDesc"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-4 text-right",attrs:{span:6}},[a("a",{staticClass:"title-css"},[t._v("关键字：")])]),a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{type:"textarea",placeholder:"用逗号分割"},model:{value:t.changeDataBuffer.keywords,callback:function(e){t.$set(t.changeDataBuffer,"keywords",e)},expression:"changeDataBuffer.keywords"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{attrs:{span:9,offset:2}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"primary",size:"medium"},on:{click:function(e){t.submitData()}}},[t._v("提交")])],1),a("el-col",{attrs:{span:9,offset:2}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"info",plain:"",size:"medium"},on:{click:function(e){t.closeWithReFlash()}}},[t._v("取消")])],1)],1)],1)],1)],1)])])},Ho=[],Wo={name:"knowLedgeUpdate",props:{changeData:Object,classPriority:Number},data:function(){return{changeDataBuffer:{},option:[]}},methods:{close:function(){this.$emit("closeChangeFirst","")},closeWithReFlash:function(){this.$emit("closeWithReFlash","")},submitData:function(){var t=this,e="";for(var a in 0==this.classPriority?e="library/first_update/":1==this.classPriority?e="library/second_update/":2==this.classPriority&&(e="library/third_update/"),this.addData)if(""==this.addData[a]&&"className"==a)return void this.$alert("请填写必要信息","提示");var s=new URLSearchParams;s.append("id",this.changeDataBuffer.id),s.append("className",this.changeDataBuffer.className),s.append("classDesc",this.changeDataBuffer.classDesc),s.append("keywords",this.changeDataBuffer.keywords.replace(/，/gi,",")),0!=this.classPriority&&s.append("parentClass",this.changeDataBuffer.parentClassId),this.$axios.post(e,s).then(function(e){200==e.data.state?(t.$alert("修改成功","提示"),t.close()):t.$alert("错误！！："+e.data.msg,"提示")})}},mounted:function(){this.changeDataBuffer=JSON.parse(Ne()(this.changeData))}},Vo=Wo,Zo=(a("74bc"),Object(p["a"])(Vo,zo,Ho,!1,null,"655f720b",null)),Yo=Zo.exports,Jo={name:"knowledge",components:{SvHeader:S,SvPlaceholder:tt,SvAddFirst:To,SvAddSecond:Lo,SvAddThird:Mo,SvKnowledgeClassUpdate:Yo},data:function(){return{firstList:[],list:[],body:!1,isAddFirstShow:!1,isAddSecondShow:!1,isAddThirdShow:!1,parentClass:0,latelyBook:[],search:"",isChangeClass:!1,changeData:{},classPriority:0}},methods:{getFirstList:function(){var t=this;this.body=!1,this.list=[],this.$axios.get("library/fist/").then(function(e){200==e.data.state?(t.firstList=e.data.data,t.getSecondList()):t.$alert(e.data.msg,"提示")})},getSecondList:function(){var t=this,e=!0,a=!1,s=void 0;try{for(var o,n=C()(this.firstList);!(e=(o=n.next()).done);e=!0){var i=o.value,l=new FormData;l.append("firstClassId",i.id),this.$axios.post("library/firstClass/",l).then(function(e){200==e.data.state?t.list.push(e.data.data):t.$alert(e.data.msg,"提示")})}}catch(r){a=!0,s=r}finally{try{e||null==n.return||n.return()}finally{if(a)throw s}}setTimeout(function(){t.body=!0},500)},addFirstShow:function(){this.isAddFirstShow=!0},closeAddFirst:function(){this.isAddFirstShow=!1,this.getAllList()},addSecondShow:function(t){this.parentClass=t,this.isAddSecondShow=!0},closeAddSecond:function(){this.isAddSecondShow=!1,this.getAllList()},addThirdShow:function(t){this.parentClass=t,this.isAddThirdShow=!0},showBook:function(t,e,a,s){sessionStorage["thirdId"]=t,sessionStorage["firstName"]=e,sessionStorage["secondName"]=a,sessionStorage["thirdName"]=s,this.$router.push("/knowledge-book")},closeAddThird:function(){this.isAddThirdShow=!1,this.getAllList()},getLately:function(){var t=this;this.$axios.get("library/recent").then(function(e){if(200==e.data.state){var a=!0,s=!1,o=void 0;try{for(var n,i=C()(e.data.data);!(a=(n=i.next()).done);a=!0){var l=n.value;l.editTime=E(new Date(l.editTime),"yyyy-MM-dd")}}catch(r){s=!0,o=r}finally{try{a||null==i.return||i.return()}finally{if(s)throw o}}t.latelyBook=e.data.data}else t.getFirstList()})},searchKey:function(){sessionStorage["thirdId"]=-1,sessionStorage["firstName"]="查询结果",sessionStorage["secondName"]="",sessionStorage["thirdName"]="",sessionStorage["knowledgeSearch"]=this.search,this.$router.push("/knowledge-book")},historySearch:function(t){sessionStorage["thirdId"]=-2,sessionStorage["firstName"]="查询结果",sessionStorage["thirdName"]="",sessionStorage["secondName"]="",sessionStorage["knowledgeSearch"]=t,this.$router.push("/knowledge-book")},closeAddWithOutFlash:function(){this.isAddFirstShow=!1,this.isAddSecondShow=!1,this.isAddThirdShow=!1,this.isChangeClass=!1},getAllList:function(){var t=this;this.list=[],this.body=!1,this.$axios.get("/library/class/").then(function(e){if(200==e.data.state){var a=!0,s=!1,o=void 0;try{for(var n,i=C()(e.data.data);!(a=(n=i.next()).done);a=!0){var l=n.value;l["close"]=!0;var r=!0,c=!1,d=void 0;try{for(var u,p=C()(l.childClasses);!(r=(u=p.next()).done);r=!0){var m=u.value;m["close"]=!1}}catch(f){c=!0,d=f}finally{try{r||null==p.return||p.return()}finally{if(c)throw d}}}}catch(f){s=!0,o=f}finally{try{a||null==i.return||i.return()}finally{if(s)throw o}}t.list=e.data.data,t.body=!0}else t.$alert(e.data.msg,"提示")})},changeShow:function(t){this.$set(this.list[t],"close",!this.list[t]["close"])},changeSecondShow:function(t,e){this.$set(this.list[t]["childClasses"][e],"close",!this.list[t]["childClasses"][e]["close"])},changeFirstClass:function(t,e){this.isChangeClass=!0,this.changeData=t,this.classPriority=e},closeChangeFirst:function(){this.isChangeClass=!1,this.getAllList()}},mounted:function(){this.getAllList(),this.getLately()}},Ko=Jo,Go=(a("fe57"),Object(p["a"])(Ko,wo,ko,!1,null,"1dc06968",null)),qo=Go.exports,Qo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"knowledgeBook"},[a("SvHeader",{attrs:{menuIndex:"6"}}),a("el-container",[a("el-aside",{staticStyle:{width:"10%"}}),a("el-main",[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-row",{staticClass:"mt-1"},[a("el-col",[a("strong",{staticClass:"title cursor back",staticStyle:{"padding-bottom":"10px"},on:{click:function(e){t.back()}}},[a("i",{staticClass:"fa fa-list",attrs:{"aria-hidden":"true"}}),t._v(" 知识分类\n              ")])])],1),a("el-row",{staticClass:"mt-4"},[a("el-menu",{staticClass:"el-menu-vertical-demo add_el_menu",attrs:{"default-active":t.index.toString(),"active-text-color":"#409EFF","text-color":"black"}},[t._l(t.list,function(e,s){return a("el-submenu",{key:s,attrs:{index:e.id.toString()}},[a("template",{slot:"title"},[a("span",[t._v(t._s(e.className))])]),0!=e.childClasses.length?a("div",t._l(e.childClasses,function(s,o){return a("el-submenu",{key:o,staticClass:"add_el_menuTwo",attrs:{index:s.id.toString()+o}},[a("template",{slot:"title"},[a("span",[t._v(t._s(s.className))])]),t._l(s.childClasses,function(o,n){return a("el-menu-item",{key:n,staticClass:"add_el_menuThree",attrs:{index:o.id.toString()},on:{click:function(a){t.chose(o.id,e.className,s.className,o.className)}}},[t._v(t._s(o.className))])})],2)}),1):t._e()],2)}),a("el-menu-item",{attrs:{index:"-1"},on:{click:function(e){t.search()}}},[a("template",{slot:"title"},[a("span",[t._v("查询结果")])])],2)],2)],1)],1),a("el-col",{attrs:{span:18}},[a("el-row",[a("el-col",{staticStyle:{"margin-top":"5px"},attrs:{span:20}},[a("strong",{staticClass:"title add_Knowtitle",staticStyle:{"padding-left":"15px"}},[t._v("当前分类："+t._s(t.firstName)+"/"+t._s(t.secondName)+"/"+t._s(t.thirdName))])]),a("el-col",{attrs:{span:3,offset:1}},[a("el-button",{staticClass:"w100",attrs:{type:"primary",size:"small"},on:{click:function(e){t.showAdd()}}},[t._v("添加")])],1)],1),t.body&&0==t.bookList.length?a("el-row",{staticClass:"text-center mt-5"},[a("el-col",{staticClass:"mt-5"},[t._v("无数据")])],1):t._e(),t.body&&0!=t.bookList.length?a("div",t._l(t.bookList,function(e,s){return a("el-row",{key:s,staticClass:"mt-2 ml-2 card"},[a("el-col",[a("el-row",[a("el-col",[a("strong",{staticStyle:{"font-size":"1.2em"}},[t._v(t._s(e.bookName))])])],1),a("el-row",[a("el-col",[a("p",[t._v(t._s(e.bookDesc))])])],1),a("el-row",[a("el-col",t._l(e.bookKeywords.split(","),function(e,s){return a("span",{key:s,staticClass:"tag"},[t._v(t._s(e))])}),0)],1),a("el-row",[a("el-col",[a("p",[a("i",{staticClass:"fas fa-user"}),t._v("\n                       "+t._s(e.uploadName)+"   "+t._s(e.editTime)+"\n                    ")])])],1),a("el-row",[a("el-col",[a("a",{staticClass:"download",on:{click:function(a){t.downLoadBook(e.id)}}},[t._v("下载")]),a("a",{staticClass:"download ml-4",on:{click:function(a){t.deleteBook(e.id)}}},[t._v("删除")])])],1)],1)],1)}),1):t._e(),t.body?t._e():a("sv-placeholder",{directives:[{name:"loading",rawName:"v-loading",value:!0,expression:"true"}]}),t.body?a("el-row",{staticClass:"mt-4"},[a("el-col",{staticClass:"text-right"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.totalPage,"pager-count":11,"page-size":t.pageSize,"current-page":t.curentPage},on:{"update:currentPage":function(e){t.curentPage=e},"current-change":t.getBookList}})],1)],1):t._e()],1)],1)],1),a("el-aside",{staticStyle:{width:"10%"}})],1),a("div",[a("transition",{attrs:{name:"el-fade-in"}},[t.isAddShow?a("SvAddBook",{on:{closeAdd:function(e){t.closeAdd()}}}):t._e()],1)],1)],1)},Xo=[],tn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addBook"},[a("div",{staticClass:"bg-model"},[a("div",{staticClass:"bg-content"},[a("el-container",[a("el-main",[a("el-row",{staticClass:"mt-2"},[a("el-col",{attrs:{span:22,offset:1}},[a("a",{staticClass:"head-css"},[t._v("添加知识文档")])])],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-4 text-right",attrs:{span:6}},[a("a",{staticClass:"title-css"},[t._v("文档名称：")])]),a("el-col",{attrs:{span:16}},[a("el-input",{model:{value:t.addData.bookName,callback:function(e){t.$set(t.addData,"bookName",e)},expression:"addData.bookName"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-4 text-right",attrs:{span:6}},[a("a",{staticClass:"title-css"},[t._v("文档描述：")])]),a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.addData.bookDesc,callback:function(e){t.$set(t.addData,"bookDesc",e)},expression:"addData.bookDesc"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-4 text-right",attrs:{span:6}},[a("a",{staticClass:"title-css"},[t._v("关键字：")])]),a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{type:"textarea",placeholder:"用逗号分割"},model:{value:t.addData.bookKeywords,callback:function(e){t.$set(t.addData,"bookKeywords",e)},expression:"addData.bookKeywords"}})],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{staticClass:"mt-2 text-right",attrs:{span:6}},[a("a",{staticClass:"title-css"},[t._v("文档文件：")])]),a("el-col",{attrs:{span:16}},[a("input",{staticClass:"cursor mt-1",staticStyle:{position:"absolute",opacity:"0"},attrs:{type:"file",id:"fileData"},on:{change:function(e){t.handlerUpload(e)}}}),a("el-button",{staticClass:"mt-2",attrs:{type:"primary",size:"mini"}},[a("i",{staticClass:"el-icon-plus"}),t._v(" 添加")]),t._v("\n                             "+t._s(t.fileList)+"\n                        ")],1)],1),a("el-row",{staticClass:"mt-5"},[a("el-col",{attrs:{span:9,offset:2}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"primary",size:"small"},on:{click:function(e){t.submitData()}}},[t._v("提交")])],1),a("el-col",{attrs:{span:9,offset:2}},[a("el-button",{staticClass:"w100 mt-5",attrs:{type:"info",plain:"",size:"small"},on:{click:function(e){t.close()}}},[t._v("取消")])],1)],1)],1)],1)],1)])])},en=[],an={name:"addBook",data:function(){return{addData:{bookName:"",bookDesc:"",bookKeywords:"",file:""},fileList:"",option:[]}},methods:{close:function(){this.$emit("closeAdd","")},submitData:function(){var t=this;for(var e in this.addData)if(""==this.addData[e])return void this.$alert("请填写必要信息","提示");if(-1!=sessionStorage["secondId"]&&-2!=sessionStorage["secondId"]){var a=new FormData;a.append("bookName",this.addData.bookName),a.append("bookDesc",this.addData.bookDesc),a.append("bookKeywords",this.addData.bookKeywords.replace(/，/gi,",")),a.append("file",this.addData.file[0]),a.append("thirdClass",sessionStorage["thirdId"]),this.$axios.post("library/book_build/",a).then(function(e){200==e.data.state?(t.$alert("添加成功","提示"),t.close()):t.$alert("错误！！："+e.data.msg,"提示")})}else this.$alert("请选左侧选择分类","提示")},handlerUpload:function(t){this.addData.file=t.target.files,this.fileList=t.target.value}},mounted:function(){}},sn=an,on=(a("0db0"),Object(p["a"])(sn,tn,en,!1,null,"abcad04e",null)),nn=on.exports,ln={name:"knowledgeBook",components:{SvHeader:S,SvPlaceholder:tt,SvAddBook:nn},data:function(){return{firstList:[],list:[],body:!1,index:0,pageSize:5,totalPage:10,curentPage:1,bookList:[],firstName:"",secondName:"",thirdName:"",isAddShow:!1}},methods:{getFirstList:function(){var t=this;this.body=!1,this.list=[],this.$axios.get("library/fist/").then(function(e){200==e.data.state?(t.firstList=e.data.data,t.getSecondList()):t.$alert(e.data.msg,"提示")})},getSecondList:function(){var t=this,e=!0,a=!1,s=void 0;try{for(var o,n=C()(this.firstList);!(e=(o=n.next()).done);e=!0){var i=o.value,l=new FormData;l.append("firstClassId",i.id),this.$axios.post("library/firstClass/",l).then(function(e){200==e.data.state?t.list.push(e.data.data):t.$alert(e.data.msg,"提示")})}}catch(r){a=!0,s=r}finally{try{e||null==n.return||n.return()}finally{if(a)throw s}}setTimeout(function(){t.body=!0},500)},getBookList:function(){var t=this;this.body=!1;var e=new FormData;e.append("classId",this.index),e.append("page",this.curentPage),e.append("pageSize",this.pageSize),this.$axios.post("library/books_class/",e).then(function(e){if(200==e.data.state){var a=!0,s=!1,o=void 0;try{for(var n,i=C()(e.data.data.list);!(a=(n=i.next()).done);a=!0){var l=n.value;l.editTime=E(new Date(l.editTime),"yyyy-MM-dd hh:mm:ss")}}catch(r){s=!0,o=r}finally{try{a||null==i.return||i.return()}finally{if(s)throw o}}t.bookList=e.data.data.list,t.totalPage=e.data.data.total,t.body=!0}else t.$alert(e.data.msg,"提示")})},downLoadBook:function(t){window.open(f.svUrl+"library/download?bookId="+t+"&&id="+sessionStorage.id)},chose:function(t,e,a,s){this.index=sessionStorage["thirdId"]=t,this.firstName=sessionStorage["firstName"]=e,this.secondName=sessionStorage["secondName"]=a,this.thirdName=sessionStorage["thirdName"]=s,this.getBookList()},showAdd:function(){this.isAddShow=!0},closeAdd:function(){this.isAddShow=!1,this.getBookList()},search:function(){var t=this,e=new FormData;e.append("keywords",sessionStorage["knowledgeSearch"]),e.append("page",this.curentPage),e.append("pageSize",this.pageSize),this.$axios.post("library/query/",e).then(function(e){if(200==e.data.state){var a=!0,s=!1,o=void 0;try{for(var n,i=C()(e.data.data.list);!(a=(n=i.next()).done);a=!0){var l=n.value;l.editTime=E(new Date(l.editTime),"yyyy-MM-dd hh:mm:ss")}}catch(r){s=!0,o=r}finally{try{a||null==i.return||i.return()}finally{if(s)throw o}}t.bookList=e.data.data.list,t.totalPage=e.data.data.total,t.body=!0}else t.$alert(e.data.msg,"提示")})},historySearch:function(){var t=this,e=new FormData;e.append("bookId",sessionStorage["knowledgeSearch"]),this.$axios.post("library/book/",e).then(function(e){200==e.data.state?(t.bookList=[],e.data.data.editTime=E(new Date(e.data.data.editTime),"yyyy-MM-dd hh:mm:ss"),t.bookList.push(e.data.data),t.totalPage=1,t.body=!0):t.$alert(e.data.msg,"提示")})},back:function(){this.$router.push("/knowledge")},getAllList:function(){var t=this;this.list=[],this.body=!1,this.$axios.get("/library/class/").then(function(e){if(200==e.data.state){var a=!0,s=!1,o=void 0;try{for(var n,i=C()(e.data.data);!(a=(n=i.next()).done);a=!0){var l=n.value;l["close"]=!0;var r=!0,c=!1,d=void 0;try{for(var u,p=C()(l.childClasses);!(r=(u=p.next()).done);r=!0){var m=u.value;m["close"]=!1}}catch(f){c=!0,d=f}finally{try{r||null==p.return||p.return()}finally{if(c)throw d}}}}catch(f){s=!0,o=f}finally{try{a||null==i.return||i.return()}finally{if(s)throw o}}t.list=e.data.data,t.body=!0}else t.$alert(e.data.msg,"提示")})},deleteBook:function(t){var e=this;this.$confirm("确定要删除吗","提示").then(function(){var a=new FormData;a.append("bookId",t),e.$axios.post("library/book_delete",a).then(function(t){200==t.data.state?(e.$alert("删除成功","提示"),e.getBookList()):e.$alert(t.data.msg,"提示")})})}},mounted:function(){this.firstName=sessionStorage["firstName"],this.secondName=sessionStorage["secondName"],this.thirdName=sessionStorage["thirdName"],this.index=sessionStorage["thirdId"],this.getAllList(),-1==this.index||-2==this.index?-2==this.index?(this.index=-1,this.historySearch()):this.search():this.getBookList()}},rn=ln,cn=(a("ccf3"),Object(p["a"])(rn,Qo,Xo,!1,null,"24f4e99d",null)),dn=cn.exports;n["default"].use(h["a"]);var un=new h["a"]({mode:"history",base:"/",routes:[{path:"/index",name:"index",component:V},{path:"/my-project",name:"myProject",component:dt},{path:"/project-detail",name:"projectDetail",component:vt},{path:"/project-team",name:"projectTeam",component:wt},{path:"/person-info",name:"personinfo",component:At},{path:"/add-dept",name:"addDept",component:Rt},{path:"/account-assign",name:"accountAssign",component:Wt},{path:"/transfer",name:"transfer",component:Gt},{path:"/backup",name:"backup",component:ae},{path:"/proj-sum",name:"SvProjSum",component:fe},{path:"/prog-stat",name:"SvProgStat",component:re},{path:"/org",name:"SvOrg",component:$e},{path:"/add-project",name:"addPro",component:Ue},{path:"/document-list",name:"documentList",component:Ge},{path:"/state-detail",name:"stateDetail",component:fa},{path:"/",name:"login",component:ya},{path:"/pro-cost",name:"proCost",component:Ga},{path:"/add-job-cost",name:"addJobCost",component:$a},{path:"/add-extra-cost",name:"addExtraCost",component:Fa},{path:"/daily",name:"daily",component:rs},{path:"/account",name:"account",component:Ss},{path:"/add-daily-cost",name:"add-daily-cost",component:Ps},{path:"/pro-cost-count",name:"pro-cost-count",component:Us},{path:"/document-template-list",name:"document-template-list",component:Gs},{path:"/role-list",name:"role-list",component:ro},{path:"/role-cost-list",name:"role-cost-list",component:_o},{path:"/knowledge",name:"knowledge",component:qo},{path:"/knowledge-book",name:"knowledge-book",component:dn}]}),pn=(a("4dcb"),a("3486"),a("b087"),a("7a42"),a("85d3"),a("61cc"),a("bc3a")),mn=a.n(pn);n["default"].use(o.a),n["default"].prototype.$axios=mn.a,n["default"].config.productionTip=!0;var fn=new n["default"]({router:un,render:function(t){return t(f)}});fn.$mount("#svApp");new n["default"]},5756:function(t,e,a){},"59b3":function(t,e,a){t.exports=a.p+"img/qywh.2c4741b3.png"},"5b2c":function(t,e,a){},"5d64":function(t,e,a){"use strict";var s=a("6d3e"),o=a.n(s);o.a},"5dd1":function(t,e,a){t.exports=a.p+"img/IT-logo.47ebb841.png"},"61cc":function(t,e,a){},"62a8":function(t,e,a){"use strict";var s=a("561e"),o=a.n(s);o.a},6520:function(t,e,a){"use strict";var s=a("0196"),o=a.n(s);o.a},"65fd":function(t,e,a){},6672:function(t,e,a){"use strict";var s=a("c5e2"),o=a.n(s);o.a},"679d":function(t,e,a){"use strict";var s=a("857b"),o=a.n(s);o.a},"690a":function(t,e,a){t.exports=a.p+"img/avatar.11bb601b.png"},"6d3e":function(t,e,a){},"6d5e":function(t,e,a){"use strict";var s=a("1715"),o=a.n(s);o.a},"6dcf":function(t,e,a){"use strict";var s=a("1484"),o=a.n(s);o.a},"6dd0":function(t,e,a){"use strict";var s=a("948e"),o=a.n(s);o.a},"71d1":function(t,e,a){"use strict";var s=a("22fd"),o=a.n(s);o.a},"74bc":function(t,e,a){"use strict";var s=a("4f39"),o=a.n(s);o.a},7566:function(t,e,a){"use strict";var s=a("d447"),o=a.n(s);o.a},"75e2":function(t,e,a){},7645:function(t,e,a){"use strict";var s=a("fce6"),o=a.n(s);o.a},7745:function(t,e,a){"use strict";var s=a("e6c8"),o=a.n(s);o.a},7778:function(t,e,a){},"7a29":function(t,e,a){"use strict";var s=a("5b2c"),o=a.n(s);o.a},"7a42":function(t,e,a){},"7de5":function(t,e,a){"use strict";var s=a("b0ec"),o=a.n(s);o.a},8159:function(t,e,a){"use strict";var s=a("a3ae"),o=a.n(s);o.a},"857b":function(t,e,a){},"85d3":function(t,e,a){},"86ca":function(t,e,a){},"86d4":function(t,e,a){},8755:function(t,e,a){},"89ae":function(t,e,a){},"8a2c":function(t,e,a){},"8dbc":function(t,e,a){},"8e02":function(t,e,a){"use strict";var s=a("40ab"),o=a.n(s);o.a},"8e38":function(t,e,a){},"8f43":function(t,e,a){"use strict";var s=a("032d"),o=a.n(s);o.a},"944b":function(t,e,a){"use strict";var s=a("75e2"),o=a.n(s);o.a},9453:function(t,e,a){t.exports=a.p+"img/logo-index.44c8fe69.png"},"948e":function(t,e,a){},a1a8:function(t,e,a){},a296:function(t,e,a){},a35d:function(t,e,a){},a3ae:function(t,e,a){},a961:function(t,e,a){"use strict";var s=a("d492"),o=a.n(s);o.a},a995:function(t,e,a){"use strict";var s=a("e7fd"),o=a.n(s);o.a},aa67:function(t,e,a){},adf2:function(t,e,a){"use strict";var s=a("65fd"),o=a.n(s);o.a},b087:function(t,e,a){},b0ec:function(t,e,a){},b1fe:function(t,e,a){"use strict";var s=a("f6a1"),o=a.n(s);o.a},b3e6:function(t,e,a){},b61c:function(t,e,a){"use strict";var s=a("a35d"),o=a.n(s);o.a},bb57:function(t,e,a){"use strict";var s=a("d03f"),o=a.n(s);o.a},bc56:function(t,e,a){"use strict";var s=a("3d61"),o=a.n(s);o.a},bf3b:function(t,e,a){},bfb8:function(t,e,a){"use strict";var s=a("89ae"),o=a.n(s);o.a},c025:function(t,e,a){},c15c:function(t,e,a){"use strict";var s=a("8dbc"),o=a.n(s);o.a},c1cc:function(t,e,a){"use strict";var s=a("fb6a"),o=a.n(s);o.a},c334:function(t,e,a){"use strict";var s=a("3c9a"),o=a.n(s);o.a},c49b:function(t,e,a){t.exports=a.p+"img/shouqi2.48547979.png"},c5e2:function(t,e,a){},c6b4:function(t,e,a){"use strict";var s=a("4664"),o=a.n(s);o.a},c940:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAmCAYAAABK4fLXAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAHVSURBVFhH7ZcxS8NAFMf/L0Rw8APUUejQoaOCo4WCow46Cm5VUHBUHJzEL1DE4iTipB9AqFBHQQcHBwdBR0cHR8nzXXyh1eZIciatQn9wef87uNw/73KXHOE4KCPAAYBFgHyJOcCvYNxIOcO6d6GNVgit4FzCktbzh/kKH7SCDXrVlj48KZKBAiGqw+cOmlzSlj4kE8yqgQaRKjdaQUduORdq5hm5noqJitYfJSO1uIyYTBTDmncXDmoGNxgzlowUZ8JgnjqFkWJNGFIYKd6EIcHIYEwY4oyMcRt77A/OhOGnEVAVJd4qbokGmApjHB7Kcm2Hmvk+30ww3lSZgZ6tJTJgIFTzNUF0oioD5Oc7HfKSYZLr8nQLUhv/arRBqypy3raz0DPuYFeHhWQTh8GsKjdS9E+ejt5l5wRfo+HVtNIl43S8aHTlXaOV0YsZkZyJo2BaNqFbrWUn4OXYn92MmdjV6AahocpKGhMTGt0gJB4jUixRrki7fnodsPXPNB2/MWBI0f+frI4Wb8vVHBPdYG7K7/+m1rpkWx08r8IN+WlRZSXZhDnYgmXrdiyMJ72TldG2HTEyEfEnTHx/MYeEZIIvVQ8HORKKCdoX9aBNA0b2EaKdT1Nq5rUS4i7lAAAAAElFTkSuQmCC"},caa3:function(t,e,a){"use strict";var s=a("bf3b"),o=a.n(s);o.a},cad4:function(t,e,a){t.exports=a.p+"img/wks.df91f5b4.png"},cb0e:function(t,e,a){"use strict";var s=a("8755"),o=a.n(s);o.a},ccf3:function(t,e,a){"use strict";var s=a("4f84"),o=a.n(s);o.a},cd95:function(t,e,a){"use strict";var s=a("a296"),o=a.n(s);o.a},d03f:function(t,e,a){},d119:function(t,e,a){"use strict";var s=a("4b0b"),o=a.n(s);o.a},d329:function(t,e,a){"use strict";var s=a("f1be"),o=a.n(s);o.a},d447:function(t,e,a){},d492:function(t,e,a){},d5a2:function(t,e,a){"use strict";var s=a("d8d4"),o=a.n(s);o.a},d6fc:function(t,e,a){"use strict";var s=a("7778"),o=a.n(s);o.a},d8d4:function(t,e,a){},d95c:function(t,e,a){"use strict";var s=a("28a4"),o=a.n(s);o.a},dc8b:function(t,e,a){t.exports=a.p+"img/logo-g.bde6fae0.png"},dca2:function(t,e,a){"use strict";var s=a("36be"),o=a.n(s);o.a},dd36:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAAhCAYAAADzjnq8AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAcSURBVChTY7h58+Z/BiBgAhEgMMoAAjgDChgYADh7A8mwWDHIAAAAAElFTkSuQmCC"},e09b:function(t,e,a){t.exports=a.p+"img/allxm.1d4d9bb2.png"},e6c8:function(t,e,a){},e7fd:function(t,e,a){},edbb:function(t,e,a){},ef50:function(t,e,a){"use strict";var s=a("4437"),o=a.n(s);o.a},f1be:function(t,e,a){},f5e5:function(t,e,a){"use strict";var s=a("aa67"),o=a.n(s);o.a},f6a1:function(t,e,a){},f933:function(t,e,a){},fb6a:function(t,e,a){},fce6:function(t,e,a){},fd1e:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAeCAYAAABe3VzdAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAHcSURBVFhH7ZgvSENRFMa/85xoMCwYRAwGo8FgsIjVoM0qaBibYLCICIKIwWiROVFQ0CaCzXUHLhoWDEaRBYPBIDje8bvvXXnbcP55700X3g/u3jnnjb1v59x7d88EH+zpALp1jdYExyggfV78M1Tv+VrhuEDOOfNibcIXuO/O0TqESNrzf4NqCT0yi0V5tpFYERTccV6vKa7XDxHVW95p/UBlhkX6rUe0iEeK3JKaDcSG4MA952XOd7UMB/PIOKaErdnUFAYxw/ef1k2FSWSlZO3YcDhMBi2y+q04g8lUVi5pmeGjWvc58UGBMmxthMhAUNIw87cZs1DNqIMlVrW2ERis6p9QcFcobNd6MaIneJN1LEvVlDg8PVLwVnHsyAK3vBscazpaBj84dEdQkyHrhcNBipmb4g6RC3YIPYlHYJzs6wLFHnu26kO0EreDKoJfJpGhzhPYtNl3nsAmEoFRSQRGJREYlURgVBKBUUkERoUCtWptIO+yYf9nGnoSrTk8wZatB3Rhx2sp/wvz7JRuW4/6UDGN+zQPhlc2ZE6xT2yl2MR/8ddHW9AXCnoNjvtEdck/4hfcDd4IlHcCqkfIOZmgB8m7E5yRRuRYw7f4S1SfWb07ZnKL4ooA8A7lf4ZVmJJMjQAAAABJRU5ErkJggg=="},fe57:function(t,e,a){"use strict";var s=a("edbb"),o=a.n(s);o.a}});
//# sourceMappingURL=app.ffc9420a.js.map